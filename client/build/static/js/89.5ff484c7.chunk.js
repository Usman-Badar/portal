(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[89],{615:function(e,t,n){"use strict";n.r(t);var o=n(4),s=n(1),c=n(27),i=n(28),a=n(25),r=n(83),u=(n(82),function(e,t,n){e.get("/store/get_inventory_requests").then((function(e){t(e.data[0]),n(e.data[1])})).catch((function(e){console.log(e)}))}),l=function(e,t,n){e.post("/store/inventory_request/details",{request_id:t.id}).then((function(e){n(e.data)})).catch((function(e){console.log(e)}))},p=function(e,t,n){e.post("/getitemrequestcomments",{id:t}).then((function(e){n(e.data),setTimeout((function(){var e=document.getElementById("comments_content");e&&(e.scrollTop=e.scrollHeight)}),500)})).catch((function(e){console.log(e)}))},d=n(11),m=n(95),g=n(0),f=Object(s.lazy)((function(){return n.e(67).then(n.bind(null,635))})),b=(t.default=function(){var e=Object(a.c)((function(e){return e.EmpAuth.EmployeeData})),t=Object(s.useState)(),n=Object(o.a)(t,2),c=n[0],i=n[1],h=Object(s.useState)(),O=Object(o.a)(h,2),j=O[0],_=O[1],q=Object(s.useState)(),v=Object(o.a)(q,2),y=v[0],I=v[1],k=Object(s.useState)([]),x=Object(o.a)(k,2),C=x[0],S=x[1];return Object(s.useEffect)((function(){u(d.a,i,_),m.a.on("newitemrequestcomment",(function(e){parseInt(e)===parseInt(window.location.href.split("/").pop().split("=").pop())&&p(d.a,e,S)}))}),[]),Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(b,{content:Object(g.jsx)(f,{Requests:c,Details:y,Comments:C,Specifications:j,CloseRequest:function(){S([]),I(),u(d.a,i)},OpenRequest:function(t){return function(e,t,n,o,s,c,i){var a=s[t];p(n,a.request_id,i),a.accepted_by?(l(n,a,c),e.dark("Opening The Request",{position:"top-right",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})):(e.dark("Setting Up The Details",{position:"top-right",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),n.post("/store/accept_inventory_request",{accepted_by:o,request_id:a.id}).then((function(){l(n,a,c),e.dark("Opening The Request",{position:"top-right",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})})))}(r.b,t,d.a,e.emp_id,c,I,S)},newComment:function(e){return function(e,t,n,o,s){e.preventDefault(),t.post("/newitemrequestcomment",{comment:e.target.comment.value,item_request_id:n,sender_id:sessionStorage.getItem("EmpID")}).then((function(){document.getElementById("commentForm").reset(),p(t,n,s),o.emit("newitemrequestcomment",n)})).catch((function(e){console.log(e)}))}(e,d.a,y[0][0].request_id,m.a,S)},issueToInventory:function(e,t){return function(e,t,n,o,s,c){n.post("/store/issue_items_to_inventory",{id:t,request_id:e,issued_by:sessionStorage.getItem("EmpID")}).then((function(){o(),s([]),u(n,c)})).catch((function(e){console.log(e)}))}(e,t,d.a,I,S,i)}})}),Object(g.jsx)(r.a,{})]})},function(e){var t=Object(g.jsx)(c.a,{display:!0,styling:{zIndex:1e5},icon:Object(g.jsx)("img",{src:i.a,className:"LoadingImg",alt:"LoadingIcon"}),txt:"Please Wait"});return Object(g.jsxs)(s.Suspense,{fallback:t,children:[" ",e.content," "]})})}}]);