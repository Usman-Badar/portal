(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[27],{293:function(e,t,n){"use strict";t.a=n.p+"static/media/icons8-iphone-spinner.e2bb0653.gif"},511:function(e,t,n){},512:function(e,t,n){},619:function(e,t,n){"use strict";n.r(t);var a=n(5),s=n(1),c=(n(511),n(11)),i=n(25),o=n(81),r=n.n(o),l=n(86),d=(n(85),n(28)),h=n.n(d),p=(n(512),n(0)),u=function(e){var t=Object(s.useState)([]),n=Object(a.a)(t,2),c=n[0],i=n[1];return Object(s.useEffect)((function(){i(e.data)}),[e.data]),Object(p.jsx)("div",{className:"DicussionDrive",children:c.map((function(t,n){return Object(p.jsx)("div",{className:"DriveItem",style:{backgroundImage:"url('images/drive/"+t.name+"')"},onClick:function(){return e.AttachDrive(t.name)}},n)}))})},m=n(91),j=n(97),b=n.p+"static/media/chat_preview.fef3ceaa.png",g=n(293),O=Object(s.lazy)((function(){return n.e(64).then(n.bind(null,648))})),f=Object(s.lazy)((function(){return n.e(63).then(n.bind(null,649))}));t.default=function(){var e=Object(s.useState)(new Date),t=Object(a.a)(e,2),o=t[0],d=(t[1],n(100)("real secret keys should be long and random")),v=Object(s.useState)(),x=Object(a.a)(v,2),w=x[0],C=x[1],N=Object(s.useState)(),S=Object(a.a)(N,2),y=S[0],D=S[1],_=Object(s.useState)([]),k=Object(a.a)(_,2),E=k[0],I=k[1],H=Object(s.useState)(!1),L=Object(a.a)(H,2),B=L[0],P=L[1],T=Object(s.useState)(""),A=Object(a.a)(T,2),R=A[0],U=A[1],F=Object(s.useState)([]),M=Object(a.a)(F,2),q=M[0],z=M[1],J=Object(s.useState)({}),G=Object(a.a)(J,2),K=G[0],W=G[1],$=Object(s.useState)("No Employee Selected"),Q=Object(a.a)($,2),V=Q[0],X=Q[1],Y=Object(s.useState)(!1),Z=Object(a.a)(Y,2),ee=Z[0],te=Z[1],ne=Object(s.useState)([]),ae=Object(a.a)(ne,2),se=ae[0],ce=ae[1],ie=Object(s.useState)(),oe=Object(a.a)(ie,2),re=oe[0],le=oe[1],de=Object(s.useState)(),he=Object(a.a)(de,2),pe=he[0],ue=he[1],me=Object(s.useState)("chat"),je=Object(a.a)(me,2),be=je[0],ge=je[1],Oe=Object(i.c)((function(e){return e.EmpAuth.EmployeeData}));Object(s.useEffect)((function(){fe("chat"),le(parseInt(sessionStorage.getItem("EmpID")))}),[]),Object(s.useMemo)((function(){window.screen.width<750&&(r()(".Center").show(),r()(".List").hide(),r()(".chatcount").hide())}),[o]),Object(s.useEffect)((function(){j.a.on("UserOnline",(function(e){U(e.rslt[0].app_status)})),j.a.on("UserNewChat",(function(e){Oe.emp_id===parseInt(e.receiver)&&void 0!==K.emp_id&&K.emp_id===parseInt(e.sender)&&r()(".NewTweet .refresh").trigger("click")}))}),[K,Oe.emp_id]);var fe=function(e){var t=new FormData;ge(e),"chat"===e&&(C(),t.append("currentEmp",sessionStorage.getItem("EmpID")),c.a.post("/getchatemployees",t).then((function(e){for(var t=[],n=0;n<e.data[0].length;n++)e.data[0][n].emp_id!==parseInt(sessionStorage.getItem("EmpID"))&&t.push(e.data[0][n]);for(var a=[],s=0;s<e.data[1].length;s++)null!==e.data[1][s]&&a.push(e.data[1][s]);C(t),I(a)})).catch((function(e){l.b.dark(e,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})})),window.screen.width<750&&(r()(".Center").hide(),r()(".List").show(),r()(".chatcount").show(),r()(".Right").hide())),"contacts"===e&&(C(),t.append("currentEmp",sessionStorage.getItem("EmpID")),c.a.post("/getallemployees",t).then((function(e){C(e.data[0]),I(e.data[1])})).catch((function(e){l.b.dark(e,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})})),window.screen.width<750&&(r()(".Center").hide(),r()(".List").show(),r()(".chatcount").show(),r()(".Right").hide()))},ve=function(e,t){P(!0),X("Loading Chat....");var n=y?w.filter((function(e){return e.name.toLowerCase().includes(y.toLowerCase())})):w,a=new FormData;a.append("sender",e),a.append("receiver",sessionStorage.getItem("EmpID")),a.append("chatDate",o.toString()),c.a.post("/getemployeewithchat",a).then((function(e){P(!1),X(),W(n[t]),j.a.emit("UserOnline",n[t].emp_id),ue(t),e.data.length!==q.length&&(z(e.data),setTimeout((function(){var e=document.getElementById("ChatContainer");e&&(e.scrollTop=e.scrollHeight)}),300))})).catch((function(e){P(!1),l.b.dark(e,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})})),window.screen.width<750&&(r()(".Center").show(),r()(".List").hide(),r()(".chatcount").hide())},xe=function(e){if(e&&e.preventDefault(),""!==r()("#Sendtext").val()){var t=new FormData;t.append("eventID",1),t.append("senderID",sessionStorage.getItem("EmpID")),t.append("receiverID",K.emp_id),t.append("ChatBody",d.encrypt(r()("#Sendtext").val())),t.append("NotificationBody",r()("#Sendtext").val()),t.append("Title",Oe.name),t.append("whatsapp",!0),c.a.post("/insertchat",t).then((function(){ve(K.emp_id,pe),E[pe].chat_body=d.encrypt(r()("#Sendtext").val()),r()("#Sendtext").val(""),setTimeout((function(){var e=document.getElementById("ChatContainer");e&&(e.scrollTop=e.scrollHeight)}),300),c.a.post("/newnotification",t).then((function(){j.a.emit("NewNotification",K.emp_id),j.a.emit("NewChat",{sender:Oe.emp_id,receiver:K.emp_id,index:pe})})).catch((function(e){l.b.dark(e,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}))})).catch((function(e){l.b.dark(e,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}))}else l.b.dark("Enter at least a single word",{position:"top-center",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})};function we(e){return(e=e.toString().match(/^([01]\d|2[0-3])(:)([0-5]\d)(:[0-5]\d)?$/)||[e]).length>1&&((e=e.slice(1))[5]=+e[0]<12?"AM":"PM",e[0]=+e[0]%12||12),e.join("")}var Ce=function(){c.a.post("/getalldrive",{emp_id:Oe.emp_id}).then((function(e){ce(e.data)})).catch((function(e){console.log(e)})),Ne()},Ne=function(){te(!ee)},Se=function(){window.screen.width<750&&(r()(".Center").hide(),r()(".List").hide(),r()(".chatcount").hide(),r()(".Right").show())};return Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)("div",{className:"EmployeeChat popUps",children:[Object(p.jsx)(m.a,{show:ee,Hide:Ne,content:Object(p.jsx)(u,{AttachDrive:function(e){var t="/***"+e+"***/";r()("#Sendtext").val(t),xe(),Ne()},data:se})}),Object(p.jsxs)("div",{className:"Left",children:[Object(p.jsx)("input",{type:"search",onChange:function(e){return D(e.target.value)},className:"form-control form-control-sm",placeholder:"Search Employees..."}),Object(p.jsxs)("div",{className:"tabs",children:[Object(p.jsx)("button",{className:"chat"===be?"btn submit":"btn green",onClick:function(){return fe("chat")},children:"Chat"}),Object(p.jsx)("button",{className:"contacts"===be?"btn submit":"btn green",onClick:function(){return fe("contacts")},children:"contacts"})]}),Object(s.useMemo)((function(){return Object(p.jsx)(s.Suspense,{fallback:Object(p.jsxs)("div",{className:"text-center",children:[Object(p.jsx)("img",{src:g.a,alt:"Please wait.....",width:"50",height:"50",className:"rounded-circle"}),Object(p.jsx)("p",{className:"mb-0",children:"Please Wait...."})]}),children:Object(p.jsx)(O,{encryptor:d,EmployeesLastChat:E,SearchEmpKeywords:y,Employees:w,GetThatEmpChat:ve})})}),[w,E,d])]}),Object(s.useMemo)((function(){return Object(p.jsxs)("div",{className:"Center",children:[V?Object(p.jsxs)("div",{className:"NoChat popUps",children:[Object(p.jsx)("img",{src:b,width:"100%",height:"auto",alt:"No CHat Img"}),Object(p.jsx)("h5",{className:"font-weight-bold mt-3",children:Object(p.jsx)(h.a,{options:{strings:[V],autoStart:!0,loop:!0,delay:50}})})]}):Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("div",{className:"ChatEmployee popUps",children:[Object(p.jsx)("img",{src:"images/employees/"+K.emp_image,width:"55",height:"55",alt:"chat employee img",className:"rounded-circle"}),Object(p.jsxs)("div",{className:"ml-2",children:[Object(p.jsxs)("p",{className:"font-weight-bold",children:[" ",K.name," "]}),Object(p.jsxs)("p",{children:[" ",K.designation_name+" in "+K.company_name," "]}),V?""===R?Object(p.jsx)("p",{className:"offline",children:"offline"}):Object(p.jsx)("p",{className:"online",children:"online"}):null]})]}),Object(p.jsxs)("div",{className:"ChatContent popUps",id:"ChatContainer",children:[o.toDateString()!==(new Date).toDateString()?Object(p.jsxs)("p",{className:"TweetDate",children:[" ",o.toDateString()]}):null,Object(p.jsx)(s.Suspense,{fallback:Object(p.jsx)("div",{className:"h-100 d-flex align-items-center justify-content-center",children:Object(p.jsx)("img",{src:g.a,alt:"Please wait.....",width:"40",height:"40",className:"rounded-circle"})}),children:Object(p.jsx)(f,{LoadingState:B,encryptor:d,Calender:o,EmpID:re,CurrentEmployeeData:Oe,tConvert:we,Chat:q,ChatEmployee:K})})]}),Object(p.jsxs)("form",{className:"NewTweet popUps",onSubmit:xe,children:[Object(p.jsxs)("div",{className:"d-flex align-content-center w-100 bg-white border",style:{borderRadius:"10px",color:"rgb(91, 109, 128, .5)"},children:[Object(p.jsx)("input",{className:"form-control w-100",placeholder:"Type something here...",id:"Sendtext"}),Object(p.jsx)("i",{className:"las la-paperclip",title:"Attachment From Drive",onClick:Ce})]}),Object(p.jsx)("button",{type:"submit",children:Object(p.jsx)("i",{className:"las la-arrow-up"})}),Object(p.jsx)("button",{type:"button",className:"btn text-white refresh d-none",onClick:function(){return ve(K.emp_id,pe)},children:Object(p.jsx)("i",{className:"las la-redo-alt"})})]})]}),Object(p.jsx)("div",{className:"calenderdiv",onClick:Se,children:Object(p.jsx)("i",{className:"las la-calendar"})})]})}),[o,q,K,re,pe,V,B])]})})}},91:function(e,t,n){"use strict";n(1),n(92);var a=n(0);t.a=function(e){return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("div",{className:"Attandence_Request_Div",style:{display:e.show?"flex":"none"},children:[Object(a.jsx)("div",{className:"dark",onClick:e.Hide}),Object(a.jsxs)("div",{style:{animationDelay:"0.1".toString()+"s"},className:e.show?"Attandence_Request_Div_Content Attandence_Request_Div_Content2":"Attandence_Request_Div_Content",children:[Object(a.jsx)("i",{className:"lar la-times-circle cross",onClick:e.Hide}),e.content]})]})})}},92:function(e,t,n){}}]);