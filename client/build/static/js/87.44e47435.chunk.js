(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[87],{618:function(t,e,n){"use strict";n.r(e);var o=n(4),a=n(1),c=n(83),i=(n(82),n(24)),s=n(9),r=n(11),u=function(t){var e=t.target.id.split("_").pop(),n="specification_row_"+e,o=document.getElementById(n).childNodes,a=o[0],c=o[1],i=o[2],s=o[3],r=o[4];l(t,i,s,r,a,c,e)},l=function(t,e,n,o,a,c,i){if(t.target.id.includes("specification_quantity")||t.target.id.includes("specification_est_cost"))if(""==e.textContent&&""==n.textContent)o.textContent="";else{var s=parseInt(""==e.textContent?0:e.textContent),r=parseFloat(""==n.textContent?0:n.textContent);if(isNaN(s))return e.style.outline="1px solid red",a.textContent="",!1;if(e.style.outline="none",isNaN(r))return n.style.outline="1px solid red",a.textContent="",!1;n.style.outline="none",o.textContent=s*r,f(a,c,e,n,i),d()}},d=function(){for(var t=document.getElementById("specifications_table_body").childNodes,e=Object.keys(t).map((function(e){return[t[e]]})),n=0,o=0;o<e.length;o++){var a=e[o][0].childNodes[4];""!==a.textContent&&(n+=parseInt(a.textContent))}return document.getElementById("total_calculated_amount").textContent=n,n},f=function(t,e,n,o,a){""!==e.textContent&&""!==n.textContent&&""!==o.textContent?t.textContent=a:t.textContent=""},p=n(0),h=Object(a.lazy)((function(){return n.e(37).then(n.bind(null,638))}));e.default=function(){var t=Object(a.useState)(!1),e=Object(o.a)(t,2),n=e[0],l=e[1],f=Object(a.useState)(!1),b=Object(o.a)(f,2),g=b[0],m=b[1],x=Object(a.useState)([]),_=Object(o.a)(x,2),j=_[0],C=_[1],O=Object(a.useState)([]),y=Object(o.a)(O,2),v=y[0],k=y[1],S=Object(a.useState)([]),N=Object(o.a)(S,2),w=N[0],I=N[1],E=Object(a.useState)(),B=Object(o.a)(E,2),D=B[0],F=B[1];return Object(a.useEffect)((function(){!function(t){r.a.get("/getallcompanies").then((function(e){t(e.data)})).catch((function(t){console.log(t)}))}(k),function(t){r.a.get("/getalllocations").then((function(e){t(e.data)})).catch((function(t){console.log(t)}))}(I)}),[]),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(a.Suspense,{fallback:Object(p.jsx)("div",{children:"Please Wait..."}),children:Object(p.jsx)(h,{Companies:v,Locations:w,Quotations:j,ShowQuotationModal:n,SubmitConfirmation:g,PRSubmittion:function(t){return function(t,e,n,o){t.preventDefault();for(var a=new FormData,c=document.getElementById("specifications_table_body").childNodes,u=Object.keys(c).map((function(t){return[c[t]]})),l=[],d=!0,f=function(t){var n=!0,o={},a=u[t][0].childNodes,c=Object.keys(a).map((function(t){return[a[t]]}));""===u[t][0].childNodes[1].textContent&&""===u[t][0].childNodes[2].textContent&&""===u[t][0].childNodes[3].textContent||""===u[t][0].childNodes[0].textContent&&(d=!1,e.dark("There is an incomplete value in the specifications list.",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}));for(var r=0;r<c.length;r++){var f=c[r][0].id.split("_");f.pop(),o=Object(s.a)(Object(s.a)({},o),{},Object(i.a)({},f.join("_"),c[r][0].textContent))}for(var p=Object.keys(o).map((function(t){return[o[t]]})),h=0;h<p.length;h++)""===p[h][0]&&(n=!1);n&&l.push(o)},p=0;p<u.length;p++)f(p);d&&(a.append("specifications",JSON.stringify(l)),a.append("data",JSON.stringify(o)),a.append("note",t.target.notes.value),a.append("requested_by",sessionStorage.getItem("EmpID")),n.forEach((function(t){a.append("Attachments",t.file)})),r.a.post("/purchase/requisition/submittion&&submit_by=employee",a,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){})).catch((function(t){console.log(t)})))}(t,c.b,j,D)},SubmitPR:function(t){return function(t,e,n){t.preventDefault(),e({company_code:t.target.company_code.value,location_code:t.target.location_code.value,new_purchase_checkbox:t.target.new_purchase.checked,repair_replacement_checkbox:t.target.repair_replacement.checked,budgeted_checkbox:t.target.budgeted.checked,not_budgeted_checkbox:t.target.not_budgeted.checked,invoice_attached_checkbox:t.target.invoice_attached.checked,reason:t.target.reason.value,total_calculated_amount:d()}),n(!0)}(t,F,m)},setSubmitConfirmation:m,onAttachQuotations:function(t){return function(t,e){var n=new FileReader;n.onload=function(){if(2===n.readyState){for(var o=[],a=0;a<t.target.files.length;a++)o.push({file:t.target.files[a],name:t.target.files[a].name,extension:t.target.files[a].type});e(o)}},t.target.files[0]&&n.readAsDataURL(t.target.files[0])}(t,C)},setShowQuotationModal:l,onContentInput:u})}),Object(p.jsx)(c.a,{})]})}}}]);