(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[93],{631:function(e,t,s){"use strict";s.r(t);var a=s(5),c=s(1),n=s(86),o=(s(85),s(81)),r=s.n(o),i=s(11),l=s(25),u=s(0),p=Object(c.lazy)((function(){return s.e(34).then(s.bind(null,654))}));t.default=function(){var e=Object(l.c)((function(e){return e.EmpAuth.EmployeeData})),t=Object(c.useState)(!1),s=Object(a.a)(t,2),o=s[0],d=s[1],f=Object(c.useState)(),b=Object(a.a)(f,2),g=b[0],m=b[1],O=Object(c.useState)(),k=Object(a.a)(O,2),j=k[0],h=k[1],v=Object(c.useState)(),y=Object(a.a)(v,2),_=y[0],S=y[1],E=Object(c.useState)([]),I=Object(a.a)(E,2),C=I[0],T=I[1],w=Object(c.useState)(),x=Object(a.a)(w,2),D=x[0],P=x[1],B=Object(c.useState)(),J=Object(a.a)(B,2),H=J[0],K=J[1];return Object(c.useEffect)((function(){if(m(),H)for(var e=0;e<H.length;e++)parseInt(H[e].emp_id)===parseInt(D)&&r()(".search_employees").val(H[e].name)}),[D]),Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(c.Suspense,{fallback:Object(u.jsx)("div",{children:"Loading...."}),children:Object(u.jsx)(p,{Keyword:g,Employees:H,Tickets:_,Data:C,ShowModal:o,setShowModal:d,getIssuedTickets:function(e){return function(e,t,s){i.a.post("/employees/tickets/fetch/issued",{emp_id:e}).then((function(e){t(e.data[0]),s(e.data[1])})).catch((function(e){console.log(e)}))}(e,S,T)},setTicket:h,setEmployee:P,searchEmployees:function(e){return function(e,t,s){var a=e.target.value;t(a),""===a&&s()}(e,m,P)},getEmployees:function(){return function(e,t,s){if(e)return!1;var a=0;if(t)for(var c=0;c<JSON.parse(t.access).length;c++)0===parseInt(JSON.parse(t.access)[c])&&(a=1);i.a.post("/get/employees/all",{emp_id:sessionStorage.getItem("EmpID"),accessKey:a}).then((function(e){s(e.data)})).catch((function(e){console.log(e)}))}(H,e,K)},generateTicket:function(e){return function(e,t,s,a,c,n){if(e.preventDefault(),!t)return a.dark("Please select a employee.",{position:"top-center",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),!1;if(!s)return a.dark("Please select a ticket.",{position:"top-center",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),!1;r()("fieldset").prop("disabled",!0);var o=e.target.remarks.value;i.a.post("/employees/tickets/generate",{emp_id:t,ticket:s,remarks:o,generated_by:sessionStorage.getItem("EmpID")}).then((function(){r()("fieldset").prop("disabled",!1),document.getElementById("ticket_form").reset(),c(),n(),r()(".EmpTickets_container .tickets__selection_container .ticket").removeClass("active"),r()(".EmpTickets_container .tickets__selection_container .ticket .la-check").remove(),a.dark("Ticket has generated.",{position:"top-center",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})})).catch((function(e){r()("fieldset").prop("disabled",!1),console.log(e)}))}(e,D,j,n.b,P,h)}})}),Object(u.jsx)(n.a,{})]})}}}]);