(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[31],{147:function(e,t,n){"use strict";t.a=n.p+"static/media/icons8-iphone-spinner.e2bb0653.gif"},513:function(e,t,n){},514:function(e,t,n){},649:function(e,t,n){"use strict";n.r(t);var a=n(4),s=n(1),c=(n(513),n(11)),i=n(25),o=n(79),r=n.n(o),l=n(81),d=(n(82),n(514),n(0)),h=function(e){var t=Object(s.useState)([]),n=Object(a.a)(t,2),c=n[0],i=n[1];return Object(s.useEffect)((function(){i(e.data)}),[e.data]),Object(d.jsx)("div",{className:"DicussionDrive",children:c.map((function(t,n){return Object(d.jsx)("div",{className:"DriveItem",style:{backgroundImage:"url('images/drive/"+t.name+"')"},onClick:function(){return e.AttachDrive(t.name)}},n)}))})},p=n(86),u=n(98),j=n.p+"static/media/chat_preview.fef3ceaa.png",m=n(147),b=Object(s.lazy)((function(){return n.e(72).then(n.bind(null,681))})),g=Object(s.lazy)((function(){return n.e(71).then(n.bind(null,682))}));t.default=function(){var e=Object(s.useState)(new Date),t=Object(a.a)(e,2),o=t[0],O=(t[1],n(101)("real secret keys should be long and random")),f=Object(s.useState)([]),v=Object(a.a)(f,2),x=v[0],w=v[1],C=Object(s.useState)([]),N=Object(a.a)(C,2),S=N[0],y=N[1],D=Object(s.useState)(!1),_=Object(a.a)(D,2),E=_[0],k=_[1],I=Object(s.useState)(""),H=Object(a.a)(I,2),P=H[0],T=H[1],B=Object(s.useState)([]),L=Object(a.a)(B,2),A=L[0],R=L[1],F=Object(s.useState)({}),M=Object(a.a)(F,2),U=M[0],q=M[1],z=Object(s.useState)(!1),J=Object(a.a)(z,2),G=J[0],W=J[1],Y=Object(s.useState)(!1),$=Object(a.a)(Y,2),K=$[0],Q=$[1],V=Object(s.useState)([]),X=Object(a.a)(V,2),Z=X[0],ee=X[1],te=Object(s.useState)(),ne=Object(a.a)(te,2),ae=ne[0],se=ne[1],ce=Object(s.useState)(),ie=Object(a.a)(ce,2),oe=ie[0],re=ie[1],le=Object(i.c)((function(e){return e.EmpAuth.EmployeeData}));Object(s.useEffect)((function(){de("chat"),se(parseInt(sessionStorage.getItem("EmpID")))}),[]),Object(s.useMemo)((function(){window.screen.width<750&&(r()(".Center").show(),r()(".List").hide(),r()(".chatcount").hide())}),[o]),Object(s.useEffect)((function(){u.a.on("UserOnline",(function(e){T(e.rslt[0].app_status)})),u.a.on("UserNewChat",(function(e){le.emp_id===parseInt(e.receiver)&&void 0!==U.emp_id&&U.emp_id===parseInt(e.sender)&&r()(".NewTweet .refresh").trigger("click")}))}),[U,le.emp_id]);var de=function(e){var t=new FormData;"chat"===e&&(w([]),t.append("currentEmp",sessionStorage.getItem("EmpID")),c.a.post("/getchatemployees",t).then((function(e){for(var t=[],n=0;n<e.data[0].length;n++)e.data[0][n].emp_id!==parseInt(sessionStorage.getItem("EmpID"))&&t.push(e.data[0][n]);for(var a=[],s=0;s<e.data[1].length;s++)null!==e.data[1][s]&&a.push(e.data[1][s]);w(t),y(a)})).catch((function(e){l.b.dark(e,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})})),window.screen.width<750&&(r()(".Center").hide(),r()(".List").show(),r()(".chatcount").show(),r()(".Right").hide())),"contacts"===e&&(w([]),t.append("currentEmp",sessionStorage.getItem("EmpID")),c.a.post("/getallemployees",t).then((function(e){w(e.data[0]),y(e.data[1])})).catch((function(e){l.b.dark(e,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})})),window.screen.width<750&&(r()(".Center").hide(),r()(".List").show(),r()(".chatcount").show(),r()(".Right").hide()))},he=function(e,t){k(!0);var n=new FormData;n.append("sender",e),n.append("receiver",sessionStorage.getItem("EmpID")),n.append("chatDate",o.toString()),c.a.post("/getemployeewithchat",n).then((function(e){k(!1),W(!0),q(x[t]),u.a.emit("UserOnline",x[t].emp_id),re(t),e.data.length!==A.length&&(R(e.data),setTimeout((function(){var e=document.getElementById("ChatContainer");e&&(e.scrollTop=e.scrollHeight)}),300))})).catch((function(e){k(!1),l.b.dark(e,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})})),window.screen.width<750&&(r()(".Center").show(),r()(".List").hide(),r()(".chatcount").hide())},pe=function(e){if(e&&e.preventDefault(),""!==r()("#Sendtext").val()){var t=new FormData;t.append("eventID",1),t.append("senderID",sessionStorage.getItem("EmpID")),t.append("receiverID",U.emp_id),t.append("ChatBody",O.encrypt(r()("#Sendtext").val())),t.append("NotificationBody",r()("#Sendtext").val()),t.append("Title",le.name),t.append("whatsapp",!0),c.a.post("/insertchat",t).then((function(){he(U.emp_id,oe),S[oe].chat_body=O.encrypt(r()("#Sendtext").val()),r()("#Sendtext").val(""),setTimeout((function(){var e=document.getElementById("ChatContainer");e&&(e.scrollTop=e.scrollHeight)}),300),c.a.post("/newnotification",t).then((function(){u.a.emit("NewNotification",U.emp_id),u.a.emit("NewChat",{sender:le.emp_id,receiver:U.emp_id,index:oe})})).catch((function(e){l.b.dark(e,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}))})).catch((function(e){l.b.dark(e,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}))}else l.b.dark("Enter at least a single word",{position:"top-center",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})};function ue(e){return(e=e.toString().match(/^([01]\d|2[0-3])(:)([0-5]\d)(:[0-5]\d)?$/)||[e]).length>1&&((e=e.slice(1))[5]=+e[0]<12?"AM":"PM",e[0]=+e[0]%12||12),e.join("")}var je=function(){c.a.post("/getalldrive",{emp_id:le.emp_id}).then((function(e){ee(e.data)})).catch((function(e){console.log(e)})),me()},me=function(){Q(!K)},be=function(){window.screen.width<750&&(r()(".Center").hide(),r()(".List").hide(),r()(".chatcount").hide(),r()(".Right").show())};return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("div",{className:"EmployeeChat",children:[Object(d.jsx)(p.a,{show:K,Hide:me,content:Object(d.jsx)(h,{AttachDrive:function(e){var t="/***"+e+"***/";r()("#Sendtext").val(t),pe(),me()},data:Z})}),Object(d.jsxs)("div",{className:"Left",children:[Object(d.jsxs)("div",{className:"chatcount",children:[Object(d.jsx)("p",{className:"color-c-green",children:"Chat Members"}),Object(d.jsxs)("p",{children:[x.length>0?x.length-1+" ":x.length,"members"]})]}),Object(d.jsxs)("div",{className:"tabs",children:[Object(d.jsx)("button",{onClick:function(){return de("chat")},children:"Chat"}),Object(d.jsx)("button",{onClick:function(){return de("contacts")},children:"contacts"})]}),Object(s.useMemo)((function(){return Object(d.jsx)(s.Suspense,{fallback:Object(d.jsxs)("div",{className:"text-center",children:[Object(d.jsx)("img",{src:m.a,alt:"Please wait.....",width:"50",height:"50",className:"rounded-circle"}),Object(d.jsx)("p",{className:"mb-0",children:"Please Wait...."})]}),children:Object(d.jsx)(b,{encryptor:O,EmployeesLastChat:S,Employees:x,GetThatEmpChat:he})})}),[x,S,O])]}),Object(s.useMemo)((function(){return Object(d.jsxs)("div",{className:"Center",children:[G?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("div",{className:"ChatEmployee popUps",children:[Object(d.jsx)("img",{src:"images/employees/"+U.emp_image,width:"55",height:"55",alt:"chat employee img",className:"rounded-circle"}),Object(d.jsxs)("div",{className:"ml-2",children:[Object(d.jsxs)("p",{className:"font-weight-bold",children:[" ",U.name," "]}),Object(d.jsxs)("p",{children:[" ",U.designation_name+" in "+U.company_name," "]}),G?""===P?Object(d.jsx)("p",{className:"offline",children:"offline"}):Object(d.jsx)("p",{className:"online",children:"online"}):null]})]}),Object(d.jsxs)("div",{className:"ChatContent popUps",id:"ChatContainer",children:[o.toDateString()!==(new Date).toDateString()?Object(d.jsxs)("p",{className:"TweetDate",children:[" ",o.toDateString()]}):null,Object(d.jsx)(s.Suspense,{fallback:Object(d.jsx)("div",{className:"h-100 d-flex align-items-center justify-content-center",children:Object(d.jsx)("img",{src:m.a,alt:"Please wait.....",width:"40",height:"40",className:"rounded-circle"})}),children:Object(d.jsx)(g,{LoadingState:E,encryptor:O,Calender:o,EmpID:ae,CurrentEmployeeData:le,tConvert:ue,Chat:A,ChatEmployee:U})})]}),Object(d.jsxs)("form",{className:"NewTweet popUps",onSubmit:pe,children:[Object(d.jsxs)("div",{className:"d-flex align-content-center w-100 bg-white border",style:{borderRadius:"10px",color:"rgb(91, 109, 128, .5)"},children:[Object(d.jsx)("input",{className:"form-control w-100",placeholder:"Type something here...",id:"Sendtext"}),Object(d.jsx)("i",{className:"las la-paperclip",title:"Attachment From Drive",onClick:je})]}),Object(d.jsx)("button",{type:"submit",children:Object(d.jsx)("i",{className:"las la-arrow-up"})}),Object(d.jsx)("button",{type:"button",className:"btn text-white refresh d-none",onClick:function(){return he(U.emp_id,oe)},children:Object(d.jsx)("i",{className:"las la-redo-alt"})})]})]}):Object(d.jsxs)("div",{className:"NoChat popUps",children:[Object(d.jsx)("img",{src:j,width:"100%",height:"auto",alt:"No CHat Img"}),Object(d.jsx)("h3",{className:"font-weight-bold mt-3",children:"NO EMPLOYEE SELECTED"})]}),Object(d.jsx)("div",{className:"calenderdiv",onClick:be,children:Object(d.jsx)("i",{className:"las la-calendar"})})]})}),[o,A,U,ae,oe,G,E])]})})}},86:function(e,t,n){"use strict";n(1),n(89);var a=n(0);t.a=function(e){return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("div",{className:"Attandence_Request_Div",style:{display:e.show?"flex":"none"},children:[Object(a.jsx)("div",{className:"dark",onClick:e.Hide}),Object(a.jsx)("div",{style:{animationDelay:"0.1".toString()+"s"},className:e.show?"Attandence_Request_Div_Content Attandence_Request_Div_Content2":"Attandence_Request_Div_Content",children:e.content})]})})}},89:function(e,t,n){}}]);