(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[47],{158:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}(),a=n(1),c=i(a),l=i(n(12));function i(e){return e&&e.__esModule?e:{default:e}}var o={table:l.default.string.isRequired,filename:l.default.string.isRequired,sheet:l.default.string.isRequired,id:l.default.string,className:l.default.string,buttonText:l.default.string},r=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleDownload=n.handleDownload.bind(n),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),s(t,[{key:"handleDownload",value:function(){if(!document)return null;if(1!==document.getElementById(this.props.table).nodeType||"TABLE"!==document.getElementById(this.props.table).nodeName)return null;var e=document.getElementById(this.props.table).outerHTML,n=String(this.props.sheet),s=String(this.props.filename)+".xls",a={worksheet:n||"Worksheet",table:e};if(window.navigator.msSaveOrOpenBlob){var c=new Blob(['<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40"><head><meta charset="UTF-8">\x3c!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>{worksheet}</x:Name><x:WorksheetOptions><x:DisplayGridlines/></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--\x3e</head><body>'+e+"</body></html>"]);return document.getElementById("react-html-table-to-excel").click()((function(){window.navigator.msSaveOrOpenBlob(c,s)})),!0}var l=window.document.createElement("a");return l.href="data:application/vnd.ms-excel;base64,"+t.base64(t.format('<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40"><head><meta charset="UTF-8">\x3c!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>{worksheet}</x:Name><x:WorksheetOptions><x:DisplayGridlines/></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--\x3e</head><body>{table}</body></html>',a)),l.download=s,document.body.appendChild(l),l.click(),document.body.removeChild(l),!0}},{key:"render",value:function(){return c.default.createElement("button",{id:this.props.id,className:this.props.className,type:"button",onClick:this.handleDownload},this.props.buttonText)}}],[{key:"base64",value:function(e){return window.btoa(unescape(encodeURIComponent(e)))}},{key:"format",value:function(e,t){return e.replace(/{(\w+)}/g,(function(e,n){return t[n]}))}}]),t}(a.Component);r.propTypes=o,r.defaultProps={id:"button-download-as-xls",className:"button-download",buttonText:"Download"},t.default=r},527:function(e,t,n){"use strict";n.r(t);var s=n(24),a=n(9),c=n(4),l=n(1),i=n.n(l),o=(n(528),n(11)),r=n(25),d=n(80),m=n.n(d),b=n(158),j=n.n(b),h=n(83),u=(n(82),n(0));t.default=function(){var e=Object(r.c)((function(e){return e.EmpAuth.EmployeeData})),t=i.a.createRef(),n=(Object(r.c)((function(e){return e.EmpAuth.EmployeeData})),Object(l.useState)("")),d=Object(c.a)(n,2),b=(d[0],d[1],Object(l.useState)([])),x=Object(c.a)(b,2),p=x[0],f=x[1],O=Object(l.useState)([]),g=Object(c.a)(O,2),v=g[0],N=(g[1],Object(l.useState)([])),y=Object(c.a)(N,2),_=y[0],k=y[1],w=Object(l.useState)(!1),E=Object(c.a)(w,2),D=E[0],C=E[1],B=Object(l.useState)({time_in:"",time_out:"",break_in:"",break_out:""}),W=Object(c.a)(B,2),S=W[0],T=W[1],I=Object(l.useState)({thumbs:[],attendance:[],logs:[]}),F=Object(c.a)(I,2),R=F[0],A=F[1],H=Object(l.useState)(""),P=Object(c.a)(H,2),L=P[0],U=P[1],q=Object(l.useState)(""),M=Object(c.a)(q,2),G=M[0],J=M[1];Object(l.useEffect)((function(){for(var e=[],t=0;t<v.length;t++)e.includes(v[t].name)||e.push(v[t].name);f(e)}),[v.length]),Object(l.useEffect)((function(){o.a.post("/getemployeecompaniesauth",{emp_id:e.emp_id}).then((function(e){k(e.data),1===e.data.length&&U(e.data[0].company_code)})).catch((function(e){console.log(e)}))}),[]);var z=function(){m()(".list").fadeIn(),m()(".form").fadeOut(0),m()(".ButtonDiv2").hide(),m()(".ButtonDiv1").show(),m()(".togglebutton .HideDiv").css("left","0"),m()(".togglebutton .HideDiv").html("Default")},Q=function(e,t){o.a.post("/getthatdateemployeeslist",{date_time:e,company:t}).then((function(t){f(t.data),J(e)})).catch((function(e){console.log(e)}))},V=function(e){var t=e.target,n=t.name,c=t.value,l=Object(a.a)(Object(a.a)({},S),{},Object(s.a)({},n,c));T(l)};return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(h.a,{}),Object(u.jsxs)("div",{className:"View_Employee_Attendance",children:[Object(u.jsxs)("div",{className:"DivFirst",children:[Object(u.jsx)("div",{children:Object(u.jsx)("h5",{className:" font-weight-bolder",children:"Edit Employees Attendance"})}),Object(u.jsx)("div",{className:"Filters",children:Object(u.jsxs)("div",{className:"d-flex align-items-center",children:[Object(u.jsxs)("div",{className:"w-100 px-1",children:[Object(u.jsx)("label",{className:"mb-0",children:"Company"}),Object(u.jsxs)("select",{className:"form-control bg-light",variant:"standard",style:{width:"100%",fontSize:"12px",fontFamily:"Quicksand"},disabled:1===_.length,onChange:function(e){U(e.target.value),Q(G,e.target.value)},name:"company",children:[Object(u.jsx)("option",{value:"",children:"Select the Option"}),_.map((function(e,t){return Object(u.jsxs)("option",{selected:1===_.length,value:e.company_code,children:[" ",e.company_name," "]},t)}))]})]}),Object(u.jsxs)("div",{className:"w-100 px-1",children:[Object(u.jsx)("label",{className:"mb-0",children:"Date"}),Object(u.jsx)("input",{className:"form-control form-control-sm bg-light",name:"dateFrom",onChange:function(e){var t=e.target.value;Q(t,L)},type:"date",variant:"standard",style:{marginBottom:"10px"},fullWidth:!0})]}),Object(u.jsx)("div",{className:"w-100 px-1"})]})})]}),Object(u.jsx)("div",{children:0===p.length?null:Object(u.jsxs)("div",{className:"DivSecond",children:[Object(u.jsxs)("div",{className:"attendance-content",children:[Object(u.jsx)("h6",{className:"font-weight-bolder",children:"Employees"}),Object(u.jsx)("div",{className:"employees_counts",children:Object(u.jsxs)("p",{children:[p.length+"  Employees"," "]})}),p.map((function(e,t){return Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("div",{className:"Employee_info",onClick:function(){return t=G,n=e.emp_id,s=e.name,void o.a.post("/getemployeefullattendance",{date:t,emp_id:n}).then((function(e){A({name:s,thumbs:e.data[0],attendance:e.data[1],logs:e.data[2]}),T({time_in:e.data[1][0].time_in,time_out:e.data[1][0].time_out,break_in:e.data[1][0].break_in,break_out:e.data[1][0].break_out}),C(!0),z()})).catch((function(e){console.log(e)}));var t,n,s},children:[Object(u.jsxs)("div",{className:"d-flex align-items-center",children:[Object(u.jsx)("img",{src:"images/employees/"+e.emp_image,width:"40",height:"40",alt:"employee img",className:"rounded-circle"}),Object(u.jsxs)("div",{className:"ml-2",children:[Object(u.jsxs)("p",{className:"font-weight-bold",children:[" ",e.name," "]}),Object(u.jsx)("p",{children:e.empdesig})]})]}),"Present"===e.status?Object(u.jsx)("div",{className:"statusbage",style:{backgroundColor:"#5C6E9C"},children:Object(u.jsx)("p",{children:e.status})}):"Late"===e.status||"Absent"===e.status?Object(u.jsx)("div",{className:"statusbage blinkstatus",style:{backgroundColor:"#E7604A"},children:Object(u.jsx)("p",{children:e.status})}):"Holiday"===e.status||"leave"===e.status||"leave"===e.status?Object(u.jsx)("div",{className:"statusbage",style:{backgroundColor:"red"},children:Object(u.jsx)("p",{children:e.status})}):null]},t)})}))]}),D?0===R.thumbs.length?Object(u.jsx)("div",{className:"thumb_details",children:Object(u.jsx)("h6",{className:"mb-4 font-weight-bolder",children:"No Thumb Found"})}):Object(u.jsxs)("div",{className:"thumb_details",children:[Object(u.jsxs)("div",{className:"d-flex align-items-center justify-content-between w-100 mb-4",children:[Object(u.jsxs)("h6",{className:"font-weight-bolder mb-0",children:[R.name," Thumbs"]}),Object(u.jsx)(j.a,{id:"test-table-xls-button",className:"btn btn-sm submit",table:"table-to-xls",filename:R.name+"_thumbs",sheet:[R.name+" Thumbs"],buttonText:"export"})]}),Object(u.jsxs)("table",{className:"table table-sm mb-0",id:"table-to-xls",ref:t,children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{className:"d-none",children:"Employee ID"}),Object(u.jsx)("th",{className:"d-none",children:"Employee Name"}),Object(u.jsx)("th",{children:"Locations"}),Object(u.jsx)("th",{children:"Time"}),Object(u.jsx)("th",{children:"Date"})]})}),Object(u.jsx)("tbody",{children:R.thumbs.map((function(e){return Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{className:"d-none",children:e.emp_id}),Object(u.jsx)("td",{className:"d-none",children:R.name}),Object(u.jsx)("td",{children:e.location_name}),Object(u.jsx)("td",{children:e.time}),Object(u.jsx)("td",{children:new Date(e.date).toDateString()})]})}))}),Object(u.jsx)("tfoot",{className:"d-none",children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{children:"Remarks"}),Object(u.jsx)("td",{colSpan:5,children:0===R.logs.length?Object(u.jsx)("p",{className:"mb-0 text-center",children:" No Remarks "}):R.logs.map((function(e){return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("span",{children:e.log}),Object(u.jsx)("br",{})]})}))})]})})]})]}):null,0===R.attendance.length?null:Object(u.jsxs)("div",{className:"daily_att_details",children:[Object(u.jsxs)("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[Object(u.jsx)("h6",{className:"font-weight-bolder",children:"Employee Attendance Details"}),Object(u.jsxs)("div",{className:"togglebutton",children:[Object(u.jsx)("div",{className:"ClickDiv1",onClick:z,children:Object(u.jsx)("p",{className:"mb-0",children:"Default"})}),Object(u.jsx)("div",{className:"ClickDiv2",onClick:function(){m()(".form").fadeIn(),m()(".list").fadeOut(0),m()(".ButtonDiv2").hide(),m()(".ButtonDiv1").show(),m()(".togglebutton .HideDiv").css("left","50%"),m()(".togglebutton .HideDiv").html("Eddit")},children:Object(u.jsx)("p",{className:"mb-0",children:"Edit"})}),Object(u.jsx)("div",{className:"HideDiv",children:Object(u.jsx)("p",{className:"mb-0",children:"Default"})})]})]}),Object(u.jsx)("div",{className:"list",children:Object(u.jsxs)("table",{className:"table table-sm mb-0",id:"table-to-xls",ref:t,children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{children:"Time In"}),Object(u.jsx)("th",{children:"Time Out"}),Object(u.jsx)("th",{children:"Break In"}),Object(u.jsx)("th",{children:"Break Out"})]})}),Object(u.jsx)("tbody",{children:R.attendance.map((function(e,t){return Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{children:e.time_in}),Object(u.jsx)("td",{children:e.time_out}),Object(u.jsx)("td",{children:e.break_in}),Object(u.jsx)("td",{children:e.break_out})]})}))})]})}),Object(u.jsx)("div",{children:Object(u.jsxs)("form",{className:"form",onSubmit:function(t){t.preventDefault();var n=new FormData;n.append("emp_id",R.attendance[0].emp_id),n.append("record_id",R.attendance[0].id),n.append("time_in",S.time_in),n.append("time_out",S.time_out),n.append("break_in",S.break_in),n.append("break_out",S.break_out),n.append("previous_time_in",R.attendance[0].time_in),n.append("previous_time_out",R.attendance[0].time_out),n.append("previous_break_in",R.attendance[0].break_in),n.append("previous_break_out",R.attendance[0].break_out),n.append("edit_by",e.emp_id),n.append("edit_by_name",e.name),o.a.post("/updateemployeeattendance",n).then((function(){alert("SUCCESS"),T({time_in:"",time_out:"",break_in:"",break_out:""}),A({thumbs:[],attendance:[],logs:[]})})).catch((function(e){console.log(e)}))},children:[Object(u.jsxs)("div",{className:"d-flex w-100 mb-3",children:[Object(u.jsxs)("div",{className:"w-100 px-1",children:[Object(u.jsx)("label",{className:"mb-0",children:"Current Time In"}),Object(u.jsx)("input",{className:"form-control form-control-sm bg-light",type:"text",name:"",disabled:!0,value:S.time_in,style:{marginBottom:"10px"},fullWidth:!0})]}),Object(u.jsxs)("div",{className:"w-100 px-1",children:[Object(u.jsx)("label",{className:"mb-0",children:"New Time In"}),Object(u.jsx)("input",{className:"form-control form-control-sm bg-light",type:"time",onChange:V,name:"time_in",style:{marginBottom:"10px"},fullWidth:!0})]})]}),Object(u.jsxs)("div",{className:"d-flex w-100 mb-3",children:[Object(u.jsxs)("div",{className:"w-100 px-1",children:[Object(u.jsx)("label",{className:"mb-0",children:"Current Time Out"}),Object(u.jsx)("input",{className:"form-control form-control-sm bg-light",type:"text",name:"",disabled:!0,value:S.time_out,style:{marginBottom:"10px"},fullWidth:!0})]}),Object(u.jsxs)("div",{className:"w-100 px-1",children:[Object(u.jsx)("label",{className:"mb-0",children:"New Time Out"}),Object(u.jsx)("input",{className:"form-control form-control-sm bg-light",type:"time",onChange:V,name:"time_out",style:{marginBottom:"10px"},fullWidth:!0})]})]}),Object(u.jsxs)("div",{className:"d-flex w-100 mb-3",children:[Object(u.jsxs)("div",{className:"w-100 px-1",children:[Object(u.jsx)("label",{className:"mb-0",children:"Current Break In"}),Object(u.jsx)("input",{className:"form-control form-control-sm bg-light",type:"text",name:"",disabled:!0,value:S.break_in,style:{marginBottom:"10px"},fullWidth:!0})]}),Object(u.jsxs)("div",{className:"w-100 px-1",children:[Object(u.jsx)("label",{className:"mb-0",children:"New Break In"}),Object(u.jsx)("input",{className:"form-control form-control-sm bg-light",type:"time",onChange:V,name:"break_in",style:{marginBottom:"10px"},fullWidth:!0})]})]}),Object(u.jsxs)("div",{className:"d-flex w-100 mb-3",children:[Object(u.jsxs)("div",{className:"w-100 px-1",children:[Object(u.jsx)("label",{className:"mb-0",children:"Current Break Out"}),Object(u.jsx)("input",{className:"form-control form-control-sm bg-light",type:"text",name:"",disabled:!0,value:S.break_out,style:{marginBottom:"10px"},fullWidth:!0})]}),Object(u.jsxs)("div",{className:"w-100 px-1",children:[Object(u.jsx)("label",{className:"mb-0",children:"New Break Out"}),Object(u.jsx)("input",{className:"form-control form-control-sm bg-light",type:"time",onChange:V,name:"break_out",style:{marginBottom:"10px"},fullWidth:!0})]})]}),Object(u.jsx)("div",{className:"d-flex align-items-center justify-content-end",children:Object(u.jsx)("button",{type:"submit",children:"Update"})})]})}),Object(u.jsxs)("div",{className:"my-2",children:[Object(u.jsx)("h6",{children:" Logs "}),Object(u.jsx)("div",{className:"my-3 logContainer",children:0===R.logs.length?Object(u.jsx)("p",{className:"mb-0 text-center",children:" No Log Found "}):R.logs.map((function(e){return Object(u.jsxs)("div",{className:"log",children:[Object(u.jsx)("span",{style:{textAlign:"justify"},children:e.log}),Object(u.jsxs)("span",{className:"d-block text-right",children:[new Date(e.log_date).toDateString()," at ",e.log_time]})]},e.log_id)}))})]})]})]})})]})]})}},528:function(e,t,n){}}]);