(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[43],{555:function(e,t,s){"use strict";s.r(t);var n=s(24),c=s(9),a=s(4),i=s(1),l=(s(556),s(3)),r=s(17),o=s(25),d=s(11),m=s(98),j=s(132),b=s(88),u=(s(79),s(0));t.default=function(){var e=Object(l.g)(),t=Object(o.c)((function(e){return e.EmpAuth.Relations})),s=Object(o.c)((function(e){return e.EmpAuth.EmployeeData})),h=Object(i.useState)(""),x=Object(a.a)(h,2),O=x[0],p=x[1],f=Object(i.useState)(!0),v=Object(a.a)(f,2),g=v[0],N=v[1],_=Object(i.useState)(!0),q=Object(a.a)(_,2),y=q[0],w=q[1],S=Object(i.useState)(!1),D=Object(a.a)(S,2),I=D[0],C=D[1],k=Object(i.useState)(!1),R=Object(a.a)(k,2),F=R[0],A=R[1],L=Object(i.useState)(),E=Object(a.a)(L,2),J=E[0],T=E[1],B=Object(i.useState)(),Q=Object(a.a)(B,2),Y=Q[0],G=Q[1],H=Object(i.useState)(""),P=Object(a.a)(H,2),W=P[0],z=P[1],M=Object(i.useState)([]),K=Object(a.a)(M,2),U=K[0],V=K[1],X=Object(i.useState)([]),Z=Object(a.a)(X,2),$=Z[0],ee=Z[1],te=Object(i.useState)([]),se=Object(a.a)(te,2),ne=se[0],ce=se[1],ae=Object(i.useState)([]),ie=Object(a.a)(ae,2),le=ie[0],re=ie[1],oe=Object(i.useState)([]),de=Object(a.a)(oe,2),me=(de[0],de[1]),je=Object(i.useState)([]),be=Object(a.a)(je,2),ue=be[0],he=be[1],xe=Object(i.useState)([]),Oe=Object(a.a)(xe,2),pe=Oe[0],fe=Oe[1],ve=Object(i.useState)({details:null,specifications:[],logs:[],specificationsStatus:[]}),ge=Object(a.a)(ve,2),Ne=ge[0],_e=ge[1],qe=Object(i.useState)({company_code:"",location_code:"",request_to:"",request_by:s.emp_id,request_date:new Date,request_action:""}),ye=Object(a.a)(qe,2),we=ye[0],Se=ye[1],De=Object(i.useState)({name:"",required_quantity:"",reason:""}),Ie=Object(a.a)(De,2),Ce=Ie[0],ke=Ie[1];Object(i.useEffect)((function(){0===le.length||""===we.company_code||""===we.location_code?N(!0):N(!1)}),[le.length,we.company_code,we.location_code]),Object(i.useEffect)((function(){Ce.item_id&&(""!==Ce.name&&""!==Ce.required_quantity&&""!==Ce.reason||Ce.reason.length>20)?w(!1):w(!0),"edit"===window.location.href.split("/")[5]&&""!==Ce.name&&""!==Ce.required_quantity&&""!==Ce.reason&&We()}),[Ce.name,Ce.required_quantity,Ce.reason]),Object(i.useEffect)((function(){Ee(),m.a.on("somethingchangeinitemrequest",(function(e){Ee(),e&&Fe(e)})),m.a.on("newitemrequestcomment",(function(e){parseInt(e)===parseInt(window.location.href.split("/").pop().split("=").pop())&&Re(window.location.href.split("/").pop().split("=").pop())}))}),[]),Object(i.useEffect)((function(){"new"!==window.location.href.split("/").pop()&&"generatepr"!==window.location.href.split("/")[5]||Ae(),window.location.href.split("/").pop().includes("index")&&(Fe(window.location.href.split("/").pop().split("=").pop()),Re(window.location.href.split("/").pop().split("=").pop())),z(window.location.href.split("/").pop())}),[window.location.href.split("/").pop()]),setTimeout((function(){j.a.rebuild()}),1e3);var Re=function(e){d.a.post("/getitemrequestcomments",{id:e}).then((function(e){me(e.data),setTimeout((function(){var e=document.getElementById("comments_content");e&&(e.scrollTop=e.scrollHeight)}),500)})).catch((function(e){console.log(e)}))},Fe=function(e){d.a.post("/getitemrequestdetails",{id:e}).then((function(e){re(e.data[1]),_e({details:e.data[0][0],specifications:e.data[1],logs:e.data[2],specificationsStatus:e.data[3]}),Le(e.data[0][0].company_code),Te(e.data[0][0].company_code),setTimeout((function(){Se(Object(c.a)(Object(c.a)({},we),{},{company_code:e.data[0][0].company_code,location_code:e.data[0][0].location_code}))}),1e3)})).catch((function(e){console.log(e)}))},Ae=function(){d.a.get("/getallcompanies").then((function(e){ce(e.data)})).catch((function(e){console.log(e)}))},Le=function(e){d.a.post("/getcompanylocations",{company_code:e}).then((function(e){ee(e.data)})).catch((function(e){console.log(e)}))},Ee=function(){d.a.post("/getallitemrequests",{emp_id:sessionStorage.getItem("EmpID"),access:s.access}).then((function(e){V(e.data)})).catch((function(e){console.log(e)}))},Je=function(e){var t=e.target,s=t.name,a=t.value,i=Object(c.a)(Object(c.a)({},we),{},Object(n.a)({},s,a)),l=pe;if(Se(i),"company_code"===s&&(Le(a),"generatepr"===window.location.href.split("/")[5]&&Te(a),e.target.attributes.log)){for(var r,o=0;o<l.length;o++)l[o].includes("Request company")&&(r=!0);r||l.push("Request company ("+Ne.details.company_name+") has changed")}if("location_code"===s&&e.target.attributes.log){for(var d,m=0;m<l.length;m++)l[m].includes("Request location")&&(d=!0);d||l.push("Request location ("+Ne.details.location_name+") has changed")}e.target.attributes.log&&fe(l)},Te=function(e){var t="",s="",n="",c=new Date;n=c.getMonth()>6?c.getFullYear().toString().substring(2,4)+"/"+(c.getFullYear()+1).toString().substring(2,4):(c.getFullYear()-1).toString().substring(2,4)+"/"+c.getFullYear().toString().substring(2,4),d.a.post("/getshortcompanyname",{company_code:e}).then((function(c){c.data.length>0&&(t=c.data[0].code),d.a.post("/getprcode",{company_code:e}).then((function(e){if(e.data.length>0){var c=(parseInt(e.data[0].pr_code.split("-")[1])+1).toString();1===c.length&&(c="0"+c),s=c}else s="01";p(t+"-"+s+"-"+n)})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))},Be=function(t){N(!0),d.a.post(t,{request:JSON.stringify(we),specifications:JSON.stringify(le),pr_code:O,itemRequest:JSON.stringify(Ne.details),logs:JSON.stringify(pe),itemsDetails:JSON.stringify(Ne.specificationsStatus)}).then((function(){m.a.emit("somethingchangeinitemrequest");var s=sessionStorage.getItem("name")+" has sent your a new item request for approval";"/generatepronitemrequest"===t&&(s=sessionStorage.getItem("name")+" proceed your item request to purchase requisition");var n=new FormData;n.append("eventID",3),n.append("receiverID",we.request_to),n.append("senderID",sessionStorage.getItem("EmpID")),n.append("Title",sessionStorage.getItem("name")),n.append("NotificationBody",s),d.a.post("/newnotification",n).then((function(){d.a.post("/sendmail",n).then((function(){}))})),e.replace("/item_requests")})).catch((function(e){N(!1),console.log(e)}))},Qe=function(e){var t,s=e.target,a=s.name,i=s.value,l=Object(c.a)(Object(c.a)({},Ce),{},Object(n.a)({},a,i));ke(l),"name"===a&&(""!==(t=i)?d.a.post("/getmatchedstoreitems",{key:t}).then((function(e){he(e.data)})).catch((function(e){console.log(e)})):he([]))},Ye=function(e){var t=le;if("generatepr"===window.location.href.split("/")[5]){if(e){var s=pe;I?(parseInt(t[Y].required_quantity)!==parseInt(Ce.required_quantity)&&s.push(Ce.name+"'s required quantity has edited"),t[Y].reason!==Ce.reason&&s.push(Ce.name+"'s reason has edited"),t[Y].name!==Ce.name&&s.push(t[Y].name+" has changed to a new item "+Ce.name)):s.push("New item "+Ce.name+" has added"),fe(s)}I?(t[Y]={id:Ce.id,item_id:Ce.item_id,name:Ce.name,required_quantity:Ce.required_quantity,reason:Ce.reason,edited:!0},C(!1),G()):t.push({id:Ce.id,item_id:Ce.item_id,name:Ce.name,required_quantity:Ce.required_quantity,reason:Ce.reason,new_added:!0})}else I?(t[Y]={id:Ce.id,item_id:Ce.item_id,name:Ce.name,required_quantity:Ce.required_quantity,reason:Ce.reason},C(!1),G()):t.push({id:Ce.id,item_id:Ce.item_id,name:Ce.name,required_quantity:Ce.required_quantity,reason:Ce.reason});re(t),ke({name:"",required_quantity:"",reason:""})},Ge=function(e){var t=Object(c.a)(Object(c.a)({},Ce),{},{item_id:ue[e].id,name:ue[e].name});ke(t),he([])},He=function(e){var t=le.filter((function(t,s){return s!==e}));re(t)},Pe=function(e){var t=le[e];ke({id:t.id,item_id:t.item_id,name:t.name,required_quantity:t.required_quantity,reason:t.reason}),C(!0),G(e)},We=function(){var e=Object(u.jsxs)("form",{className:"w-100",onSubmit:function(e){return alert("A")},children:[Object(u.jsx)("small",{children:"Item Name"}),Object(u.jsxs)("div",{className:"itemNameContainer",children:[Object(u.jsx)("input",{onChange:Qe,value:Ce.name,name:"name",className:"form-control form-control-sm",required:!0}),Object(u.jsx)("div",{className:"list",children:ue.map((function(e){return Object(u.jsx)("span",{children:e.name})}))})]}),Object(u.jsx)("small",{children:"Required Quantity"}),Object(u.jsx)("input",{onChange:Qe,value:Ce.required_quantity,name:"required_quantity",className:"form-control form-control-sm",required:!0}),Object(u.jsx)("small",{children:"Reason / Details"}),Object(u.jsx)("input",{onChange:Qe,value:Ce.reason,name:"reason",className:"form-control form-control-sm",required:!0}),Object(u.jsx)("div",{className:"text-right",children:Object(u.jsx)("button",{className:"btn btn-outline-dark btn-sm mt-2",children:"update"})})]});T(e),A(!0)},ze=function(t,n){t.preventDefault(),d.a.post(n,{request_id:Ne.details.id,emp_id:s.emp_id,reason:t.target.remarks?t.target.remarks.value:null}).then((function(){var t,s,c;m.a.emit("somethingchangeinitemrequest",Ne.details.id),"/rejectitemrequest"===n?(t=sessionStorage.getItem("name")+" has reject your item request.",s=Ne.details.request_by,c=sessionStorage.getItem("EmpID")):"/approveitemrequest"===n?(t=sessionStorage.getItem("name")+" has approve your item request.",s=Ne.details.request_by,c=sessionStorage.getItem("EmpID")):"/cancelitemrequest"===n?(t=sessionStorage.getItem("name")+" has cancel his item request.",s=we.request_to,c=we.request_by):"/deliveritemrequest"===n&&(t="Delivery of your required item (s) is in process.",s=Ne.details.request_by,c=sessionStorage.getItem("EmpID"));var a=new FormData;a.append("eventID",3),a.append("receiverID",s),a.append("senderID",c),a.append("Title",sessionStorage.getItem("name")),a.append("NotificationBody",t),d.a.post("/newnotification",a).then((function(){d.a.post("/sendmail",a).then((function(){}))})),e.replace("/item_requests")})).catch((function(e){console.log(e)}))};return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(b.a,{show:F,Hide:function(){A(!F)},content:J}),"generatepr"===window.location.href.split("/")[5]?Object(u.jsxs)("div",{className:"items_container",children:[Object(u.jsxs)("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[Object(u.jsx)("div",{children:Object(u.jsx)("h5",{className:"mb-0 font-weight-bold",children:"Generating Purchase Requisition"})}),Object(u.jsxs)("div",{className:"d-flex",children:[Object(u.jsx)(r.b,{to:"/item_requests/view/index="+window.location.href.split("/").pop().split("=").pop(),className:"btn btn-sm cancle",children:"cancel"}),g?null:Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("select",{className:"form-control form-control-sm mx-2",onChange:Je,name:"request_to",children:[Object(u.jsx)("option",{value:"",children:"Select the option"}),t.map((function(e,t){var s;return("all"===e.category||e.category.includes("item_request"))&&(s=Object(u.jsxs)("option",{value:e.sr,children:[" ",e.name," "]},t)),s}))]}),""!==we.request_to?Object(u.jsx)("button",{className:"btn btn-sm submit",type:"button",onClick:function(){return Be("/generatepronitemrequest")},children:"submit"}):null]})]})]}),Object(u.jsx)("div",{className:"container-fluid px-0",children:Object(u.jsxs)("form",{className:"p-3 rounded",children:[Object(u.jsx)("h6",{className:"mb-3 font-weight-bold",children:"Purchase Requisition Form"}),Object(u.jsxs)("div",{className:"d-flex w-100",children:[Object(u.jsxs)("div",{className:"mr-1 w-50",children:[Object(u.jsx)("label",{className:"mb-0",children:" Company "}),Object(u.jsxs)("select",{className:"form-control form-control-sm mb-2",log:"company_code",onChange:Je,name:"company_code",value:we.company_code,children:[Object(u.jsx)("option",{value:"",children:"Select the option"}),ne.map((function(e){return Object(u.jsxs)("option",{value:e.company_code,children:[" ",e.company_name," "]},e.company_code)}))]})]}),Object(u.jsxs)("div",{className:"ml-1 w-50",children:[Object(u.jsx)("label",{className:"mb-0",children:" PR Number "}),Object(u.jsx)("input",{type:"text",disabled:!0,className:"form-control form-control-sm mb-2",value:O})]})]}),Object(u.jsxs)("div",{className:"d-flex w-100",children:[Object(u.jsxs)("div",{className:"mr-1 w-50",children:[Object(u.jsx)("label",{className:"mb-0",children:" Delivery / Work Location "}),Object(u.jsxs)("select",{className:"form-control form-control-sm mb-2",log:"location_code",onChange:Je,name:"location_code",value:we.location_code,children:[Object(u.jsx)("option",{value:"",children:"Select the option"}),$.map((function(e){return Object(u.jsxs)("option",{value:e.location_code,children:[" ",e.location_name," "]},e.location_code)}))]})]}),Object(u.jsxs)("div",{className:"ml-1 w-50",children:[Object(u.jsx)("label",{className:"mb-0",children:" Date "}),Object(u.jsx)("input",{type:"text",disabled:!0,className:"form-control form-control-sm mb-2",value:(new Date).toDateString()})]})]}),Object(u.jsxs)("table",{className:"table table-sm mt-4",children:[Object(u.jsxs)("tr",{className:"bg-light",children:[Object(u.jsx)("th",{children:"Sr No."}),Object(u.jsx)("th",{children:"Item"}),Object(u.jsx)("th",{children:"Quantity"}),Object(u.jsx)("th",{children:"Reason / Details"}),Object(u.jsx)("th",{children:"Availability"})]}),le.map((function(e,t){return Object(u.jsx)(u.Fragment,{children:I&&parseInt(Y)===parseInt(t)?Object(u.jsxs)("tr",{children:[Object(u.jsxs)("td",{children:[" ",Y+1," "]}),Object(u.jsx)("td",{children:"  "}),Object(u.jsxs)("td",{className:"ItemColumn",children:[Object(u.jsx)("input",{onChange:Qe,value:Ce.name,attr:"pr",name:"name",className:"entities form-control form-control-sm"}),ue.length>0?Object(u.jsx)("div",{className:"StoreItemsList",children:ue.map((function(e,t){return Object(u.jsx)("p",{className:"StoreItemsListItem",onClick:function(){return Ge(t)},children:e.name},t)}))}):null]}),Object(u.jsx)("td",{children:Object(u.jsx)("input",{onChange:Qe,value:Ce.required_quantity,attr:"pr",name:"required_quantity",type:"number",className:"entities form-control form-control-sm"})}),Object(u.jsx)("td",{colSpan:2,children:Object(u.jsx)("input",{onChange:Qe,value:Ce.reason,attr:"pr",name:"reason",type:"text",className:"entities form-control form-control-sm"})})]}):Ne.specificationsStatus.length>0?Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{children:t+1}),Object(u.jsxs)("td",{className:"underline",children:[e.name,Ne.specificationsStatus[t]?Object(u.jsxs)("div",{className:"items_specifications details",children:[Object(u.jsx)("b",{children:"Availble Quantity: "}),Object(u.jsxs)("span",{children:[" ",Ne.specificationsStatus[t].availble_quantity," "]}),Object(u.jsx)("br",{}),Object(u.jsx)("b",{children:"Status: "}),Object(u.jsxs)("span",{children:[" ",Ne.specificationsStatus[t].status," "]})]}):null]}),Object(u.jsx)("td",{children:e.required_quantity}),Object(u.jsxs)("td",{className:"icons",children:[e.reason,Object(u.jsxs)("span",{children:[Object(u.jsx)("i",{onClick:function(){return Pe(t)},className:"lar la-edit"}),Object(u.jsx)("i",{onClick:function(){return He(t)},className:"lar la-trash-alt"})]})]}),Object(u.jsx)("td",{children:Ne.specificationsStatus[t]?parseInt(e.required_quantity)>parseInt(Ne.specificationsStatus[t].availble_quantity)?"Not Availble":"Availble":null})]}):null})})),I?null:Object(u.jsxs)("tr",{children:[Object(u.jsxs)("td",{children:[" ",le.length+1," "]}),Object(u.jsx)("td",{children:"  "}),Object(u.jsxs)("td",{className:"ItemColumn",children:[Object(u.jsx)("input",{onChange:Qe,value:Ce.name,name:"name",className:"entities form-control form-control-sm"}),ue.length>0?Object(u.jsx)("div",{className:"StoreItemsList",children:ue.map((function(e,t){return Object(u.jsx)("p",{className:"StoreItemsListItem",onClick:function(){return Ge(t)},children:e.name},t)}))}):null]}),Object(u.jsx)("td",{children:Object(u.jsx)("input",{onChange:Qe,value:Ce.required_quantity,name:"required_quantity",type:"number",className:"entities form-control form-control-sm"})}),Object(u.jsx)("td",{colSpan:2,children:Object(u.jsx)("input",{onChange:Qe,value:Ce.reason,name:"reason",type:"text",className:"entities form-control form-control-sm"})})]})]}),Object(u.jsx)("div",{className:"text-right",children:Object(u.jsx)("button",{className:"btn btn-sm cancle",onClick:function(){return Ye("log")},type:"button",disabled:y,children:I?"update item":"add item"})})]})})]}):"new"===W?Object(u.jsxs)("div",{className:"items_container",children:[Object(u.jsxs)("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[Object(u.jsx)("div",{children:Object(u.jsx)("h5",{className:"mb-0 font-weight-bold",children:"Send New Item Request"})}),Object(u.jsxs)("div",{className:"d-flex",children:[Object(u.jsx)(r.b,{to:"/item_requests",className:"btn btn-sm cancle",children:"cancel"}),g?null:Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("select",{className:"form-control form-control-sm mx-2",onChange:Je,name:"request_to",children:[Object(u.jsx)("option",{value:"",children:"Select the option"}),t.map((function(e,t){var s;return("all"===e.category||e.category.includes("item_request"))&&(s=Object(u.jsxs)("option",{value:e.sr,children:[" ",e.name," "]},t)),s}))]}),""!==we.request_to?Object(u.jsx)("button",{className:"btn btn-sm submit",type:"button",onClick:function(){return Be("/newitemrequest")},children:"submit"}):null]})]})]}),Object(u.jsx)("div",{className:"container-fluid px-0",children:Object(u.jsxs)("form",{className:"p-3 rounded",children:[Object(u.jsx)("h6",{className:"mb-3 font-weight-bold",children:"Item Request Form"}),Object(u.jsxs)("div",{className:"d-flex w-100",children:[Object(u.jsxs)("div",{className:"mr-1 w-50",children:[Object(u.jsx)("label",{className:"mb-0",children:" Company "}),Object(u.jsxs)("select",{className:"form-control form-control-sm mb-2",onChange:Je,name:"company_code",value:we.company_code,children:[Object(u.jsx)("option",{value:"",children:"Select the option"}),ne.map((function(e){return Object(u.jsxs)("option",{value:e.company_code,children:[" ",e.company_name," "]},e.company_code)}))]})]}),Object(u.jsxs)("div",{className:"ml-1 w-50",children:[Object(u.jsx)("label",{className:"mb-0",children:" Date "}),Object(u.jsx)("input",{type:"text",disabled:!0,className:"form-control form-control-sm mb-2",value:(new Date).toDateString()})]})]}),Object(u.jsxs)("div",{className:"d-flex w-100",children:[Object(u.jsxs)("div",{className:"mr-1 w-50",children:[Object(u.jsx)("label",{className:"mb-0",children:" Delivery / Work Location "}),Object(u.jsxs)("select",{className:"form-control form-control-sm mb-2",onChange:Je,name:"location_code",value:we.location_code,children:[Object(u.jsx)("option",{value:"",children:"Select the option"}),$.map((function(e){return Object(u.jsxs)("option",{value:e.location_code,children:[" ",e.location_name," "]},e.location_code)}))]})]}),Object(u.jsx)("div",{className:"ml-1 w-50"})]}),Object(u.jsxs)("table",{className:"table table-sm mt-4",children:[Object(u.jsxs)("tr",{className:"bg-light",children:[Object(u.jsx)("th",{children:"Sr No."}),Object(u.jsx)("th",{children:"Item"}),Object(u.jsx)("th",{children:"Quantity"}),Object(u.jsx)("th",{children:"Reason / Details"})]}),le.map((function(e,t){return Object(u.jsx)(u.Fragment,{children:I&&parseInt(Y)===parseInt(t)?Object(u.jsxs)("tr",{children:[Object(u.jsxs)("td",{children:[" ",Y+1," "]}),Object(u.jsxs)("td",{className:"ItemColumn",children:[Object(u.jsx)("input",{onChange:Qe,value:Ce.name,name:"name",className:"entities form-control form-control-sm"}),ue.length>0?Object(u.jsx)("div",{className:"StoreItemsList",children:ue.map((function(e,t){return Object(u.jsx)("p",{className:"StoreItemsListItem",onClick:function(){return Ge(t)},children:e.name},t)}))}):null]}),Object(u.jsx)("td",{children:Object(u.jsx)("input",{onChange:Qe,value:Ce.required_quantity,name:"required_quantity",type:"number",className:"entities form-control form-control-sm"})}),Object(u.jsx)("td",{children:Object(u.jsx)("input",{onChange:Qe,value:Ce.reason,name:"reason",type:"text",className:"entities form-control form-control-sm"})})]}):Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{children:t+1}),Object(u.jsx)("td",{children:e.name}),Object(u.jsx)("td",{children:e.required_quantity}),Object(u.jsxs)("td",{className:"icons",children:[e.reason,Object(u.jsxs)("span",{children:[Object(u.jsx)("i",{onClick:function(){return Pe(t)},className:"lar la-edit"}),Object(u.jsx)("i",{onClick:function(){return He(t)},className:"lar la-trash-alt"})]})]})]})})})),I?null:Object(u.jsxs)("tr",{children:[Object(u.jsxs)("td",{children:[" ",le.length+1," "]}),Object(u.jsxs)("td",{className:"ItemColumn",children:[Object(u.jsx)("input",{onChange:Qe,value:Ce.name,name:"name",className:"entities form-control form-control-sm"}),ue.length>0?Object(u.jsx)("div",{className:"StoreItemsList",children:ue.map((function(e,t){return Object(u.jsx)("p",{className:"StoreItemsListItem",onClick:function(){return Ge(t)},children:e.name},t)}))}):null]}),Object(u.jsx)("td",{children:Object(u.jsx)("input",{onChange:Qe,value:Ce.required_quantity,name:"required_quantity",type:"number",className:"entities form-control form-control-sm"})}),Object(u.jsx)("td",{children:Object(u.jsx)("input",{onChange:Qe,value:Ce.reason,name:"reason",type:"text",className:"entities form-control form-control-sm"})})]})]}),Object(u.jsx)("div",{className:"text-right",children:Object(u.jsx)("button",{className:"btn btn-sm cancle",onClick:Ye,type:"button",disabled:y,children:I?"update item":"add item"})})]})})]}):W.includes("index")?Object(u.jsxs)("div",{className:"items_container",children:[Object(u.jsxs)("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[Object(u.jsx)("div",{children:Object(u.jsx)("h5",{className:"mb-0 font-weight-bold",children:"Request Details"})}),Object(u.jsxs)("div",{className:"d-flex",children:[null!==Ne.details?Object(u.jsxs)("select",{name:"request_action",id:"",className:"form-control mr-2 form-control-sm request_action",onChange:Je,children:[Object(u.jsx)("option",{value:"",children:"select"}),"sent"===Ne.details.status&&Ne.details.request_by===s.emp_id?Object(u.jsx)("option",{value:"cancel",children:"cancel"}):null,"delivery is in process"===Ne.details.status&&Ne.details.request_by===s.emp_id?Object(u.jsx)("option",{value:"delivered",children:"received"}):null,"sent"===Ne.details.status&&Ne.details.request_by!==s.emp_id?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("option",{value:"approve",children:"approve"}),Object(u.jsx)("option",{value:"reject",children:"reject"})]}):null,"approved"===Ne.details.status&&Ne.details.request_by!==s.emp_id&&(JSON.parse(s.access).includes(529)||JSON.parse(s.access).includes(1))?Object(u.jsx)(u.Fragment,{children:Object(u.jsx)("option",{value:"generatepr",children:"generate purchase requisition"})}):null,Ne.details.request_by!==s.emp_id&&(JSON.parse(s.access).includes(529)||JSON.parse(s.access).includes(1))&&("approved"===Ne.details.status||"proceed to purchase requisition"===Ne.details.status)?Object(u.jsx)(u.Fragment,{children:Object(u.jsx)("option",{value:"deliver",children:"deliver"})}):null]}):null,""===we.request_action?null:Object(u.jsx)("button",{onClick:function(){var t;"cancel"===we.request_action?t=Object(u.jsxs)("form",{className:"w-100",onSubmit:function(e){return ze(e,"/cancelitemrequest")},children:[Object(u.jsx)("p",{children:"Do you want to cancel the request?"}),Object(u.jsx)("textarea",{className:"form-control form-control-sm",required:!0,minLength:10,placeholder:"Give Reason",name:"remarks"}),Object(u.jsx)("div",{className:"text-right",children:Object(u.jsx)("button",{className:"btn btn-outline-dark btn-sm mt-2",children:"Confirm"})})]}):"approve"===we.request_action?t=Object(u.jsxs)("form",{className:"w-100",onSubmit:function(e){return ze(e,"/approveitemrequest")},children:[Object(u.jsx)("p",{children:"Do you want to approve the request?"}),Object(u.jsx)("textarea",{className:"form-control form-control-sm",required:!0,minLength:10,placeholder:"Give Remarks",name:"remarks"}),Object(u.jsx)("div",{className:"text-right",children:Object(u.jsx)("button",{className:"btn btn-outline-dark btn-sm mt-2",children:"Confirm"})})]}):"reject"===we.request_action?t=Object(u.jsxs)("form",{className:"w-100",onSubmit:function(e){return ze(e,"/rejectitemrequest")},children:[Object(u.jsx)("p",{children:"Do you want to reject the request?"}),Object(u.jsx)("textarea",{className:"form-control form-control-sm",required:!0,minLength:10,placeholder:"Give Reason",name:"remarks"}),Object(u.jsx)("div",{className:"text-right",children:Object(u.jsx)("button",{className:"btn btn-outline-dark btn-sm mt-2",children:"Confirm"})})]}):"generatepr"===we.request_action?t=Object(u.jsxs)("form",{className:"w-100",onSubmit:function(){return e.replace("/item_requests/generatepr/index="+Ne.details.id)},children:[Object(u.jsx)("p",{children:"Do you want to generate purchase requisition of the request?"}),Object(u.jsx)("div",{className:"text-right",children:Object(u.jsx)("button",{className:"btn btn-outline-dark btn-sm mt-2",children:"Confirm"})})]}):"deliver"===we.request_action?t=Object(u.jsxs)("form",{className:"w-100",onSubmit:function(e){return ze(e,"/deliveritemrequest")},children:[Object(u.jsx)("p",{children:"Are you going to deliver the items of this request?"}),Object(u.jsx)("div",{className:"text-right",children:Object(u.jsx)("button",{className:"btn btn-outline-dark btn-sm mt-2",children:"Confirm"})})]}):"delivered"===we.request_action&&(t=Object(u.jsxs)("form",{className:"w-100",onSubmit:function(e){return ze(e,"/delivereditemrequest")},children:[Object(u.jsx)("p",{children:"Did you receive your required items?"}),Object(u.jsx)("div",{className:"text-right",children:Object(u.jsx)("button",{className:"btn btn-outline-dark btn-sm mt-2",children:"Confirm"})})]})),T(t),A(!0)},className:"btn btn-sm submit mr-2",children:"next"}),Object(u.jsx)(r.b,{to:"/item_requests",className:"btn btn-sm newBtn",children:"close"})]})]}),null!==Ne.details?Object(u.jsx)("div",{className:"container-fluid px-0",children:Object(u.jsxs)("form",{children:[Object(u.jsx)("h5",{className:"mb-4 font-weight-bold text-center",children:"Item Request"}),Object(u.jsxs)("div",{className:"d-flex w-100",children:[Object(u.jsxs)("div",{className:"w-50 pr-1",children:[Object(u.jsxs)("div",{className:"d-flex align-items-center",children:[Object(u.jsx)("p",{className:"mb-0 w-50 font-weight-bold",children:"Requested By: "}),Object(u.jsx)("p",{className:"mb-0",children:Ne.details.sender_name})]}),Object(u.jsxs)("div",{className:"d-flex align-items-center",children:[Object(u.jsx)("p",{className:"mb-0 w-50 font-weight-bold",children:"Company: "}),Object(u.jsx)("p",{className:"mb-0",children:Ne.details.company_name})]}),Object(u.jsxs)("div",{className:"d-flex align-items-center",children:[Object(u.jsx)("p",{className:"mb-0 w-50 font-weight-bold",children:"Delivery / Work Location: "}),Object(u.jsx)("p",{className:"mb-0",children:Ne.details.location_name})]}),Object(u.jsxs)("div",{className:"d-flex align-items-center",children:[Object(u.jsx)("p",{className:"mb-0 w-50 font-weight-bold",children:"Request Date: "}),Object(u.jsx)("p",{className:"mb-0",children:new Date(Ne.details.request_date).toDateString()})]})]}),Object(u.jsxs)("div",{className:"w-50 pl-1",children:[Object(u.jsxs)("div",{className:"d-flex align-items-center",children:[Object(u.jsx)("p",{className:"mb-0 w-50 font-weight-bold",children:"Received By: "}),Object(u.jsx)("p",{className:"mb-0",children:Ne.details.receiver_name})]}),Object(u.jsxs)("div",{className:"d-flex align-items-center",children:[Object(u.jsxs)("p",{className:"mb-0 w-50 font-weight-bold",style:{textTransform:"capitalize"},children:["canceled"===Ne.details.status?"Cancelation ":"approved"===Ne.details.status?"Approval ":"rejected"===Ne.details.status?"Rejection ":null,"Date:"]}),Object(u.jsx)("p",{className:"mb-0",children:null===Ne.details.acted_date?"Not Approve Yet":new Date(Ne.details.acted_date).toDateString()})]}),Object(u.jsxs)("div",{className:"d-flex align-items-center",children:[Object(u.jsx)("p",{className:"mb-0 w-50 font-weight-bold",children:"Request Status: "}),Object(u.jsx)("p",{className:"mb-0 statusBox",children:Ne.details.status})]})]})]}),Object(u.jsx)("div",{className:"my-3 logContainer",children:Ne.details.request_by===s.emp_id?null:Ne.logs.map((function(e){return Object(u.jsxs)("div",{className:"log",children:[Object(u.jsx)("span",{children:e.log}),Object(u.jsxs)("span",{children:[new Date(e.log_date).toDateString()," at ",e.log_time]})]},e.log_id)}))}),Object(u.jsxs)("table",{className:"table table-sm",children:[Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{children:"Sr No"}),Object(u.jsx)("th",{children:"Item Name"}),Object(u.jsx)("th",{children:"Quantity"}),Object(u.jsx)("th",{children:"Reason / Details"})]}),Ne.specifications.map((function(e,t){return Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{children:t+1}),JSON.parse(s.access).includes(529)||JSON.parse(s.access).includes(1)?Object(u.jsx)("td",{className:"underline",children:e.name}):Object(u.jsx)("td",{children:e.name}),Object(u.jsx)("td",{children:e.required_quantity}),Object(u.jsx)("td",{style:{wordBreak:"break-all"},children:e.reason})]})}))]}),null===Ne.details.acted_date?null:Object(u.jsxs)("div",{className:"border-top pt-3",children:[Object(u.jsx)("h5",{className:"mb-0 font-weight-bold",children:"Review"}),Object(u.jsx)("br",{}),Object(u.jsx)("div",{className:"d-flex",children:Object(u.jsxs)("div",{className:"w-50 d-flex",children:[Object(u.jsx)("div",{className:"w-50 font-weight-bold",children:"From:"}),Object(u.jsx)("div",{className:"w-50",children:Ne.details.sender_name})]})}),Object(u.jsx)("div",{className:"d-flex",children:Object(u.jsxs)("div",{className:"w-50 d-flex",children:[Object(u.jsx)("div",{className:"w-50 font-weight-bold",children:"To:"}),Object(u.jsx)("div",{className:"w-50",children:Ne.details.receiver_name})]})}),Object(u.jsx)("div",{className:"d-flex",children:Object(u.jsxs)("div",{className:"w-50 d-flex",children:[Object(u.jsxs)("div",{className:"w-50 font-weight-bold",children:[Ne.details.receiver_name.split(" ").shift(),"'s Remarks:"]}),Object(u.jsx)("div",{className:"w-50",children:Ne.details.remarks})]})})]}),Object(u.jsx)("br",{}),null===Ne.details.pr_request_generate_date?null:Object(u.jsxs)("div",{className:"border-top pt-3",children:[Object(u.jsx)("h5",{className:"mb-0 font-weight-bold",children:"Requisition"}),Object(u.jsx)("br",{}),Object(u.jsx)("div",{className:"d-flex",children:Object(u.jsxs)("div",{className:"w-50 d-flex",children:[Object(u.jsx)("div",{className:"w-50 font-weight-bold",children:"From:"}),Object(u.jsx)("div",{className:"w-50",children:Ne.details.requisition_name})]})}),Object(u.jsx)("div",{className:"d-flex",children:Object(u.jsxs)("div",{className:"w-50 d-flex",children:[Object(u.jsx)("div",{className:"w-50 font-weight-bold",children:"Requisition Date:"}),Object(u.jsx)("div",{className:"w-50",children:new Date(Ne.details.pr_request_generate_date).toDateString()})]})}),Object(u.jsx)("div",{className:"d-flex",children:Object(u.jsxs)("div",{className:"w-50 d-flex",children:[Object(u.jsx)("div",{className:"w-50 font-weight-bold",children:"Requisition Time:"}),Object(u.jsx)("div",{className:"w-50",children:Ne.details.pr_request_generate_time})]})})]}),Object(u.jsx)("br",{}),null===Ne.details.delivery_date?null:Object(u.jsxs)("div",{className:"border-top pt-3",children:[Object(u.jsx)("h5",{className:"mb-0 font-weight-bold",children:"Delivery"}),Object(u.jsx)("br",{}),Object(u.jsx)("div",{className:"d-flex",children:Object(u.jsxs)("div",{className:"w-50 d-flex",children:[Object(u.jsx)("div",{className:"w-50 font-weight-bold",children:"Delivery Date:"}),Object(u.jsx)("div",{className:"w-50",children:new Date(Ne.details.delivery_date).toDateString()})]})}),Object(u.jsx)("div",{className:"d-flex",children:Object(u.jsxs)("div",{className:"w-50 d-flex",children:[Object(u.jsx)("div",{className:"w-50 font-weight-bold",children:"Delivery Time:"}),Object(u.jsx)("div",{className:"w-50",children:Ne.details.delivery_time})]})})]})]})}):null]}):Object(u.jsxs)("div",{className:"items_container",children:[Object(u.jsxs)("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[Object(u.jsx)("div",{children:Object(u.jsx)("h5",{className:"mb-0 font-weight-bold",children:"Item Requests"})}),Object(u.jsx)("div",{children:Object(u.jsx)(r.b,{to:"/item_requests/new",className:"btn btn-sm newBtn",children:"new"})})]}),Object(u.jsxs)("table",{className:"table table-sm",children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{children:" Request ID "}),Object(u.jsx)("th",{children:" Request By "}),Object(u.jsx)("th",{children:" Request To "}),Object(u.jsx)("th",{children:" Company "}),Object(u.jsx)("th",{children:" Date Time "}),Object(u.jsx)("th",{children:" Status "})]})}),Object(u.jsx)("tbody",{children:U.map((function(t,s){var n=new Date(t.request_date);return console.log(t),Object(u.jsxs)("tr",{className:"hover",onClick:function(){return function(t){e.replace("/item_requests/view/index="+t)}(t.id)},children:[Object(u.jsxs)("td",{children:[" ",t.id," "]}),Object(u.jsxs)("td",{children:[" ",t.sender_name," "]}),Object(u.jsxs)("td",{children:[" ",t.receiver_name," "]}),Object(u.jsxs)("td",{children:[" ",t.company_name," ",Object(u.jsx)("br",{})," ",t.location_name," "]}),Object(u.jsxs)("td",{children:[" ",n?n.toDateString():null," ",Object(u.jsx)("br",{})," ",t.request_time," "]}),Object(u.jsx)("td",{children:Object(u.jsx)("span",{className:"statusBox",children:t.status})})]},s)}))})]})]}),Object(u.jsx)(j.a,{})]})}},556:function(e,t,s){},88:function(e,t,s){"use strict";s(1),s(89);var n=s(0);t.a=function(e){return Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)("div",{className:"Attandence_Request_Div",style:{display:e.show?"flex":"none"},children:[Object(n.jsx)("div",{className:"dark",onClick:e.Hide}),Object(n.jsx)("div",{style:{animationDelay:"0.1".toString()+"s"},className:e.show?"Attandence_Request_Div_Content Attandence_Request_Div_Content2":"Attandence_Request_Div_Content",children:e.content})]})})}},89:function(e,t,s){}}]);