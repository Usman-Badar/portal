(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[66],{599:function(e,c,t){"use strict";t.r(c);var n=t(24),a=t(9),o=t(4),s=t(1),l=(t(600),t(11)),i=t(0);c.default=function(){var e=Object(s.useState)({company_code:"",code:"",company_name:"",website:null,logo:null}),c=Object(o.a)(e,2),t=c[0],r=c[1],j=Object(s.useState)([]),p=Object(o.a)(j,2),h=p[0],u=p[1],O=Object(s.useState)({companyInfo:null,logs:[]}),g=Object(o.a)(O,2),x=g[0],f=g[1];Object(s.useEffect)((function(){y()}),[]);var N=function(e){var c=h[e];f(Object(a.a)(Object(a.a)({},x),{},{companyInfo:c}))},y=function(){l.a.get("/getcompaniescodes").then((function(e){u(e.data)})).catch((function(e){console.log(e)}))};return Object(i.jsx)(i.Fragment,{children:Object(i.jsxs)("div",{className:"AdminCompanies",children:[Object(i.jsx)("div",{className:"left",children:Object(i.jsx)(d,{Form:t,onImageUpload:function(e){var c=new FileReader;c.onload=function(){2===c.readyState&&r(Object(a.a)(Object(a.a)({},t),{},{logo:c.result}))},c.readAsDataURL(e.target.files[0])},onChangeHandler:function(e){var c=e.target,o=c.name,s=c.value,l=Object(a.a)(Object(a.a)({},t),{},Object(n.a)({},o,s));r(l)},AddNewCompany:function(e){e.preventDefault(),l.a.post("/addnewcompany",{company_code:t.company_code,code:t.code,company_name:t.company_name,website:t.website,logo:t.logo}).then((function(e){if("COMPANY EXISTS"===e.data)return alert("Company With Company Code: "+t.company_code+" Already Exists"),!1;alert("New Company "+t.company_name+" Added"),y(),r({company_code:"",code:"",company_name:"",website:null,logo:null})})).catch((function(e){console.log(e)}))}})}),null===x.companyInfo?h.length>0?Object(i.jsx)("div",{className:"right",children:h.map((function(e,c){var t;return t=null===e.logo?"https://pbs.twimg.com/profile_images/578844000267816960/6cj6d4oZ_400x400.png":e.logo,Object(i.jsx)(b,{val:e,src:t,index:c,OpenCompanyDetails:N})}))}):Object(i.jsx)("h3",{className:"text-center",children:"No Company Found"}):Object(i.jsx)(m,{data:x.companyInfo,Back:function(){f({companyInfo:null,logs:[]})},setDetails:f,Details:x})]})})};var m=function(e){var c=e.data,t=e.setDetails,n=e.Details,o=e.Back;return Object(s.useEffect)((function(){l.a.post("/getcompanylogs",{company_code:c.company_code}).then((function(e){t(Object(a.a)(Object(a.a)({},n),{},{logs:e.data}))})).catch((function(e){console.log(e)}))}),[]),Object(i.jsxs)("div",{children:[Object(i.jsxs)("div",{className:"CompanyDetails",children:[Object(i.jsx)("i",{className:"las la-arrow-alt-circle-left la-2x",onClick:o}),Object(i.jsx)("img",{src:null===c.logo?"https://pbs.twimg.com/profile_images/578844000267816960/6cj6d4oZ_400x400.png":c.logo,width:"30%",height:"auto",alt:"Logo"}),Object(i.jsxs)("div",{className:"rightSide w-100",children:[Object(i.jsxs)("div",{children:[Object(i.jsx)("p",{className:"font-weight-bold mb-0",children:"Company Code"}),Object(i.jsxs)("p",{className:"mb-0",children:[" ",c.company_code," "]})]}),Object(i.jsxs)("div",{children:[Object(i.jsx)("p",{className:"font-weight-bold mb-0",children:"Company Name"}),Object(i.jsxs)("p",{className:"mb-0",children:[" ",c.company_name," "]})]}),Object(i.jsxs)("div",{children:[Object(i.jsx)("p",{className:"font-weight-bold mb-0",children:"Short Code"}),Object(i.jsxs)("p",{className:"mb-0",children:[" ",null===c.code?"No Code":c.code," "]})]}),Object(i.jsxs)("div",{children:[Object(i.jsx)("p",{className:"font-weight-bold mb-0",children:"Website"}),Object(i.jsxs)("p",{className:"mb-0",children:[" ",null===c.website?"No Website":c.website," "]})]}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{className:"btn submit btn-block",children:"Edit"})}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{className:"btn cancle btn-block",children:"Delete"})})]})]}),Object(i.jsx)("br",{}),Object(i.jsxs)("div",{className:"CompanyDetails d-block",children:[Object(i.jsx)("h4",{children:"Logs"}),Object(i.jsx)("div",{className:"logContainer mt-3",children:0===n.logs.length?Object(i.jsx)("p",{className:"text-center mb-0",children:" No Log Found "}):n.logs.map((function(e){return Object(i.jsxs)("div",{className:"log",children:[Object(i.jsx)("span",{children:e.log}),Object(i.jsxs)("span",{children:[new Date(e.log_date).toDateString()," at ",e.log_time]})]},e.log_id)}))})]})]})},b=function(e){var c=e.val,t=e.src,n=e.index,a=e.OpenCompanyDetails;return Object(i.jsx)(i.Fragment,{children:Object(i.jsxs)("div",{className:"companyDiv",onClick:function(){return a(n)},children:[Object(i.jsx)("img",{src:t,alt:"logo",height:"100"}),Object(i.jsx)("p",{className:"font-weight-bold mb-0",children:c.company_name}),Object(i.jsx)("p",{className:"mb-0",children:null===c.website?"No Website":c.website}),Object(i.jsx)("p",{className:"mb-0",children:null===c.code?"No Code":c.code})]},c.company_code)})},d=function(e){var c=e.AddNewCompany,t=e.onChangeHandler,n=e.onImageUpload,a=e.Form;return Object(i.jsx)(i.Fragment,{children:Object(i.jsxs)("form",{className:"left",onSubmit:c,children:[Object(i.jsx)("h6",{className:"mb-3 font-weight-bold",children:"Enter New Company"}),null!==a.logo?Object(i.jsx)("div",{className:"text-center",children:Object(i.jsx)("img",{className:"rounded-circle",src:a.logo,alt:"Logo",width:"100",height:"100"})}):null,Object(i.jsx)("br",{}),Object(i.jsx)("label",{className:"mb-0",children:" Company Code "}),Object(i.jsx)("input",{required:!0,type:"text",className:"form-control form-control-sm mb-2",onChange:t,value:a.company_code,name:"company_code"}),Object(i.jsx)("label",{className:"mb-0",children:" Short Code "}),Object(i.jsx)("input",{type:"text",className:"form-control form-control-sm mb-2",onChange:t,value:a.code,name:"code"}),Object(i.jsx)("label",{className:"mb-0",children:" Company Name "}),Object(i.jsx)("input",{required:!0,type:"text",className:"form-control form-control-sm mb-2",onChange:t,value:a.company_name,name:"company_name"}),Object(i.jsx)("label",{className:"mb-0",children:" Website "}),Object(i.jsx)("input",{type:"text",className:"form-control form-control-sm mb-2",onChange:t,value:a.website,name:"website"}),Object(i.jsx)("label",{className:"mb-0",children:" Logo "}),Object(i.jsx)("input",{type:"file",className:"form-control form-control-sm mb-2",onChange:n,name:"logo"}),Object(i.jsx)("button",{type:"submit",className:"btn btn-sm submit",children:"add new company"})]})})}},600:function(e,c,t){}}]);