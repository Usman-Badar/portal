{"version":3,"sources":["Components/AdminModule/Pages/Departments/Departments.jsx"],"names":["Departments","history","useHistory","useState","setDepartments","department_code","department_name","Department","setDepartment","DepartName","AddDepart","setAddDepart","useEffect","GetAllDepartments","axios","get","then","response","data","catch","error","toast","dark","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","onChangeHandler","e","target","name","value","setVal","className","onSubmit","preventDefault","Data","FormData","append","post","$","val","err","onChange","type","placeholder","required","length","map","index","style","onClick","id","replace","indexx","department","filter","arr","setValues","trigger","OnEdit","OnDelete","role","pattern","minLength"],"mappings":"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","file":"static/js/65.8c72e99c.chunk.js","sourcesContent":["import React, { useEffect, useState } from 'react';\r\n\r\nimport './Departments.css';\r\n\r\nimport axios from '../../../../axios';\r\nimport { useHistory } from 'react-router-dom';\r\nimport $ from 'jquery';\r\n\r\nimport { ToastContainer, toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\n\r\nconst Departments = () => {\r\n\r\n    const history = useHistory();\r\n\r\n    const [ Departments, setDepartments ] = useState([]);\r\n    const [ Department, setDepartment ] = useState(\r\n        {\r\n            department_code: '', department_name: ''\r\n        }\r\n    );\r\n    const [ AddDepart, setAddDepart ] = useState(\r\n        {\r\n            DepartName: ''\r\n        }\r\n    )\r\n\r\n    useEffect(\r\n        () => {\r\n\r\n            GetAllDepartments();\r\n\r\n        }, []\r\n    );\r\n\r\n    const GetAllDepartments = () => {\r\n\r\n        axios.get('/getalldepartments').then( response => {\r\n\r\n            setDepartments( response.data );\r\n\r\n        } ).catch( error => {\r\n\r\n            toast.dark(error, {\r\n                position: 'top-right',\r\n                autoClose: 5000,\r\n                hideProgressBar: false,\r\n                closeOnClick: true,\r\n                pauseOnHover: true,\r\n                draggable: true,\r\n                progress: undefined,\r\n            });\r\n\r\n        } );\r\n\r\n    }\r\n\r\n    const ViewDesignation = ( id ) => {\r\n\r\n        history.replace( '/admin_departments/admin_designations/' + id );\r\n\r\n    }\r\n\r\n    // Function onchange which is called to store data into usestate()\r\n    const onChangeHandler = ( e ) => {\r\n\r\n        const { name, value } = e.target;\r\n        const setVal = {\r\n            ...AddDepart,\r\n            [name]: value\r\n        }\r\n        setAddDepart( setVal );\r\n\r\n    }\r\n\r\n    const AddDepartments = ( e ) => {\r\n\r\n        e.preventDefault();\r\n\r\n        const Data = new FormData();\r\n        Data.append('depart', AddDepart.DepartName);\r\n\r\n        axios.post('/adddepartment', Data).then( () => {\r\n\r\n            GetAllDepartments();\r\n            $(\"input[name='DepartName']\").val('');\r\n\r\n        } ).catch( err => {\r\n\r\n            toast.dark(err, {\r\n                position: 'top-right',\r\n                autoClose: 5000,\r\n                hideProgressBar: false,\r\n                closeOnClick: true,\r\n                pauseOnHover: true,\r\n                draggable: true,\r\n                progress: undefined,\r\n            });\r\n\r\n        } );\r\n\r\n    }\r\n\r\n    const OnEdit = ( id, indexx ) => {\r\n\r\n        let department = Departments.filter(\r\n            (val, index, arr) => {\r\n                return index === indexx;\r\n            }\r\n        );\r\n\r\n        const setValues = {\r\n            ...Department,\r\n            department_name: department[0].department_name,\r\n            department_code: id\r\n        }\r\n\r\n        setDepartment(setValues);\r\n        $('.editModalBtn').trigger('click');\r\n\r\n    }\r\n\r\n    const OnDelete = ( id ) => {\r\n\r\n        const Data = new FormData();\r\n        Data.append('departID', id);\r\n        axios.post('/deletedepartmentname', Data).then( () => {\r\n\r\n            GetAllDepartments();\r\n\r\n            setDepartment(\r\n                {\r\n                    department_code: '', department_name: ''\r\n                }\r\n            );\r\n            toast.dark('Department Deleted', {\r\n                position: 'top-right',\r\n                autoClose: 5000,\r\n                hideProgressBar: false,\r\n                closeOnClick: true,\r\n                pauseOnHover: true,\r\n                draggable: true,\r\n                progress: undefined,\r\n            });\r\n\r\n        } ).catch( err => {\r\n\r\n            toast.dark(err, {\r\n                position: 'top-right',\r\n                autoClose: 5000,\r\n                hideProgressBar: false,\r\n                closeOnClick: true,\r\n                pauseOnHover: true,\r\n                draggable: true,\r\n                progress: undefined,\r\n            });\r\n\r\n        } );\r\n        \r\n    }\r\n\r\n    return (\r\n        <>\r\n            <ToastContainer />\r\n            <div className=\"Admin_Departments d-center\">\r\n\r\n                <div className=\"Admin_Departments-content\">\r\n                    <h3>Add New Departments</h3>\r\n\r\n                    <form className=\"addDepartments btn-group\" onSubmit={ AddDepartments }>\r\n                        <input onChange={ onChangeHandler } type=\"text\" className=\"form-control\" placeholder=\"Department Name\" name=\"DepartName\" required />\r\n                        <button className=\"btn\" type=\"submit\">Add Department</button>\r\n                    </form>\r\n\r\n                    <h3>All Departments</h3>\r\n                    <div className=\"departments\">\r\n                        {\r\n                            Departments.length === 0\r\n                                ?\r\n                                <h3 className=\"text-center mb-0\">No Department Found</h3>\r\n                                :\r\n                                Departments.map(\r\n                                    (val, index) => {\r\n                                        return (\r\n                                            <div className=\"d-flex align-items-center border-bottom mb-2\" key={index}>\r\n                                                <div className=\"index\"> { index + 1 } </div>\r\n                                                <div>\r\n                                                    <span style={{ 'color': 'rgb(128, 128, 128, .5)' }}>Department Name</span>\r\n                                                    <h5> { val.department_name } </h5>\r\n                                                </div>\r\n                                                <div className=\"ml-auto d-flex align-items-center operations\">\r\n                                                    <div className=\"px-3\">\r\n                                                        <button onClick={ () => ViewDesignation( val.department_code ) } className=\"btn\" style={{ 'backgroundColor': '#1A7DEC' }}><i className=\"las la-users\"></i> Designations</button>\r\n                                                    </div>\r\n                                                    <div className=\"px-3\">\r\n                                                        <button className=\"btn\" onClick={ () => OnEdit( val.department_code, index ) } style={{ 'backgroundColor': '#1EC916' }}><i className=\"las la-edit\"></i> Edit</button>\r\n                                                    </div>\r\n                                                    <div className=\"px-3\">\r\n                                                        <button className=\"btn\" onClick={ () => OnDelete( val.department_code ) } style={{ 'backgroundColor': '#FEC400' }}><i className=\"las la-trash\"></i> Remove</button>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        )\r\n                                    }\r\n                                )\r\n                        }\r\n                    </div>\r\n\r\n                </div>\r\n\r\n                <button type=\"button\" className=\"btn btn-primary d-none editModalBtn\" data-toggle=\"modal\" data-target=\"#departmentModal\">\r\n                    Launch demo modal\r\n                </button>\r\n                <div className=\"modal fade\" id=\"departmentModal\" role=\"dialog\" aria-labelledby=\"departmentModalLabel\" aria-hidden=\"true\">\r\n                    <div className=\"modal-dialog modal-dialog-centered\" role=\"document\">\r\n                        <div className=\"modal-content\">\r\n                            <div className=\"modal-body\">\r\n                                <input type=\"text\" value={Department.department_name} className=\"form-control mb-3\" placeholder=\"Category Name\" name=\"editCtgryName\" onChange={ onChangeHandler } pattern=\"[a-zA-Z][a-zA-Z\\s]*\" minLength=\"3\" required />\r\n                                <button data-dismiss=\"modal\" className=\"btn d-block ml-auto\">Update Department</button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n            </div>\r\n        </>\r\n    )\r\n\r\n}\r\n\r\nexport default Departments;"],"sourceRoot":""}