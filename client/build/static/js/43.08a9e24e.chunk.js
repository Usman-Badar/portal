(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[43],{557:function(e,t,s){"use strict";s.r(t);var n=s(24),c=s(9),a=s(4),i=s(1),l=(s(558),s(3)),r=s(17),o=s(25),d=s(11),m=s(98),j=s(132),b=s(88),u=s(79),h=s.n(u),x=s(0);t.default=function(){var e=Object(l.g)(),t=Object(o.c)((function(e){return e.EmpAuth.Relations})),s=Object(o.c)((function(e){return e.EmpAuth.EmployeeData})),u=Object(i.useState)(""),p=Object(a.a)(u,2),O=p[0],f=p[1],g=Object(i.useState)(!0),N=Object(a.a)(g,2),v=N[0],_=N[1],q=Object(i.useState)(!0),w=Object(a.a)(q,2),y=w[0],S=w[1],I=Object(i.useState)(!1),D=Object(a.a)(I,2),C=D[0],k=D[1],R=Object(i.useState)(!1),F=Object(a.a)(R,2),E=F[0],A=F[1],B=Object(i.useState)(),L=Object(a.a)(B,2),J=L[0],T=L[1],Q=Object(i.useState)(),Y=Object(a.a)(Q,2),G=Y[0],H=Y[1],P=Object(i.useState)(""),W=Object(a.a)(P,2),z=W[0],M=W[1],K=Object(i.useState)([]),U=Object(a.a)(K,2),V=U[0],X=U[1],Z=Object(i.useState)([]),$=Object(a.a)(Z,2),ee=$[0],te=$[1],se=Object(i.useState)([]),ne=Object(a.a)(se,2),ce=ne[0],ae=ne[1],ie=Object(i.useState)([]),le=Object(a.a)(ie,2),re=le[0],oe=le[1],de=Object(i.useState)([]),me=Object(a.a)(de,2),je=me[0],be=me[1],ue=Object(i.useState)([]),he=Object(a.a)(ue,2),xe=he[0],pe=he[1],Oe=Object(i.useState)([]),fe=Object(a.a)(Oe,2),ge=fe[0],Ne=fe[1],ve=Object(i.useState)({details:null,specifications:[],logs:[],specificationsStatus:[]}),_e=Object(a.a)(ve,2),qe=_e[0],we=_e[1],ye=Object(i.useState)({company_code:"",location_code:"",request_to:"",request_by:s.emp_id,request_date:new Date,request_action:""}),Se=Object(a.a)(ye,2),Ie=Se[0],De=Se[1],Ce=Object(i.useState)({name:"",required_quantity:"",reason:""}),ke=Object(a.a)(Ce,2),Re=ke[0],Fe=ke[1];Object(i.useEffect)((function(){0===re.length||""===Ie.company_code||""===Ie.location_code?_(!0):_(!1)}),[re.length,Ie.company_code,Ie.location_code]),Object(i.useEffect)((function(){Re.item_id&&(""!==Re.name&&""!==Re.required_quantity&&""!==Re.reason||Re.reason.length>20)?S(!1):S(!0),"edit"===window.location.href.split("/")[5]&&""!==Re.name&&""!==Re.required_quantity&&""!==Re.reason&&Me()}),[Re.name,Re.required_quantity,Re.reason]),Object(i.useEffect)((function(){Je(),m.a.on("somethingchangeinitemrequest",(function(e){Je(),e&&Ae(e)})),m.a.on("newitemrequestcomment",(function(e){parseInt(e)===parseInt(window.location.href.split("/").pop().split("=").pop())&&Ee(window.location.href.split("/").pop().split("=").pop())}))}),[]),Object(i.useEffect)((function(){"new"!==window.location.href.split("/").pop()&&"generatepr"!==window.location.href.split("/")[5]||Be(),window.location.href.split("/").pop().includes("index")&&(Ae(window.location.href.split("/").pop().split("=").pop()),Ee(window.location.href.split("/").pop().split("=").pop())),M(window.location.href.split("/").pop())}),[window.location.href.split("/").pop()]),setTimeout((function(){j.a.rebuild()}),1e3);var Ee=function(e){d.a.post("/getitemrequestcomments",{id:e}).then((function(e){be(e.data),setTimeout((function(){var e=document.getElementById("comments_content");e&&(e.scrollTop=e.scrollHeight)}),500)})).catch((function(e){console.log(e)}))},Ae=function(e){d.a.post("/getitemrequestdetails",{id:e}).then((function(e){oe(e.data[1]),we({details:e.data[0][0],specifications:e.data[1],logs:e.data[2],specificationsStatus:e.data[3]}),Le(e.data[0][0].company_code),Qe(e.data[0][0].company_code),setTimeout((function(){De(Object(c.a)(Object(c.a)({},Ie),{},{company_code:e.data[0][0].company_code,location_code:e.data[0][0].location_code}))}),1e3)})).catch((function(e){console.log(e)}))},Be=function(){d.a.get("/getallcompanies").then((function(e){ae(e.data)})).catch((function(e){console.log(e)}))},Le=function(e){d.a.post("/getcompanylocations",{company_code:e}).then((function(e){te(e.data)})).catch((function(e){console.log(e)}))},Je=function(){d.a.post("/getallitemrequests",{emp_id:sessionStorage.getItem("EmpID"),access:s.access}).then((function(e){X(e.data)})).catch((function(e){console.log(e)}))},Te=function(e){var t=e.target,s=t.name,a=t.value,i=Object(c.a)(Object(c.a)({},Ie),{},Object(n.a)({},s,a)),l=ge;if(De(i),"company_code"===s&&(Le(a),"generatepr"===window.location.href.split("/")[5]&&Qe(a),e.target.attributes.log)){for(var r,o=0;o<l.length;o++)l[o].includes("Request company")&&(r=!0);r||l.push("Request company ("+qe.details.company_name+") has changed")}if("location_code"===s&&e.target.attributes.log){for(var d,m=0;m<l.length;m++)l[m].includes("Request location")&&(d=!0);d||l.push("Request location ("+qe.details.location_name+") has changed")}e.target.attributes.log&&Ne(l)},Qe=function(e){var t="",s="",n="",c=new Date;n=c.getMonth()>6?c.getFullYear().toString().substring(2,4)+"/"+(c.getFullYear()+1).toString().substring(2,4):(c.getFullYear()-1).toString().substring(2,4)+"/"+c.getFullYear().toString().substring(2,4),d.a.post("/getshortcompanyname",{company_code:e}).then((function(c){c.data.length>0&&(t=c.data[0].code),d.a.post("/getprcode",{company_code:e}).then((function(e){if(e.data.length>0){var c=(parseInt(e.data[0].pr_code.split("-")[1])+1).toString();1===c.length&&(c="0"+c),s=c}else s="01";f(t+"-"+s+"-"+n)})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))},Ye=function(t){_(!0),d.a.post(t,{request:JSON.stringify(Ie),specifications:JSON.stringify(re),pr_code:O,itemRequest:JSON.stringify(qe.details),logs:JSON.stringify(ge),itemsDetails:JSON.stringify(qe.specificationsStatus)}).then((function(){m.a.emit("somethingchangeinitemrequest");var s=sessionStorage.getItem("name")+" has sent your a new item request for approval";"/generatepronitemrequest"===t&&(s=sessionStorage.getItem("name")+" proceed your item request to purchase requisition");var n=new FormData;n.append("eventID",3),n.append("receiverID",Ie.request_to),n.append("senderID",sessionStorage.getItem("EmpID")),n.append("Title",sessionStorage.getItem("name")),n.append("NotificationBody",s),d.a.post("/newnotification",n).then((function(){d.a.post("/sendmail",n).then((function(){}))})),e.replace("/item_requests")})).catch((function(e){_(!1),console.log(e)}))},Ge=function(e){var t,s=e.target,a=s.name,i=s.value,l=Object(c.a)(Object(c.a)({},Re),{},Object(n.a)({},a,i));Fe(l),"name"===a&&(""!==(t=i)?d.a.post("/getmatchedstoreitems",{key:t}).then((function(e){pe(e.data)})).catch((function(e){console.log(e)})):pe([]))},He=function(e){var t=re;if("generatepr"===window.location.href.split("/")[5]){if(e){var s=ge;C?(parseInt(t[G].required_quantity)!==parseInt(Re.required_quantity)&&s.push(Re.name+"'s required quantity has edited"),t[G].reason!==Re.reason&&s.push(Re.name+"'s reason has edited"),t[G].name!==Re.name&&s.push(t[G].name+" has changed to a new item "+Re.name)):s.push("New item "+Re.name+" has added"),Ne(s)}C?(t[G]={id:Re.id,item_id:Re.item_id,name:Re.name,required_quantity:Re.required_quantity,reason:Re.reason,edited:!0},k(!1),H()):t.push({id:Re.id,item_id:Re.item_id,name:Re.name,required_quantity:Re.required_quantity,reason:Re.reason,new_added:!0})}else C?(t[G]={id:Re.id,item_id:Re.item_id,name:Re.name,required_quantity:Re.required_quantity,reason:Re.reason},k(!1),H()):t.push({id:Re.id,item_id:Re.item_id,name:Re.name,required_quantity:Re.required_quantity,reason:Re.reason});oe(t),Fe({name:"",required_quantity:"",reason:""})},Pe=function(e){var t=Object(c.a)(Object(c.a)({},Re),{},{item_id:xe[e].id,name:xe[e].name});Fe(t),pe([])},We=function(e){var t=re.filter((function(t,s){return s!==e}));oe(t)},ze=function(e){var t=re[e];Fe({id:t.id,item_id:t.item_id,name:t.name,required_quantity:t.required_quantity,reason:t.reason}),k(!0),H(e)},Me=function(){var e=Object(x.jsxs)("form",{className:"w-100",onSubmit:function(e){return alert("A")},children:[Object(x.jsx)("small",{children:"Item Name"}),Object(x.jsxs)("div",{className:"itemNameContainer",children:[Object(x.jsx)("input",{onChange:Ge,value:Re.name,name:"name",className:"form-control form-control-sm",required:!0}),Object(x.jsx)("div",{className:"list",children:xe.map((function(e){return Object(x.jsx)("span",{children:e.name})}))})]}),Object(x.jsx)("small",{children:"Required Quantity"}),Object(x.jsx)("input",{onChange:Ge,value:Re.required_quantity,name:"required_quantity",className:"form-control form-control-sm",required:!0}),Object(x.jsx)("small",{children:"Reason / Details"}),Object(x.jsx)("input",{onChange:Ge,value:Re.reason,name:"reason",className:"form-control form-control-sm",required:!0}),Object(x.jsx)("div",{className:"text-right",children:Object(x.jsx)("button",{className:"btn btn-outline-dark btn-sm mt-2",children:"update"})})]});T(e),A(!0)},Ke=function(t,n){t.preventDefault(),d.a.post(n,{request_id:qe.details.id,emp_id:s.emp_id,reason:t.target.remarks?t.target.remarks.value:null}).then((function(){var t,s,c;m.a.emit("somethingchangeinitemrequest",qe.details.id),"/rejectitemrequest"===n?(t=sessionStorage.getItem("name")+" has reject your item request.",s=qe.details.request_by,c=sessionStorage.getItem("EmpID")):"/approveitemrequest"===n?(t=sessionStorage.getItem("name")+" has approve your item request.",s=qe.details.request_by,c=sessionStorage.getItem("EmpID")):"/cancelitemrequest"===n?(t=sessionStorage.getItem("name")+" has cancel his item request.",s=Ie.request_to,c=Ie.request_by):"/deliveritemrequest"===n&&(t="Delivery of your required item (s) is in process.",s=qe.details.request_by,c=sessionStorage.getItem("EmpID"));var a=new FormData;a.append("eventID",3),a.append("receiverID",s),a.append("senderID",c),a.append("Title",sessionStorage.getItem("name")),a.append("NotificationBody",t),d.a.post("/newnotification",a).then((function(){d.a.post("/sendmail",a).then((function(){}))})),e.replace("/item_requests")})).catch((function(e){console.log(e)}))};return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(b.a,{show:E,Hide:function(){A(!E)},content:J}),z.includes("index")?Object(x.jsxs)("div",{className:"commentBox",children:[Object(x.jsxs)("div",{className:"header",onClick:function(){return h()(".commentBox").toggleClass("open")},children:["Comment Section",0===je.length?null:Object(x.jsx)("span",{className:"counting",children:je.length})]}),Object(x.jsx)("div",{className:"comments_content",id:"comments_content",children:0===je.length?Object(x.jsx)("div",{className:"text-center",children:"No Comments"}):je.map((function(e){return Object(x.jsxs)("div",{className:parseInt(e.sender_id)===parseInt(sessionStorage.getItem("EmpID"))?"comment mine":"comment",children:[Object(x.jsxs)("small",{className:parseInt(e.sender_id)===parseInt(sessionStorage.getItem("EmpID"))?"mine":"",children:[" ",Object(x.jsx)("b",{children:e.name})," "]}),Object(x.jsxs)("p",{className:parseInt(e.sender_id)===parseInt(sessionStorage.getItem("EmpID"))?"mine":"",children:[" ",e.comment," "]}),Object(x.jsxs)("small",{className:parseInt(e.sender_id)===parseInt(sessionStorage.getItem("EmpID"))?"mine":"",children:[" ",new Date(e.send_date).toDateString()," at ",e.send_time," "]})]})}))}),Object(x.jsxs)("form",{className:"newComment",id:"commentForm",onSubmit:function(e){e.preventDefault(),d.a.post("/newitemrequestcomment",{comment:e.target.comment.value,item_request_id:window.location.href.split("/").pop().split("=").pop(),sender_id:sessionStorage.getItem("EmpID")}).then((function(){document.getElementById("commentForm").reset(),Ee(window.location.href.split("/").pop().split("=").pop()),m.a.emit("newitemrequestcomment",window.location.href.split("/").pop().split("=").pop())})).catch((function(e){console.log(e)}))},children:[Object(x.jsx)("input",{required:!0,type:"text",name:"comment"}),Object(x.jsx)("button",{children:Object(x.jsx)("i",{className:"las la-paper-plane"})})]})]}):null,"generatepr"===window.location.href.split("/")[5]?Object(x.jsxs)("div",{className:"items_container",children:[Object(x.jsxs)("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[Object(x.jsx)("div",{children:Object(x.jsx)("h5",{className:"mb-0 font-weight-bold",children:"Generating Purchase Requisition"})}),Object(x.jsxs)("div",{className:"d-flex",children:[Object(x.jsx)(r.b,{to:"/item_requests/view/index="+window.location.href.split("/").pop().split("=").pop(),className:"btn btn-sm cancle",children:"cancel"}),v?null:Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("select",{className:"form-control form-control-sm mx-2",onChange:Te,name:"request_to",children:[Object(x.jsx)("option",{value:"",children:"Select the option"}),t.map((function(e,t){var s;return("all"===e.category||e.category.includes("item_request"))&&(s=Object(x.jsxs)("option",{value:e.sr,children:[" ",e.name," "]},t)),s}))]}),""!==Ie.request_to?Object(x.jsx)("button",{className:"btn btn-sm submit",type:"button",onClick:function(){return Ye("/generatepronitemrequest")},children:"submit"}):null]})]})]}),Object(x.jsx)("div",{className:"container-fluid px-0",children:Object(x.jsxs)("form",{className:"p-3 rounded",children:[Object(x.jsx)("h6",{className:"mb-3 font-weight-bold",children:"Purchase Requisition Form"}),Object(x.jsxs)("div",{className:"d-flex w-100",children:[Object(x.jsxs)("div",{className:"mr-1 w-50",children:[Object(x.jsx)("label",{className:"mb-0",children:" Company "}),Object(x.jsxs)("select",{className:"form-control form-control-sm mb-2",log:"company_code",onChange:Te,name:"company_code",value:Ie.company_code,children:[Object(x.jsx)("option",{value:"",children:"Select the option"}),ce.map((function(e){return Object(x.jsxs)("option",{value:e.company_code,children:[" ",e.company_name," "]},e.company_code)}))]})]}),Object(x.jsxs)("div",{className:"ml-1 w-50",children:[Object(x.jsx)("label",{className:"mb-0",children:" PR Number "}),Object(x.jsx)("input",{type:"text",disabled:!0,className:"form-control form-control-sm mb-2",value:O})]})]}),Object(x.jsxs)("div",{className:"d-flex w-100",children:[Object(x.jsxs)("div",{className:"mr-1 w-50",children:[Object(x.jsx)("label",{className:"mb-0",children:" Delivery / Work Location "}),Object(x.jsxs)("select",{className:"form-control form-control-sm mb-2",log:"location_code",onChange:Te,name:"location_code",value:Ie.location_code,children:[Object(x.jsx)("option",{value:"",children:"Select the option"}),ee.map((function(e){return Object(x.jsxs)("option",{value:e.location_code,children:[" ",e.location_name," "]},e.location_code)}))]})]}),Object(x.jsxs)("div",{className:"ml-1 w-50",children:[Object(x.jsx)("label",{className:"mb-0",children:" Date "}),Object(x.jsx)("input",{type:"text",disabled:!0,className:"form-control form-control-sm mb-2",value:(new Date).toDateString()})]})]}),Object(x.jsxs)("table",{className:"table table-sm mt-4",children:[Object(x.jsxs)("tr",{className:"bg-light",children:[Object(x.jsx)("th",{children:"Sr No."}),Object(x.jsx)("th",{children:"Status"}),Object(x.jsx)("th",{children:"Item"}),Object(x.jsx)("th",{children:"Quantity"}),Object(x.jsx)("th",{children:"Reason / Details"}),Object(x.jsx)("th",{children:"Availability"})]}),re.map((function(e,t){return Object(x.jsx)(x.Fragment,{children:C&&parseInt(G)===parseInt(t)?Object(x.jsxs)("tr",{children:[Object(x.jsxs)("td",{children:[" ",G+1," "]}),Object(x.jsx)("td",{children:"  "}),Object(x.jsxs)("td",{className:"ItemColumn",children:[Object(x.jsx)("input",{onChange:Ge,value:Re.name,attr:"pr",name:"name",className:"entities form-control form-control-sm"}),xe.length>0?Object(x.jsx)("div",{className:"StoreItemsList",children:xe.map((function(e,t){return Object(x.jsx)("p",{className:"StoreItemsListItem",onClick:function(){return Pe(t)},children:e.name},t)}))}):null]}),Object(x.jsx)("td",{children:Object(x.jsx)("input",{onChange:Ge,value:Re.required_quantity,attr:"pr",name:"required_quantity",type:"number",className:"entities form-control form-control-sm"})}),Object(x.jsx)("td",{colSpan:2,children:Object(x.jsx)("input",{onChange:Ge,value:Re.reason,attr:"pr",name:"reason",type:"text",className:"entities form-control form-control-sm"})})]}):qe.specificationsStatus.length>0?Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:t+1}),Object(x.jsx)("td",{children:e.new_added?"new":e.edited?"edited":"default"}),Object(x.jsxs)("td",{className:"underline",children:[e.name,qe.specificationsStatus[t]?Object(x.jsxs)("div",{className:"items_specifications details",children:[Object(x.jsx)("b",{children:"Availble Quantity: "}),Object(x.jsxs)("span",{children:[" ",qe.specificationsStatus[t].availble_quantity," "]}),Object(x.jsx)("br",{}),Object(x.jsx)("b",{children:"Status: "}),Object(x.jsxs)("span",{children:[" ",qe.specificationsStatus[t].status," "]})]}):null]}),Object(x.jsx)("td",{children:e.required_quantity}),Object(x.jsxs)("td",{className:"icons",children:[e.reason,Object(x.jsxs)("span",{children:[Object(x.jsx)("i",{onClick:function(){return ze(t)},className:"lar la-edit"}),Object(x.jsx)("i",{onClick:function(){return We(t)},className:"lar la-trash-alt"})]})]}),Object(x.jsx)("td",{children:qe.specificationsStatus[t]?parseInt(e.required_quantity)>parseInt(qe.specificationsStatus[t].availble_quantity)?"Not Availble":"Availble":null})]}):null})})),C?null:Object(x.jsxs)("tr",{children:[Object(x.jsxs)("td",{children:[" ",re.length+1," "]}),Object(x.jsx)("td",{children:"  "}),Object(x.jsxs)("td",{className:"ItemColumn",children:[Object(x.jsx)("input",{onChange:Ge,value:Re.name,name:"name",className:"entities form-control form-control-sm"}),xe.length>0?Object(x.jsx)("div",{className:"StoreItemsList",children:xe.map((function(e,t){return Object(x.jsx)("p",{className:"StoreItemsListItem",onClick:function(){return Pe(t)},children:e.name},t)}))}):null]}),Object(x.jsx)("td",{children:Object(x.jsx)("input",{onChange:Ge,value:Re.required_quantity,name:"required_quantity",type:"number",className:"entities form-control form-control-sm"})}),Object(x.jsx)("td",{colSpan:2,children:Object(x.jsx)("input",{onChange:Ge,value:Re.reason,name:"reason",type:"text",className:"entities form-control form-control-sm"})})]})]}),Object(x.jsx)("div",{className:"text-right",children:Object(x.jsx)("button",{className:"btn btn-sm cancle",onClick:function(){return He("log")},type:"button",disabled:y,children:C?"update item":"add item"})})]})})]}):"new"===z?Object(x.jsxs)("div",{className:"items_container",children:[Object(x.jsxs)("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[Object(x.jsx)("div",{children:Object(x.jsx)("h5",{className:"mb-0 font-weight-bold",children:"Send New Item Request"})}),Object(x.jsxs)("div",{className:"d-flex",children:[Object(x.jsx)(r.b,{to:"/item_requests",className:"btn btn-sm cancle",children:"cancel"}),v?null:Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("select",{className:"form-control form-control-sm mx-2",onChange:Te,name:"request_to",children:[Object(x.jsx)("option",{value:"",children:"Select the option"}),t.map((function(e,t){var s;return("all"===e.category||e.category.includes("item_request"))&&(s=Object(x.jsxs)("option",{value:e.sr,children:[" ",e.name," "]},t)),s}))]}),""!==Ie.request_to?Object(x.jsx)("button",{className:"btn btn-sm submit",type:"button",onClick:function(){return Ye("/newitemrequest")},children:"submit"}):null]})]})]}),Object(x.jsx)("div",{className:"container-fluid px-0",children:Object(x.jsxs)("form",{className:"p-3 rounded",children:[Object(x.jsx)("h6",{className:"mb-3 font-weight-bold",children:"Item Request Form"}),Object(x.jsxs)("div",{className:"d-flex w-100",children:[Object(x.jsxs)("div",{className:"mr-1 w-50",children:[Object(x.jsx)("label",{className:"mb-0",children:" Company "}),Object(x.jsxs)("select",{className:"form-control form-control-sm mb-2",onChange:Te,name:"company_code",value:Ie.company_code,children:[Object(x.jsx)("option",{value:"",children:"Select the option"}),ce.map((function(e){return Object(x.jsxs)("option",{value:e.company_code,children:[" ",e.company_name," "]},e.company_code)}))]})]}),Object(x.jsxs)("div",{className:"ml-1 w-50",children:[Object(x.jsx)("label",{className:"mb-0",children:" Date "}),Object(x.jsx)("input",{type:"text",disabled:!0,className:"form-control form-control-sm mb-2",value:(new Date).toDateString()})]})]}),Object(x.jsxs)("div",{className:"d-flex w-100",children:[Object(x.jsxs)("div",{className:"mr-1 w-50",children:[Object(x.jsx)("label",{className:"mb-0",children:" Delivery / Work Location "}),Object(x.jsxs)("select",{className:"form-control form-control-sm mb-2",onChange:Te,name:"location_code",value:Ie.location_code,children:[Object(x.jsx)("option",{value:"",children:"Select the option"}),ee.map((function(e){return Object(x.jsxs)("option",{value:e.location_code,children:[" ",e.location_name," "]},e.location_code)}))]})]}),Object(x.jsx)("div",{className:"ml-1 w-50"})]}),Object(x.jsxs)("table",{className:"table table-sm mt-4",children:[Object(x.jsxs)("tr",{className:"bg-light",children:[Object(x.jsx)("th",{children:"Sr No."}),Object(x.jsx)("th",{children:"Item"}),Object(x.jsx)("th",{children:"Quantity"}),Object(x.jsx)("th",{children:"Reason / Details"})]}),re.map((function(e,t){return Object(x.jsx)(x.Fragment,{children:C&&parseInt(G)===parseInt(t)?Object(x.jsxs)("tr",{children:[Object(x.jsxs)("td",{children:[" ",G+1," "]}),Object(x.jsxs)("td",{className:"ItemColumn",children:[Object(x.jsx)("input",{onChange:Ge,value:Re.name,name:"name",className:"entities form-control form-control-sm"}),xe.length>0?Object(x.jsx)("div",{className:"StoreItemsList",children:xe.map((function(e,t){return Object(x.jsx)("p",{className:"StoreItemsListItem",onClick:function(){return Pe(t)},children:e.name},t)}))}):null]}),Object(x.jsx)("td",{children:Object(x.jsx)("input",{onChange:Ge,value:Re.required_quantity,name:"required_quantity",type:"number",className:"entities form-control form-control-sm"})}),Object(x.jsx)("td",{children:Object(x.jsx)("input",{onChange:Ge,value:Re.reason,name:"reason",type:"text",className:"entities form-control form-control-sm"})})]}):Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:t+1}),Object(x.jsx)("td",{children:e.name}),Object(x.jsx)("td",{children:e.required_quantity}),Object(x.jsxs)("td",{className:"icons",children:[e.reason,Object(x.jsxs)("span",{children:[Object(x.jsx)("i",{onClick:function(){return ze(t)},className:"lar la-edit"}),Object(x.jsx)("i",{onClick:function(){return We(t)},className:"lar la-trash-alt"})]})]})]})})})),C?null:Object(x.jsxs)("tr",{children:[Object(x.jsxs)("td",{children:[" ",re.length+1," "]}),Object(x.jsxs)("td",{className:"ItemColumn",children:[Object(x.jsx)("input",{onChange:Ge,value:Re.name,name:"name",className:"entities form-control form-control-sm"}),xe.length>0?Object(x.jsx)("div",{className:"StoreItemsList",children:xe.map((function(e,t){return Object(x.jsx)("p",{className:"StoreItemsListItem",onClick:function(){return Pe(t)},children:e.name},t)}))}):null]}),Object(x.jsx)("td",{children:Object(x.jsx)("input",{onChange:Ge,value:Re.required_quantity,name:"required_quantity",type:"number",className:"entities form-control form-control-sm"})}),Object(x.jsx)("td",{children:Object(x.jsx)("input",{onChange:Ge,value:Re.reason,name:"reason",type:"text",className:"entities form-control form-control-sm"})})]})]}),Object(x.jsx)("div",{className:"text-right",children:Object(x.jsx)("button",{className:"btn btn-sm cancle",onClick:He,type:"button",disabled:y,children:C?"update item":"add item"})})]})})]}):z.includes("index")?Object(x.jsxs)("div",{className:"items_container",children:[Object(x.jsxs)("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[Object(x.jsx)("div",{children:Object(x.jsx)("h5",{className:"mb-0 font-weight-bold",children:"Request Details"})}),Object(x.jsxs)("div",{className:"d-flex",children:[null!==qe.details?Object(x.jsxs)("select",{name:"request_action",id:"",className:"form-control mr-2 form-control-sm request_action",onChange:Te,children:[Object(x.jsx)("option",{value:"",children:"select"}),"sent"===qe.details.status&&qe.details.request_by===s.emp_id?Object(x.jsx)("option",{value:"cancel",children:"cancel"}):null,"delivery is in process"===qe.details.status&&qe.details.request_by===s.emp_id?Object(x.jsx)("option",{value:"delivered",children:"received"}):null,"sent"===qe.details.status&&qe.details.request_by!==s.emp_id?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("option",{value:"approve",children:"approve"}),Object(x.jsx)("option",{value:"reject",children:"reject"})]}):null,"approved"===qe.details.status&&qe.details.request_by!==s.emp_id&&(JSON.parse(s.access).includes(529)||JSON.parse(s.access).includes(1))?Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("option",{value:"generatepr",children:"generate purchase requisition"})}):null,qe.details.request_by!==s.emp_id&&(JSON.parse(s.access).includes(529)||JSON.parse(s.access).includes(1))&&("approved"===qe.details.status||"proceed to purchase requisition"===qe.details.status)?Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("option",{value:"deliver",children:"deliver"})}):null]}):null,""===Ie.request_action?null:Object(x.jsx)("button",{onClick:function(){var t;"cancel"===Ie.request_action?t=Object(x.jsxs)("form",{className:"w-100",onSubmit:function(e){return Ke(e,"/cancelitemrequest")},children:[Object(x.jsx)("p",{children:"Do you want to cancel the request?"}),Object(x.jsx)("textarea",{className:"form-control form-control-sm",required:!0,minLength:10,placeholder:"Give Reason",name:"remarks"}),Object(x.jsx)("div",{className:"text-right",children:Object(x.jsx)("button",{className:"btn btn-outline-dark btn-sm mt-2",children:"Confirm"})})]}):"approve"===Ie.request_action?t=Object(x.jsxs)("form",{className:"w-100",onSubmit:function(e){return Ke(e,"/approveitemrequest")},children:[Object(x.jsx)("p",{children:"Do you want to approve the request?"}),Object(x.jsx)("textarea",{className:"form-control form-control-sm",required:!0,minLength:10,placeholder:"Give Remarks",name:"remarks"}),Object(x.jsx)("div",{className:"text-right",children:Object(x.jsx)("button",{className:"btn btn-outline-dark btn-sm mt-2",children:"Confirm"})})]}):"reject"===Ie.request_action?t=Object(x.jsxs)("form",{className:"w-100",onSubmit:function(e){return Ke(e,"/rejectitemrequest")},children:[Object(x.jsx)("p",{children:"Do you want to reject the request?"}),Object(x.jsx)("textarea",{className:"form-control form-control-sm",required:!0,minLength:10,placeholder:"Give Reason",name:"remarks"}),Object(x.jsx)("div",{className:"text-right",children:Object(x.jsx)("button",{className:"btn btn-outline-dark btn-sm mt-2",children:"Confirm"})})]}):"generatepr"===Ie.request_action?t=Object(x.jsxs)("form",{className:"w-100",onSubmit:function(){return e.replace("/item_requests/generatepr/index="+qe.details.id)},children:[Object(x.jsx)("p",{children:"Do you want to generate purchase requisition of the request?"}),Object(x.jsx)("div",{className:"text-right",children:Object(x.jsx)("button",{className:"btn btn-outline-dark btn-sm mt-2",children:"Confirm"})})]}):"deliver"===Ie.request_action?t=Object(x.jsxs)("form",{className:"w-100",onSubmit:function(e){return Ke(e,"/deliveritemrequest")},children:[Object(x.jsx)("p",{children:"Are you going to deliver the items of this request?"}),Object(x.jsx)("div",{className:"text-right",children:Object(x.jsx)("button",{className:"btn btn-outline-dark btn-sm mt-2",children:"Confirm"})})]}):"delivered"===Ie.request_action&&(t=Object(x.jsxs)("form",{className:"w-100",onSubmit:function(e){return Ke(e,"/delivereditemrequest")},children:[Object(x.jsx)("p",{children:"Did you receive your required items?"}),Object(x.jsx)("div",{className:"text-right",children:Object(x.jsx)("button",{className:"btn btn-outline-dark btn-sm mt-2",children:"Confirm"})})]})),T(t),A(!0)},className:"btn btn-sm submit mr-2",children:"next"}),Object(x.jsx)(r.b,{to:"/item_requests",className:"btn btn-sm newBtn",children:"close"})]})]}),null!==qe.details?Object(x.jsx)("div",{className:"container-fluid px-0",children:Object(x.jsxs)("form",{children:[Object(x.jsx)("h5",{className:"mb-4 font-weight-bold text-center",children:"Item Request"}),Object(x.jsxs)("div",{className:"d-flex w-100",children:[Object(x.jsxs)("div",{className:"w-50 pr-1",children:[Object(x.jsxs)("div",{className:"d-flex align-items-center",children:[Object(x.jsx)("p",{className:"mb-0 w-50 font-weight-bold",children:"Requested By: "}),Object(x.jsx)("p",{className:"mb-0",children:qe.details.sender_name})]}),Object(x.jsxs)("div",{className:"d-flex align-items-center",children:[Object(x.jsx)("p",{className:"mb-0 w-50 font-weight-bold",children:"Company: "}),Object(x.jsx)("p",{className:"mb-0",children:qe.details.company_name})]}),Object(x.jsxs)("div",{className:"d-flex align-items-center",children:[Object(x.jsx)("p",{className:"mb-0 w-50 font-weight-bold",children:"Delivery / Work Location: "}),Object(x.jsx)("p",{className:"mb-0",children:qe.details.location_name})]}),Object(x.jsxs)("div",{className:"d-flex align-items-center",children:[Object(x.jsx)("p",{className:"mb-0 w-50 font-weight-bold",children:"Request Date: "}),Object(x.jsx)("p",{className:"mb-0",children:new Date(qe.details.request_date).toDateString()})]})]}),Object(x.jsxs)("div",{className:"w-50 pl-1",children:[Object(x.jsxs)("div",{className:"d-flex align-items-center",children:[Object(x.jsx)("p",{className:"mb-0 w-50 font-weight-bold",children:"Received By: "}),Object(x.jsx)("p",{className:"mb-0",children:qe.details.receiver_name})]}),Object(x.jsxs)("div",{className:"d-flex align-items-center",children:[Object(x.jsxs)("p",{className:"mb-0 w-50 font-weight-bold",style:{textTransform:"capitalize"},children:["canceled"===qe.details.status?"Cancelation ":"approved"===qe.details.status?"Approval ":"rejected"===qe.details.status?"Rejection ":null,"Date:"]}),Object(x.jsx)("p",{className:"mb-0",children:null===qe.details.acted_date?"Not Approve Yet":new Date(qe.details.acted_date).toDateString()})]}),Object(x.jsxs)("div",{className:"d-flex align-items-center",children:[Object(x.jsx)("p",{className:"mb-0 w-50 font-weight-bold",children:"Request Status: "}),Object(x.jsx)("p",{className:"mb-0 statusBox",children:qe.details.status})]})]})]}),Object(x.jsx)("div",{className:"my-3 logContainer",children:qe.details.request_by===s.emp_id?null:qe.logs.map((function(e){return Object(x.jsxs)("div",{className:"log",children:[Object(x.jsx)("span",{children:e.log}),Object(x.jsxs)("span",{children:[new Date(e.log_date).toDateString()," at ",e.log_time]})]},e.log_id)}))}),Object(x.jsxs)("table",{className:"table table-sm",children:[Object(x.jsxs)("tr",{children:[Object(x.jsx)("th",{children:"Sr No"}),Object(x.jsx)("th",{children:"Status"}),Object(x.jsx)("th",{children:"Item Name"}),Object(x.jsx)("th",{children:"Quantity"}),Object(x.jsx)("th",{children:"Reason / Details"})]}),qe.specifications.map((function(e,t){return Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:t+1}),Object(x.jsx)("td",{children:e.new_added?"new":e.edited?"edited":"default"}),JSON.parse(s.access).includes(529)||JSON.parse(s.access).includes(1)?Object(x.jsx)("td",{className:"underline",children:e.name}):Object(x.jsx)("td",{children:e.name}),Object(x.jsx)("td",{children:e.required_quantity}),Object(x.jsx)("td",{style:{wordBreak:"break-all"},children:e.reason})]})}))]}),null===qe.details.acted_date?null:Object(x.jsxs)("div",{className:"border-top pt-3",children:[Object(x.jsx)("h5",{className:"mb-0 font-weight-bold",children:"Review"}),Object(x.jsx)("br",{}),Object(x.jsx)("div",{className:"d-flex",children:Object(x.jsxs)("div",{className:"w-50 d-flex",children:[Object(x.jsx)("div",{className:"w-50 font-weight-bold",children:"From:"}),Object(x.jsx)("div",{className:"w-50",children:qe.details.sender_name})]})}),Object(x.jsx)("div",{className:"d-flex",children:Object(x.jsxs)("div",{className:"w-50 d-flex",children:[Object(x.jsx)("div",{className:"w-50 font-weight-bold",children:"To:"}),Object(x.jsx)("div",{className:"w-50",children:qe.details.receiver_name})]})}),Object(x.jsx)("div",{className:"d-flex",children:Object(x.jsxs)("div",{className:"w-50 d-flex",children:[Object(x.jsxs)("div",{className:"w-50 font-weight-bold",children:[qe.details.receiver_name.split(" ").shift(),"'s Remarks:"]}),Object(x.jsx)("div",{className:"w-50",children:qe.details.remarks})]})})]}),Object(x.jsx)("br",{}),null===qe.details.pr_request_generate_date?null:Object(x.jsxs)("div",{className:"border-top pt-3",children:[Object(x.jsx)("h5",{className:"mb-0 font-weight-bold",children:"Requisition"}),Object(x.jsx)("br",{}),Object(x.jsx)("div",{className:"d-flex",children:Object(x.jsxs)("div",{className:"w-50 d-flex",children:[Object(x.jsx)("div",{className:"w-50 font-weight-bold",children:"From:"}),Object(x.jsx)("div",{className:"w-50",children:qe.details.requisition_name})]})}),Object(x.jsx)("div",{className:"d-flex",children:Object(x.jsxs)("div",{className:"w-50 d-flex",children:[Object(x.jsx)("div",{className:"w-50 font-weight-bold",children:"Requisition Date:"}),Object(x.jsx)("div",{className:"w-50",children:new Date(qe.details.pr_request_generate_date).toDateString()})]})}),Object(x.jsx)("div",{className:"d-flex",children:Object(x.jsxs)("div",{className:"w-50 d-flex",children:[Object(x.jsx)("div",{className:"w-50 font-weight-bold",children:"Requisition Time:"}),Object(x.jsx)("div",{className:"w-50",children:qe.details.pr_request_generate_time})]})})]}),Object(x.jsx)("br",{}),null===qe.details.delivery_date?null:Object(x.jsxs)("div",{className:"border-top pt-3",children:[Object(x.jsx)("h5",{className:"mb-0 font-weight-bold",children:"Delivery"}),Object(x.jsx)("br",{}),Object(x.jsx)("div",{className:"d-flex",children:Object(x.jsxs)("div",{className:"w-50 d-flex",children:[Object(x.jsx)("div",{className:"w-50 font-weight-bold",children:"Delivery Date:"}),Object(x.jsx)("div",{className:"w-50",children:new Date(qe.details.delivery_date).toDateString()})]})}),Object(x.jsx)("div",{className:"d-flex",children:Object(x.jsxs)("div",{className:"w-50 d-flex",children:[Object(x.jsx)("div",{className:"w-50 font-weight-bold",children:"Delivery Time:"}),Object(x.jsx)("div",{className:"w-50",children:qe.details.delivery_time})]})})]})]})}):null]}):Object(x.jsxs)("div",{className:"items_container",children:[Object(x.jsxs)("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[Object(x.jsx)("div",{children:Object(x.jsx)("h5",{className:"mb-0 font-weight-bold",children:"Item Requests"})}),Object(x.jsx)("div",{children:Object(x.jsx)(r.b,{to:"/item_requests/new",className:"btn btn-sm newBtn",children:"new"})})]}),Object(x.jsxs)("table",{className:"table table-sm",children:[Object(x.jsx)("thead",{children:Object(x.jsxs)("tr",{children:[Object(x.jsx)("th",{children:" Request ID "}),Object(x.jsx)("th",{children:" Request By "}),Object(x.jsx)("th",{children:" Request To "}),Object(x.jsx)("th",{children:" Company "}),Object(x.jsx)("th",{children:" Date Time "}),Object(x.jsx)("th",{children:" Status "})]})}),Object(x.jsx)("tbody",{children:V.map((function(t,s){var n=new Date(t.request_date);return console.log(t),Object(x.jsxs)("tr",{className:"hover",onClick:function(){return function(t){e.replace("/item_requests/view/index="+t)}(t.id)},children:[Object(x.jsxs)("td",{children:[" ",t.id," "]}),Object(x.jsxs)("td",{children:[" ",t.sender_name," "]}),Object(x.jsxs)("td",{children:[" ",t.receiver_name," "]}),Object(x.jsxs)("td",{children:[" ",t.company_name," ",Object(x.jsx)("br",{})," ",t.location_name," "]}),Object(x.jsxs)("td",{children:[" ",n?n.toDateString():null," ",Object(x.jsx)("br",{})," ",t.request_time," "]}),Object(x.jsx)("td",{children:Object(x.jsx)("span",{className:"statusBox",children:t.status})})]},s)}))})]})]}),Object(x.jsx)(j.a,{})]})}},558:function(e,t,s){},88:function(e,t,s){"use strict";s(1),s(89);var n=s(0);t.a=function(e){return Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)("div",{className:"Attandence_Request_Div",style:{display:e.show?"flex":"none"},children:[Object(n.jsx)("div",{className:"dark",onClick:e.Hide}),Object(n.jsx)("div",{style:{animationDelay:"0.1".toString()+"s"},className:e.show?"Attandence_Request_Div_Content Attandence_Request_Div_Content2":"Attandence_Request_Div_Content",children:e.content})]})})}},89:function(e,t,s){}}]);