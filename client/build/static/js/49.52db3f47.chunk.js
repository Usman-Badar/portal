(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[49],{577:function(e,t,s){"use strict";s.r(t);var a=s(24),c=s(9),n=s(4),i=s(1),l=(s(578),s(3)),d=s(17),o=s(25),r=s(11),b=s(139),j=s(93),m=s(0);t.default=function(){var e=Object(l.g)(),t=Object(o.c)((function(e){return e.EmpAuth.EmployeeData})),s=Object(i.useState)(Object(m.jsx)(m.Fragment,{})),u=Object(n.a)(s,2),h=u[0],O=u[1],x=Object(i.useState)(!1),_=Object(n.a)(x,2),p=_[0],f=_[1],N=Object(i.useState)(!0),v=Object(n.a)(N,2),g=v[0],S=v[1],w=Object(i.useState)(),y=Object(n.a)(w,2),I=y[0],k=y[1],q=Object(i.useState)(""),J=Object(n.a)(q,2),C=J[0],D=J[1],E=Object(i.useState)([]),A=Object(n.a)(E,2),F=A[0],R=A[1],Y=Object(i.useState)([]),Q=Object(n.a)(Y,2),H=Q[0],B=Q[1],T=Object(i.useState)([]),U=Object(n.a)(T,2),z=U[0],G=U[1],K=Object(i.useState)({name:"",quantity:0,lock_edit:"N",asset_id:0,sub_asset_id:0}),L=Object(n.a)(K,2),M=L[0],P=L[1];Object(i.useEffect)((function(){""===M.name||0===M.quantity||""===M.lock_edit||0===M.asset_id||0===M.sub_asset_id||isNaN(M.quantity)?S(!0):S(!1)}),[M.name,M.quantity,M.lock_edit,M.asset_id,M.sub_asset_id]),Object(i.useEffect)((function(){W(),V()}),[]),Object(i.useEffect)((function(){D(window.location.href.split("/").pop())}),[window.location.href.split("/").pop()]),setTimeout((function(){b.a.rebuild()}),1e3);var V=function(){r.a.get("/getallassets").then((function(e){B(e.data)})).catch((function(e){console.log(e)}))},W=function(){r.a.get("/store/items").then((function(e){if(R(e.data),k(e.data.length+1),window.location.href.split("/").pop().includes("index")){var t,s,a=parseInt(window.location.href.split("/").pop().split("=").pop());r.a.post("/getallsubassets",{asset_id:e.data[a].asset_id}).then((function(c){r.a.get("/getallassets").then((function(n){for(var i=0;i<n.data.length;i++)parseInt(n.data[i].asset_id)===parseInt(e.data[a].asset_id)&&(t=parseInt(n.data[i].asset_id));for(var l=0;l<c.data.length;l++)parseInt(c.data[l].sub_asset_id)===parseInt(e.data[a].sub_asset_id)&&(s=parseInt(c.data[l].sub_asset_id));P({name:e.data[a].item_name,quantity:e.data[a].availble_quantity,lock_edit:e.data[a].lock_edit,asset_id:t,sub_asset_id:s}),k(e.data[a].id),G(c.data)})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))}})).catch((function(e){console.log(e)}))},X=function(){f(!p)},Z=function(e){var t,s=e.target,n=s.name,i=s.value,l=Object(c.a)(Object(c.a)({},M),{},Object(a.a)({},n,i));P(l),"asset_id"===n&&(t=i,r.a.post("/getallsubassets",{asset_id:t}).then((function(e){return G(e.data),e.data})).catch((function(e){console.log(e)})))},$=function(t){e.replace("/store/edit/index="+t)},ee=function(e){O(Object(m.jsxs)("form",{onSubmit:function(t){return te(t,e)},children:[Object(m.jsx)("p",{children:"Do you want remove this item from the store?"}),Object(m.jsx)("div",{className:"text-right",children:Object(m.jsx)("button",{className:"btn btn-sm btn-danger",type:"submit",children:"yes"})})]})),X()},te=function(e,t){e.preventDefault(),r.a.post("/store/remove",{id:F[t].id,date_time:(new Date).toString(),remove_by:sessionStorage.getItem("EmpID"),remove_emp_name:sessionStorage.getItem("name")}).then((function(){f(!1),W()})).catch((function(e){console.log(e)}))};return Object(m.jsxs)(m.Fragment,{children:["new"===C||C.includes("index")?Object(m.jsxs)("div",{className:"items_container",children:[Object(m.jsxs)("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[Object(m.jsx)("div",{children:"new"===C?Object(m.jsx)("h5",{className:"mb-0 font-weight-bold",children:"Enter New Store Items"}):Object(m.jsx)("h5",{className:"mb-0 font-weight-bold",children:"Update Existing Store Items"})}),Object(m.jsx)("div",{children:Object(m.jsx)(d.b,{to:"/store/items",className:"btn btn-sm cancle",children:"cancel"})})]}),Object(m.jsx)("div",{className:"container-fluid px-0",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-lg-4 col-md-6 col-sm-12",children:Object(m.jsxs)("table",{className:"table table-sm",children:[Object(m.jsx)("thead",{children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{children:" Item Name "}),Object(m.jsx)("th",{children:" Available Quantity "})]})}),Object(m.jsx)("tbody",{children:F.map((function(e,s){return Object(m.jsxs)("tr",{children:[Object(m.jsxs)("td",{children:[" ",e.item_name," "]}),Object(m.jsxs)("td",{style:{position:"relative"},children:[e.availble_quantity,JSON.parse(t.access).includes(1)||JSON.parse(t.access).includes(525)||"Y"===e.lock_edit?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("i",{onClick:function(){return $(s)},"data-tip":"Edit",className:"lar la-edit"}),Object(m.jsx)("i",{onClick:function(){return ee(s)},"data-tip":"Remove",className:"las la-trash-alt"})]}):null]})]},s)}))})]})}),Object(m.jsx)("div",{className:"col-lg-8 col-md-6 col-sm-12",children:Object(m.jsxs)("form",{className:"p-3 rounded",onSubmit:function(t){t.preventDefault(),window.location.href.split("/").pop().includes("index")?r.a.post("/store/edit",{id:I,name:M.name,quantity:M.quantity,lock_edit:M.lock_edit,sub_asset_id:M.sub_asset_id,asset_id:M.asset_id,date_time:(new Date).toString(),edit_by:sessionStorage.getItem("EmpID"),edit_emp_name:sessionStorage.getItem("name")}).then((function(){e.replace("/store/items")})).catch((function(e){console.log(e)})):r.a.post("/store/new",{name:M.name,quantity:M.quantity,lock_edit:M.lock_edit,sub_asset_id:M.sub_asset_id,asset_id:M.asset_id,date_time:(new Date).toString(),insert_by:sessionStorage.getItem("EmpID")}).then((function(){e.replace("/store/items")})).catch((function(e){console.log(e)}))},children:[Object(m.jsx)("h6",{className:"mb-3 font-weight-bold",children:"Items Form"}),Object(m.jsxs)("div",{className:"d-flex w-100",children:[Object(m.jsxs)("div",{className:"mr-1 w-50",children:[Object(m.jsx)("label",{className:"mb-0",children:" Item ID "}),Object(m.jsx)("input",{type:"text",className:"form-control form-control-sm mb-2",value:I,disabled:!0})]}),Object(m.jsxs)("div",{className:"ml-1 w-50",children:[Object(m.jsx)("label",{className:"mb-0",children:" Item Name "}),Object(m.jsx)("input",{disabled:!(JSON.parse(t.access).includes(1)||JSON.parse(t.access).includes(525)||JSON.parse(t.access).includes(528)),type:"text",onChange:Z,className:"form-control form-control-sm mb-2",value:M.name,name:"name",required:!0})]})]}),Object(m.jsxs)("div",{className:"d-flex w-100",children:[Object(m.jsxs)("div",{className:"mr-1 w-50",children:[Object(m.jsx)("label",{className:"mb-0",children:" Available Quantity "}),Object(m.jsx)("input",{type:"text",onChange:Z,className:"form-control form-control-sm mb-2",value:M.quantity,name:"quantity",required:!0})]}),Object(m.jsxs)("div",{className:"ml-1 w-50",children:[Object(m.jsx)("label",{className:"mb-0",children:" Editable "}),Object(m.jsxs)("select",{className:"form-control form-control-sm mb-2",onChange:Z,name:"lock_edit",value:M.lock_edit,disabled:!(JSON.parse(t.access).includes(1)||JSON.parse(t.access).includes(525)||JSON.parse(t.access).includes(528)),children:[Object(m.jsx)("option",{value:"N",children:"N"}),Object(m.jsx)("option",{value:"Y",children:"Y"})]})]})]}),Object(m.jsxs)("div",{className:"d-flex w-100",children:[Object(m.jsxs)("div",{className:"mr-1 w-50",children:[Object(m.jsx)("label",{className:"mb-0",children:" Category "}),Object(m.jsxs)("select",{disabled:!(JSON.parse(t.access).includes(1)||JSON.parse(t.access).includes(525)||JSON.parse(t.access).includes(528)),className:"form-control form-control-sm mb-2",onChange:Z,name:"asset_id",value:M.asset_id,children:[Object(m.jsx)("option",{value:0,children:"Select the option"}),H.map((function(e){return Object(m.jsxs)("option",{value:e.asset_id,children:[" ",e.asset_name," "]},e.asset_id)}))]})]}),Object(m.jsxs)("div",{className:"ml-1 w-50",children:[Object(m.jsx)("label",{className:"mb-0",children:" Sub Category "}),Object(m.jsxs)("select",{disabled:!(JSON.parse(t.access).includes(1)||JSON.parse(t.access).includes(525)||JSON.parse(t.access).includes(528)),className:"form-control form-control-sm mb-2",onChange:Z,name:"sub_asset_id",value:M.sub_asset_id,children:[Object(m.jsx)("option",{value:0,children:"Select the option"}),z.map((function(e){return Object(m.jsxs)("option",{value:e.sub_asset_id,children:[" ",e.sub_asset_name," "]},e.sub_asset_id)}))]})]})]}),Object(m.jsx)("div",{className:"text-right",children:Object(m.jsx)("button",{className:"btn btn-sm submit",type:"submit",disabled:g,children:"new"===C?"add":"update"})})]})})]})})]}):Object(m.jsxs)("div",{className:"items_container",children:[Object(m.jsxs)("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[Object(m.jsx)("div",{children:Object(m.jsx)("h5",{className:"mb-0 font-weight-bold",children:"Store Items"})}),Object(m.jsx)("div",{children:JSON.parse(t.access).includes(1)||JSON.parse(t.access).includes(528)?Object(m.jsx)(d.b,{to:"/store/new",className:"btn btn-sm newBtn",children:"new"}):null})]}),Object(m.jsxs)("table",{className:"table table-sm",children:[Object(m.jsx)("thead",{children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{children:" Item ID "}),Object(m.jsx)("th",{children:" Item Name "}),Object(m.jsx)("th",{children:" Available Quantity "}),Object(m.jsx)("th",{children:" Category "}),Object(m.jsx)("th",{children:" Sub Category "}),Object(m.jsx)("th",{children:" Editable "})]})}),Object(m.jsx)("tbody",{children:F.map((function(e,s){return Object(m.jsxs)("tr",{children:[Object(m.jsxs)("td",{children:[" ",e.id," "]}),Object(m.jsxs)("td",{children:[" ",e.item_name," "]}),Object(m.jsxs)("td",{children:[" ",e.availble_quantity," "]}),Object(m.jsxs)("td",{children:[" ",e.asset_name," "]}),Object(m.jsxs)("td",{children:[" ",e.sub_asset_name," "]}),Object(m.jsxs)("td",{style:{position:"relative"},children:[e.lock_edit,JSON.parse(t.access).includes(1)||JSON.parse(t.access).includes(525)||"Y"===e.lock_edit?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("i",{onClick:function(){return $(s)},"data-tip":"Edit",className:"lar la-edit"}),Object(m.jsx)("i",{onClick:function(){return ee(s)},"data-tip":"Remove",className:"las la-trash-alt"})]}):null]})]},s)}))})]})]}),Object(m.jsx)(b.a,{}),Object(m.jsx)(j.a,{show:p,Hide:X,content:h})]})}},578:function(e,t,s){},93:function(e,t,s){"use strict";s(1),s(99);var a=s(0);t.a=function(e){return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("div",{className:"Attandence_Request_Div",style:{display:e.show?"flex":"none"},children:[Object(a.jsx)("div",{className:"dark",onClick:e.Hide}),Object(a.jsx)("div",{style:{animationDelay:"0.1".toString()+"s"},className:e.show?"Attandence_Request_Div_Content Attandence_Request_Div_Content2":"Attandence_Request_Div_Content",children:e.content})]})})}},99:function(e,t,s){}}]);
//# sourceMappingURL=49.52db3f47.chunk.js.map