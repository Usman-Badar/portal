(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[33,104],{162:function(e,t,n){"use strict";n.r(t),n.d(t,"Mail",(function(){return c}));var s=n(1),a=(n(166),n(0)),c=function(e){var t=e.data,n=Object(s.useRef)();return Object(a.jsxs)("form",{className:"d-none",ref:n,onSubmit:function(e){e.preventDefault()},children:[Object(a.jsx)("label",{children:"Receiver"}),Object(a.jsx)("input",{required:!0,type:"text",name:"to_name",defaultValue:t.receiver,readOnly:!0}),Object(a.jsx)("label",{children:"Gender"}),Object(a.jsxs)("select",{required:!0,name:"gender",defaultValue:t.gender,children:[Object(a.jsx)("option",{value:"Sir",children:"Sir"}),Object(a.jsx)("option",{value:"Mam",children:"Mam"})]}),Object(a.jsx)("label",{children:"Subject"}),Object(a.jsx)("input",{required:!0,type:"text",name:"subject",defaultValue:t.subject,readOnly:!0}),Object(a.jsx)("label",{children:"Email"}),Object(a.jsx)("input",{required:!0,type:"email",name:"send_to",defaultValue:t.send_to,readOnly:!0}),Object(a.jsx)("label",{children:"Message"}),Object(a.jsx)("textarea",{required:!0,name:"message",defaultValue:t.message}),Object(a.jsx)("input",{type:"submit",value:"Send",id:"mail_form"})]})};t.default=c},166:function(e,t,n){"use strict";n(84)},526:function(e,t,n){"use strict";n.r(t);var s=n(24),a=n(9),c=n(4),i=n(1),r=(n(527),n(3)),l=n(17),o=n(79),d=n.n(o),j=n(82),m=(n(83),n(11)),u=n(98),b=n(25),_=n(88),h=n(162),O=n(0);t.default=function(){var e=Object(r.g)(),t=Object(b.c)((function(e){return e.EmpAuth.Relations})),n=Object(b.c)((function(e){return e.EmpAuth.EmployeeData})),o=Object(i.useState)([]),f=Object(c.a)(o,2),g=f[0],v=f[1],N=Object(i.useState)(!1),q=Object(c.a)(N,2),y=q[0],w=q[1],S=Object(i.useState)(!1),C=Object(c.a)(S,2),D=C[0],I=C[1],R=Object(i.useState)(!1),A=Object(c.a)(R,2),T=A[0],E=A[1],F=Object(i.useState)([]),M=Object(c.a)(F,2),B=M[0],H=M[1],V=Object(i.useState)({date:(new Date).toString(),reason:"",submit_to:"",request_type:"",request_for:""}),L=Object(c.a)(V,2),J=L[0],U=L[1],P=Object(i.useState)({subject:"",send_to:"",gender:"",receiver:"",message:""}),G=Object(c.a)(P,2),Y=G[0],z=G[1],K=Object(i.useState)(!1),Q=Object(c.a)(K,2),W=Q[0],X=Q[1],Z=Object(i.useState)(null),$=Object(c.a)(Z,2),ee=$[0],te=$[1],ne=Object(i.useState)(!1),se=Object(c.a)(ne,2),ae=se[0],ce=se[1],ie=Object(i.useState)(),re=Object(c.a)(ie,2),le=re[0],oe=re[1],de=Object(i.useState)({time_in:"",time_out:"",break_in:"",break_out:""}),je=Object(c.a)(de,2),me=je[0],ue=je[1],be=Object(i.useState)({time_in:"",time_out:"",break_in:"",break_out:"",time_in_check:!1,time_out_check:!1,break_in_check:!1,break_out_check:!1}),_e=Object(c.a)(be,2),he=_e[0],Oe=_e[1],pe=Object(i.useState)({emp_info:{},request_info:{},reviews:[]}),xe=Object(c.a)(pe,2),ke=xe[0],fe=xe[1],ge=Object(i.useState)({request_action:"",request_send_to:""}),ve=Object(c.a)(ge,2),Ne=ve[0],qe=ve[1],ye=Object(i.useState)({mark_time_in:!1,mark_time_out:!1,mark_break_in:!1,mark_break_out:!1}),we=Object(c.a)(ye,2),Se=we[0],Ce=we[1],De=function(e){var t,n,c=e.target,i=c.value,r=c.name,l=c.checked;r.includes("check")?(n=l,l?d()("#"+r).prop("disabled",!0).val(""):d()("#"+r).prop("disabled",!1)):n=i,t=Object(a.a)(Object(a.a)({},he),{},Object(s.a)({},r,n)),Oe(t)};Object(i.useEffect)((function(){var e="time_in";Se.mark_time_in?Se.mark_time_out?Se.mark_break_in?Se.mark_break_out||(e="break_out"):e="break_in":e="time_out":e="time_in";var t=Object(a.a)(Object(a.a)({},he),{},Object(s.a)({},e,""));Oe(t)}),[Se.mark_time_in,Se.mark_time_out,Se.mark_break_in,Se.mark_break_out]),Object(i.useEffect)((function(){u.a.on("newattendancerequest",(function(){w(!y)})),Ie()}),[]),Object(i.useEffect)((function(){"update"===J.request_type||"insert"===J.request_type?Re():(Ce({mark_time_in:!1,mark_time_out:!1,mark_break_in:!1,mark_break_out:!1}),Oe({time_in:"",time_out:"",break_in:"",break_out:"",time_in_check:!1,time_out_check:!1,break_in_check:!1,break_out_check:!1}))}),[J.request_type,J.date]);var Ie=function(){m.a.get("/get_enabled_att_request_dates").then((function(e){H(e.data)})).catch((function(e){console.log(e)}))},Re=function(){m.a.post("/getemptimein",{emp_id:sessionStorage.getItem("EmpID"),date_time:J.date}).then((function(e){e.data.length>0?(ue(e.data[0]),Oe(Object(a.a)(Object(a.a)({},he),{},{time_in:null===e.data[0].time_in?null:e.data[0].time_in,time_out:null===e.data[0].time_out?null:e.data[0].time_out,break_in:null===e.data[0].break_in?null:e.data[0].break_in,break_out:null===e.data[0].break_out?null:e.data[0].break_out})),E(!0)):E(!1)})).catch((function(e){console.log(e)}))};Object(i.useEffect)((function(){m.a.post("/getallattendancerequests",{emp_id:sessionStorage.getItem("EmpID")}).then((function(e){v(e.data)})).catch((function(e){console.log(e)}))}),[y]),Object(i.useEffect)((function(){var e=parseInt(window.location.href.split("/").pop().split("_").shift());isNaN(e)||Ae(e),"new"===window.location.href.split("/").pop()&&I(!0)}),[window.location.href.split("/").pop()]),Object(i.useEffect)((function(){ke.reviews[0]&&Me(ke.reviews[0])}),[ke.reviews.length]),Object(i.useEffect)((function(){""!==Y.subject&&""!==Y.send_to&&""!==Y.gender&&""!==Y.receiver&&""!==Y.message&&d()("#mail_form").trigger("click")}),[Y.subject,Y.send_to,Y.gender,Y.receiver,Y.message]);var Ae=function(e){m.a.post("/getattendancerequestdetails",{request_id:e}).then((function(e){fe({emp_info:e.data[2][0],request_info:e.data[0][0],reviews:e.data[1]}),X(!0),I(!1)})).catch((function(e){console.log(e)}))},Te=new Date,Ee=function(e){var n=e.target,c=n.value,i=n.name,r={};if(r="mark"===c||"approve"===c||"reject "===c?Object(a.a)(Object(a.a)({},Ne),{},Object(s.a)({request_send_to:""},i,c)):Object(a.a)(Object(a.a)({},Ne),{},Object(s.a)({},i,c)),"request_send_to"===i){for(var l,o,d=0;d<t.length;d++)parseInt(t[d].sr)===parseInt(c)&&(l=t[d].email,o=t[d].name);z(Object(a.a)(Object(a.a)({},Y),{},{send_to:l,receiver:o}))}qe(r)},Fe=function(t,n,s){t.preventDefault();var a=document.getElementById("record_status");m.a.post("/performactionforattrequest",{request_id:s,id:n,emp_id:sessionStorage.getItem("EmpID"),date_time:(new Date).toString(),status:Ne.request_action,forward_to:Ne.request_send_to,remarks:t.target.remarks.value,time_in:he.time_in,time_out:he.time_out,break_in:he.break_in,break_out:he.break_out,time_in_check:he.time_in_check,time_out_check:he.time_out_check,break_in_check:he.break_in_check,break_out_check:he.break_out_check,request_type:ke.request_info.request_type,request_by:ke.reviews[0].request_by,record_date:new Date(ke.request_info.date).toString(),record_status:a?a.value:null}).then((function(){fe({emp_info:{},request_info:{},reviews:[]}),qe({request_action:"",request_send_to:""}),X(!1),I(!1),ce(!1);if("null"!==Ne.request_send_to&&""!==Ne.request_send_to&&null!==Ne.request_send_to){var t=new FormData;t.append("eventID",4),t.append("receiverID",Ne.request_send_to),t.append("senderID",sessionStorage.getItem("EmpID")),t.append("Title",sessionStorage.getItem("name")),t.append("NotificationBody",sessionStorage.getItem("name")+" put forward an attendance request on the portal."),m.a.post("/newnotification",t).then((function(){m.a.post("/sendmail",t).then((function(){}))}))}var n=new FormData;n.append("eventID",4),n.append("receiverID",ke.reviews[0].request_by),n.append("senderID",sessionStorage.getItem("EmpID")),n.append("Title",sessionStorage.getItem("name")),n.append("NotificationBody","Your attendance request on the portal is now "+Ne.request_action+"."),m.a.post("/newnotification",n).then((function(){m.a.post("/sendmail",n).then((function(){}))})),e.replace("/attendance_request")})).catch((function(e){console.log(e)}))},Me=function(e){Oe(Object(a.a)(Object(a.a)({},he),{},{time_in:e.time_in,time_out:e.time_out,break_in:e.break_in,break_out:e.break_out})),setTimeout((function(){null!==e.time_in&&"null"!==e.time_in||(d()("#time_in_check").prop("disabled",!0),d()("input[type=checkbox][name=time_in_check]").prop("checked",!0)),null!==e.time_out&&"null"!==e.time_out||(d()("#time_out_check").prop("disabled",!0),d()("input[type=checkbox][name=time_out_check]").prop("checked",!0)),null!==e.break_in&&"null"!==e.break_in||(d()("#break_in_check").prop("disabled",!0),d()("input[type=checkbox][name=break_in_check]").prop("checked",!0)),null!==e.break_out&&"null"!==e.break_out||(d()("#break_out_check").prop("disabled",!0),d()("input[type=checkbox][name=break_out_check]").prop("checked",!0))}),150)};return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(h.default,{data:Y}),Object(O.jsx)(_.a,{show:ae,Hide:function(){ce(!ae)},content:le}),Object(O.jsxs)("div",{className:"Attandence_Request",children:[Object(O.jsxs)("div",{className:"Attandence_Request_Top",children:[Object(O.jsx)("div",{className:"Attandence_Request_Top_left",children:Object(O.jsx)("div",{className:"dropdown_filter",children:Object(O.jsx)("p",{className:"font-weight-bold",children:"Attandence Requests"})})}),Object(O.jsxs)("div",{className:"Attandence_Request_Top_right",children:[ke.emp_info.name?g.map((function(e){if(parseInt(window.location.href.split("/").pop().split("_").pop())===e.id){var s=function(e){return n.access&&a()&&JSON.parse(n.access).includes(101)&&e.push(Object(O.jsx)("option",{value:"mark",children:"Mark"})),e},a=function(){for(var e=!0,t=0;t<ke.reviews.length;t++)"cancel"!==ke.reviews[t].request_status&&"mark"!==ke.reviews[t].request_status&&"mark_&_forward"!==ke.reviews[t].request_status||(e=!1);return e},c=[];return parseInt(e.request_by)===parseInt(sessionStorage.getItem("EmpID"))?a()&&(c.push(Object(O.jsx)("option",{value:"cancel",children:"Cancel"})),s(c)):"sent"===e.request_status?(s(c),c.push(Object(O.jsx)("option",{value:"reject",children:"Reject"}))):"approve & forward"===e.request_status||"approve"===e.request_status?s(c):e.request_status,Object(O.jsxs)(O.Fragment,{children:["mark_&_forward"===e.request_status?null:Object(O.jsxs)("select",{name:"request_action",id:"",className:"form-control col-sm-3 mr-2 form-control-sm request_action",onChange:Ee,children:[Object(O.jsx)("option",{value:"",children:"select"}),c]}),"approve_&_forward"===Ne.request_action||"reject_&_forward"===Ne.request_action||"mark_&_forward"===Ne.request_action?Object(O.jsxs)("select",{name:"request_send_to",id:"",className:"form-control col-sm-3 mr-2 form-control-sm request_send_to",onChange:Ee,children:[Object(O.jsx)("option",{value:"",children:"select"}),t.map((function(e,t){var n;return("all"===e.category||e.category.includes("attendance_request"))&&(n=Object(O.jsxs)("option",{value:e.sr,children:[" ",e.name," "]},t)),n}))]}):null,""===Ne.request_action?null:0!==Ne.request_send_to||"approve_&_forward"!==Ne.request_action&&"reject_&_forward"!==Ne.request_action?Object(O.jsx)("div",{onClick:function(){return t=e.id,n=e.request_id,oe(Object(O.jsxs)("form",{className:"w-100 text-right",onSubmit:function(e){return Fe(e,t,n)},children:[Object(O.jsx)("textarea",{name:"remarks",className:"form-control",placeholder:"remarks",required:!0,minLength:"10"}),Object(O.jsx)("button",{className:"btn btn-outline-dark btn-sm mt-2",children:"submit"})]})),void ce(!0);var t,n},className:"btn sendbutton",children:"Send"}):null]})}return!1})):null,Object(O.jsxs)(l.c,{to:"/attendance_request/new",className:"btn New_button",children:[" ",Object(O.jsx)("i",{class:"las la-plus"})," ",Object(O.jsx)("p",{children:"New"})]})]})]}),D?Object(O.jsx)(x,{OnChangeHandler:function(e){var t,n=e.target,c=n.value,i=n.name;"request_type"===i?t=Object(a.a)(Object(a.a)({},J),{},Object(s.a)({new_time:"",current_time:""},i,c)):"c"===i||(t=Object(a.a)(Object(a.a)({},J),{},Object(s.a)({},i,c))),U(t)},OnTimeChange:De,onChangeCheck:function(e){var t,n=e.target,c=n.name;n.checked?(d()("#"+c).prop("disabled",!0).val(""),t=null):(d()("#"+c).prop("disabled",!1),t="");var i=Object(a.a)(Object(a.a)({},he),{},Object(s.a)({},c,t));Oe(i)},onUploadSnap:function(e){var t=new FileReader;t.onload=function(){2===t.readyState&&te(t.result)},t.readAsDataURL(e.target.files[0])},onMarkChange:function(e){var t=e.target,n=t.checked,c=t.name;c.split("_").shift();var i=Object(a.a)(Object(a.a)({},Se),{},Object(s.a)({},c,n));Ce(i)},closebutton:function(){te(null)},Submit:function(t){if(t.preventDefault(),function(){var e=!0;return"insert"===J.request_type&&T&&(alert("Record of this date is already exist. Select request type [Update]"),e=!1),"insert"!==J.request_type||Se.mark_time_in||(alert("Iime IN must be checked when request type is [Insert]"),e=!1),"insert"!==J.request_type||!Se.mark_time_in||""!==he.time_in&&null!==he.time_in||(alert("Iime IN must be entered when request type is [INSERT]"),e=!1),Se.mark_time_in&&Se.mark_time_out&&he.time_out<he.time_in&&(alert("time_out should be greater than time_in"),e=!1),Se.mark_break_in&&Se.mark_break_out&&he.break_out<he.break_in&&(alert("break_out should be greater than break_in"),e=!1),Se.mark_time_out&&Se.mark_break_out&&he.break_out>he.time_out&&(alert("break_out should be less than time_out"),e=!1),Se.mark_time_out&&Se.mark_break_in&&he.break_in>he.time_out&&(alert("break_in should be less than time_out"),e=!1),Se.mark_time_in&&Se.mark_break_in&&he.break_in<he.time_in&&(alert("break_in should be greater than time_in"),e=!1),Se.mark_time_in&&Se.mark_break_out&&he.break_out<he.time_in&&(alert("break_out should be greater than time_in"),e=!1),e}()){d()("button[type=submit]").prop("disabled",!0);var n=new FormData;n.append("time_in",he.time_in),n.append("time_out",he.time_out),n.append("break_in",he.break_in),n.append("break_out",he.break_out),n.append("date_time",(new Date).toString()),n.append("request_by",sessionStorage.getItem("EmpID")),n.append("request_to",J.submit_to),n.append("request_type",J.request_type),n.append("reason",J.reason),n.append("record_date",J.date),n.append("snapshot",ee),n.append("prev_attendance",JSON.stringify(me)),m.a.post("/newattendancerequest",n).then((function(){var t,n;t="Request sent",n="top-center",j.b.dark(t.toString(),{position:n,autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),I(!1),U({date:"",reason:"",submit_to:"",request_type:"",request_for:"",current_time:"",new_time:""}),X(!1),te(null),ue({time_in:"",time_out:"",break_in:"",break_out:""}),Oe({time_in:"",time_out:"",break_in:"",break_out:"",time_in_check:!1,time_out_check:!1,break_in_check:!1,break_out_check:!1}),z(Object(a.a)(Object(a.a)({},Y),{},{subject:"New Attendance Request",gender:"Sir",message:sessionStorage.getItem("name")+" has sent a new repair request."})),d()("a[type=reset]").trigger("click");var s=new FormData;s.append("eventID",4),s.append("whatsapp",!0),s.append("receiverID",J.submit_to),s.append("senderID",sessionStorage.getItem("EmpID")),s.append("Title",sessionStorage.getItem("name")),s.append("NotificationBody",sessionStorage.getItem("name")+" has sent an attendance request on the portal."),m.a.post("/newnotification",s).then((function(){m.a.post("/sendmail",s).then((function(){}))})),setTimeout((function(){u.a.emit("NewNotification",J.submit_to),u.a.emit("newattendancerequest",""),e.replace("/attendance_request")}),500)})).catch((function(e){console.log(e)}))}},Dates:B,Form:J,date:Te,Attendance:me,SnapShot:ee,Relations:t,Marking:Se,NewAttendance:he}):Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("div",{className:"Attandence_Request_breadcrums",children:Object(O.jsxs)("div",{className:"d-flex",children:[Object(O.jsx)("p",{children:"Total Requests :"}),Object(O.jsx)("p",{className:"ml-2",style:{color:"gray"},children:g.length})]})}),W?Object(O.jsx)(k,{RequestList:g,RequestDetails:ke,NewAttendance:he,AccessControls:n,buttonslideSnapeshot:function(){"Hide"===d()(".buttonslideSnapeshot").html()?d()(".buttonslideSnapeshot").html("Show"):d()(".buttonslideSnapeshot").html("Hide"),d()(".slideSnapeshot").slideToggle()},OnTimeChange:De}):Object(O.jsx)(p,{View:p,RequestList:g})]})]})]})};var p=function(e){var t=e.RequestList;return Object(O.jsx)(O.Fragment,{children:Object(O.jsx)("div",{children:Object(O.jsxs)("table",{className:"table table-sm table-hover",children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{}),Object(O.jsx)("th",{}),Object(O.jsx)("th",{children:"Request By"}),Object(O.jsx)("th",{className:"column-lg",children:"Date"}),Object(O.jsx)("th",{children:"Status"})]})}),Object(O.jsx)("tbody",{children:t.map((function(e,t){var n=new Date(e.request_date),s=Object(O.jsx)("p",{className:"newBadge dontSHow"});return n&&(new Date).getDate()===n.getDate()&&(s=Object(O.jsx)("p",{className:"newBadge",children:"new"})),Object(O.jsxs)("tr",{children:[s,Object(O.jsxs)("td",{children:[" ",Object(O.jsxs)(l.c,{to:"/attendance_request/"+e.request_id+"_"+e.id,children:[" ",Object(O.jsx)("img",{className:"d-block mx-auto",src:"images/employees/"+e.emp_image,alt:""})]}),"  "]}),Object(O.jsxs)("td",{className:"column-sm",children:[Object(O.jsxs)(l.c,{to:"/attendance_request/"+e.request_id+"_"+e.id,children:[" ",e.sender_name]}),Object(O.jsxs)(l.c,{to:"/attendance_request/"+e.request_id+"_"+e.id,children:[" ",n?n.toDateString():null]})]}),Object(O.jsxs)("td",{className:"column-lg",children:[" ",Object(O.jsxs)(l.c,{to:"/attendance_request/"+e.request_id+"_"+e.id,children:[" ",e.sender_name]}),"  "]}),Object(O.jsxs)("td",{className:"column-lg",children:[" ",Object(O.jsxs)(l.c,{to:"/attendance_request/"+e.request_id+"_"+e.id,children:[" ",n?n.toDateString():null]}),"  "]}),Object(O.jsxs)("td",{children:[" ",Object(O.jsxs)(l.c,{style:{backgroundColor:"var(--black)"},className:"text-white px-3 rounded-pill",to:"/attendance_request/"+e.request_id+"_"+e.id,children:[" ",e.request_status]}),"  "]})]},t)}))})]})})})},x=function(e){var t=Object(i.useState)({time_in:"",time_out:"",break_in:"",break_out:""}),n=Object(c.a)(t,2),s=n[0],a=n[1];return Object(i.useEffect)((function(){a(e.Attendance)}),[e.Attendance]),Object(O.jsxs)("form",{className:"Attandence_Request_form",onSubmit:e.Submit,children:[Object(O.jsx)("h5",{className:"font-weight-bold",children:"Add New Request"}),Object(O.jsxs)("div",{className:"Attandence_Request_form_div",children:[Object(O.jsxs)("div",{children:[Object(O.jsx)("p",{children:"Request type"}),Object(O.jsxs)("select",{id:"",className:"form-control form-control-sm",onChange:e.OnChangeHandler,name:"request_type",required:!0,children:[Object(O.jsx)("option",{value:"",children:"select"}),Object(O.jsx)("option",{value:"update",children:"Update"}),Object(O.jsx)("option",{value:"insert",children:"Insert"})]})]}),Object(O.jsxs)("div",{className:"my-3",children:[Object(O.jsx)("p",{children:"Date"}),Object(O.jsxs)("select",{id:"",className:"form-control form-control-sm",onChange:e.OnChangeHandler,name:"date",required:!0,children:[Object(O.jsx)("option",{value:(new Date).toString(),children:(new Date).toDateString()}),e.Dates.map((function(e){return Object(O.jsx)("option",{value:new Date(e.date).toString(),children:new Date(e.date).toDateString()})}))]})]}),""===e.Form.request_type?null:Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("div",{className:"d-flex align-items-center",children:[Object(O.jsx)("input",{type:"checkbox",name:"mark_time_in",onChange:e.onMarkChange})," ",Object(O.jsx)("span",{className:"pl-2",children:"Mark time in"})]}),Object(O.jsxs)("div",{className:"d-flex align-items-center",children:[Object(O.jsx)("input",{type:"checkbox",name:"mark_time_out",onChange:e.onMarkChange})," ",Object(O.jsx)("span",{className:"pl-2",children:"Mark time out"})]}),Object(O.jsxs)("div",{className:"d-flex align-items-center",children:[Object(O.jsx)("input",{type:"checkbox",name:"mark_break_in",onChange:e.onMarkChange})," ",Object(O.jsx)("span",{className:"pl-2",children:"Mark break in"})]}),Object(O.jsxs)("div",{className:"d-flex align-items-center",children:[Object(O.jsx)("input",{type:"checkbox",name:"mark_break_out",onChange:e.onMarkChange})," ",Object(O.jsx)("span",{className:"pl-2",children:"Mark break out"})]})]}),e.Marking.mark_time_in?Object(O.jsxs)("div",{children:[Object(O.jsxs)("div",{className:"d-flex",children:[Object(O.jsxs)("div",{className:"w-100 mr-1",children:[Object(O.jsx)("p",{children:"Time In"}),Object(O.jsx)("input",{type:"time",disabled:!0,className:"form-control form-control-sm",name:"time_in",value:s.time_in})]}),Object(O.jsxs)("div",{className:"w-100 ml-1",children:[Object(O.jsx)("p",{children:"New Time In"}),Object(O.jsx)("input",{type:"time",className:"form-control form-control-sm",onChange:e.OnTimeChange,value:e.NewAttendance.time_in,name:"time_in",id:"time_in"})]})]}),Object(O.jsxs)("div",{className:"d-flex justify-content-end align-items-center mt-1",style:{marginRight:"212px"},children:[Object(O.jsx)("input",{type:"checkbox",name:"time_in",onChange:e.onChangeCheck}),Object(O.jsx)("label",{for:"time_in",children:" Set to Null "})]})]}):null,e.Marking.mark_time_out?Object(O.jsxs)("div",{className:"my-2",children:[Object(O.jsxs)("div",{className:"d-flex",children:[Object(O.jsxs)("div",{className:"w-100 mr-1",children:[Object(O.jsx)("p",{children:"Time Out"}),Object(O.jsx)("input",{type:"time",disabled:!0,className:"form-control form-control-sm",name:"time_out",value:s.time_out})]}),Object(O.jsxs)("div",{className:"w-100 ml-1",children:[Object(O.jsx)("p",{children:"New Time Out"}),Object(O.jsx)("input",{type:"time",className:"form-control form-control-sm",onChange:e.OnTimeChange,value:e.NewAttendance.time_out,name:"time_out",id:"time_out"})]})]}),Object(O.jsxs)("div",{className:"d-flex justify-content-end align-items-center mt-1",style:{marginRight:"212px"},children:[Object(O.jsx)("input",{type:"checkbox",name:"time_out",onChange:e.onChangeCheck}),Object(O.jsx)("label",{for:"time_out",children:" Set to Null "})]})]}):null,e.Marking.mark_break_in?Object(O.jsxs)("div",{className:"mb-2",children:[Object(O.jsxs)("div",{className:"d-flex",children:[Object(O.jsxs)("div",{className:"w-100 mr-1",children:[Object(O.jsx)("p",{children:"Break In"}),Object(O.jsx)("input",{type:"time",disabled:!0,className:"form-control form-control-sm",name:"break_in",value:s.break_in})]}),Object(O.jsxs)("div",{className:"w-100 ml-1",children:[Object(O.jsx)("p",{children:"New Break In"}),Object(O.jsx)("input",{type:"time",className:"form-control form-control-sm",onChange:e.OnTimeChange,value:e.NewAttendance.break_in,name:"break_in",id:"break_in"})]})]}),Object(O.jsxs)("div",{className:"d-flex justify-content-end align-items-center mt-1",style:{marginRight:"212px"},children:[Object(O.jsx)("input",{type:"checkbox",name:"break_in",onChange:e.onChangeCheck}),Object(O.jsx)("label",{for:"break_in",children:" Set to Null "})]})]}):null,e.Marking.mark_break_out?Object(O.jsxs)("div",{children:[Object(O.jsxs)("div",{className:"d-flex",children:[Object(O.jsxs)("div",{className:"w-100 mr-1",children:[Object(O.jsx)("p",{children:"Break Out"}),Object(O.jsx)("input",{type:"time",disabled:!0,className:"form-control form-control-sm",name:"break_out",value:s.break_out})]}),Object(O.jsxs)("div",{className:"w-100 ml-1",children:[Object(O.jsx)("p",{children:"New Break Out"}),Object(O.jsx)("input",{type:"time",className:"form-control form-control-sm",onChange:e.OnTimeChange,value:e.NewAttendance.break_out,name:"break_out",id:"break_out"})]})]}),Object(O.jsxs)("div",{className:"d-flex justify-content-end align-items-center mt-1",style:{marginRight:"212px"},children:[Object(O.jsx)("input",{type:"checkbox",name:"break_out",onChange:e.onChangeCheck}),Object(O.jsx)("label",{for:"break_out",children:" Set to Null "})]})]}):null,Object(O.jsxs)("div",{className:"my-3",children:[Object(O.jsx)("p",{children:"Reason"}),Object(O.jsx)("textarea",{onChange:e.OnChangeHandler,value:e.reason,className:"form-control form-control-sm",name:"reason",required:!0})]}),Object(O.jsxs)("div",{children:[null!==e.SnapShot?Object(O.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(O.jsxs)("p",{className:"mb-2",children:["Snapshot ",Object(O.jsx)("sub",{children:"(Optional)"})]}),Object(O.jsx)("i",{class:"las la-times-circle",onClick:e.closebutton,style:{fontSize:"20px",cursor:"pointer"}})]}):Object(O.jsx)("div",{children:Object(O.jsxs)("p",{className:"mb-2",children:["Snapshot ",Object(O.jsx)("sub",{children:"(Optional)"})]})}),null!==e.SnapShot?Object(O.jsx)("img",{src:e.SnapShot,width:"100%",alt:"snap"}):Object(O.jsx)("input",{type:"file",onChange:e.onUploadSnap})]})]}),Object(O.jsxs)("div",{className:"Attandence_Request_form_button",children:[Object(O.jsx)("div",{className:"",children:Object(O.jsxs)("span",{children:["Submit to :",Object(O.jsxs)("select",{name:"submit_to",onChange:e.OnChangeHandler,id:"",className:"form-control form-control-sm",required:!0,children:[Object(O.jsx)("option",{value:"",children:" select "}),e.Relations.map((function(e,t){var n;return("all"===e.category||e.category.includes("attendance_request"))&&(n=Object(O.jsxs)("option",{value:e.sr,children:[" ",e.name," "]},t)),n}))]})]})}),Object(O.jsxs)("div",{className:"d-flex",children:[Object(O.jsx)(l.c,{to:"/attendance_request",className:"btn btn-sm cancle",type:"reset",children:"Cancle"}),""===e.Form.submit_to?null:Object(O.jsx)("button",{className:"btn btn-sm submit",type:"submit",children:"Submit"})]})]})]})},k=function(e){var t=e.RequestList,n=e.RequestDetails,s=e.buttonslideSnapeshot,a=e.OnTimeChange,r=e.NewAttendance,o=e.AccessControls,m=Object(i.useState)(!1),u=Object(c.a)(m,2),b=u[0],_=u[1];return Object(i.useEffect)((function(){var e=!1;n.reviews.filter((function(t){return e=!1,"mark"!==t.request_status&&"mark_&_forward"!==t.request_status&&"cancel"!==t.request_status||(e=!0),e})),_(e)}),[n.reviews]),Object(i.useEffect)((function(){d()(".responsive_left").hide(0)}),[]),Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("div",{className:"View2",children:[Object(O.jsx)("div",{className:"View2_left",children:Object(O.jsxs)("table",{className:"table table-sm table-hover",children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{children:"Request By"}),Object(O.jsx)("th",{children:"Request Date"})]})}),Object(O.jsx)("tbody",{children:t.map((function(e,t){var n=new Date(e.request_date);return Object(O.jsxs)("tr",{children:[Object(O.jsxs)("td",{children:[" ",Object(O.jsxs)(l.c,{to:"/attendance_request/"+e.request_id+"_"+e.id,children:[" ",e.sender_name]}),"  "]}),Object(O.jsxs)("td",{children:[" ",Object(O.jsxs)(l.c,{to:"/attendance_request/"+e.request_id+"_"+e.id,children:[" ",n?n.toDateString():null]}),"  "]})]},t)}))})]})}),Object(O.jsxs)("div",{className:"View2_right",children:[Object(O.jsx)("div",{className:"top",children:Object(O.jsxs)("div",{className:"View2_grid",children:[Object(O.jsx)("div",{className:"View2_image",children:Object(O.jsx)("img",{src:"images/employees/"+n.emp_info.emp_image,alt:""})}),Object(O.jsxs)("div",{children:[Object(O.jsx)("h4",{className:"mb-3",children:"Employee Details"}),Object(O.jsxs)("div",{className:"details",children:[Object(O.jsx)("p",{className:"mr-2",children:"Name :"}),Object(O.jsx)("p",{className:"ml-2",style:{color:"gray"},children:n.emp_info.name})]}),Object(O.jsxs)("div",{className:"details",children:[Object(O.jsx)("p",{className:"mr-2",children:"Designation :"}),Object(O.jsx)("p",{className:"ml-2",style:{color:"gray"},children:n.emp_info.designation_name})]}),Object(O.jsxs)("div",{className:"details",children:[Object(O.jsx)("p",{className:"mr-2",children:"Department :"}),Object(O.jsx)("p",{className:"ml-2",style:{color:"gray"},children:n.emp_info.department_name})]}),Object(O.jsxs)("div",{className:"details",children:[Object(O.jsx)("p",{className:"mr-2",children:"Company :"}),Object(O.jsx)("p",{className:"ml-2",style:{color:"gray"},children:n.emp_info.company_name})]})]})]})}),Object(O.jsxs)("div",{className:"bottom mb-4",children:[Object(O.jsx)("div",{children:Object(O.jsx)("h4",{children:"Request Details"})}),Object(O.jsxs)("div",{className:"details",children:[Object(O.jsx)("p",{children:"Reason : "}),Object(O.jsx)("p",{style:{color:"gray"},children:n.request_info.reason})]}),Object(O.jsxs)("div",{className:"details",children:[Object(O.jsx)("p",{children:"Date : "}),Object(O.jsx)("p",{style:{color:"gray"},children:new Date(n.request_info.date).toDateString()})]}),Object(O.jsxs)("div",{className:"details",children:[Object(O.jsx)("p",{children:"Request Type : "}),Object(O.jsx)("p",{style:{color:"gray"},children:n.request_info.request_type})]}),Object(O.jsxs)("div",{className:"details",children:[Object(O.jsx)("p",{children:"Snapshot : "}),Object(O.jsx)("div",{children:null===n.request_info.snapshot?Object(O.jsx)("p",{style:{color:"gray"},children:"No Snapshot"}):Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("div",{className:"buttonslideSnapeshot",onClick:s,children:"show"}),Object(O.jsx)("div",{className:"slideSnapeshot",children:Object(O.jsx)("img",{src:n.request_info.snapshot,alt:""})})]})})]}),n.reviews.map((function(e,t){var s=[];(s=e.sender_name.split(" ")).length>2&&s.pop();var a=null;return t<n.reviews.length&&(a=Object(O.jsxs)("div",{className:"",children:[Object(O.jsxs)("p",{children:[s.join(" ")," timings : "]}),Object(O.jsx)("div",{children:Object(O.jsxs)("table",{className:"table table-sm",children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{children:" Time in "}),Object(O.jsx)("th",{children:" Time out "}),Object(O.jsx)("th",{children:" Break in "}),Object(O.jsx)("th",{children:" Break out "})]})}),Object(O.jsx)("tbody",{children:Object(O.jsxs)("tr",{children:[Object(O.jsxs)("td",{children:[" ",e.time_in," "]}),Object(O.jsxs)("td",{children:[" ",e.time_out," "]}),Object(O.jsxs)("td",{children:[" ",e.break_in," "]}),Object(O.jsxs)("td",{children:[" ",e.break_out," "]})]})})]})})]},t)),a})),b?null:o.access&&n.reviews.length>0&&(JSON.parse(o.access).includes(101)||JSON.parse(o.access).includes(1))?Object(O.jsxs)("div",{className:"details",children:[Object(O.jsx)("p",{children:"Your timings : "}),Object(O.jsx)("div",{children:Object(O.jsx)("table",{className:"table table-sm",children:Object(O.jsx)("tbody",{children:Object(O.jsxs)("tr",{children:[Object(O.jsxs)("td",{className:"text-left",children:[Object(O.jsx)("input",{type:"time",name:"time_in",id:"time_in_check",value:r.time_in,style:{width:"100% !important"},onChange:a}),Object(O.jsxs)("div",{className:"w-100 text-left d-flex align-items-center",children:[Object(O.jsx)("input",{onChange:a,type:"checkbox",name:"time_in_check"})," ",Object(O.jsx)("span",{children:" Set to null "})]})]}),Object(O.jsxs)("td",{className:"text-left",children:[Object(O.jsx)("input",{type:"time",name:"time_out",id:"time_out_check",value:r.time_out,style:{width:"100% !important"},onChange:a}),Object(O.jsxs)("div",{className:"w-100 text-left d-flex align-items-center",children:[Object(O.jsx)("input",{onChange:a,type:"checkbox",name:"time_out_check"})," ",Object(O.jsx)("span",{children:" Set to null "})]})]}),Object(O.jsxs)("td",{className:"text-left",children:[Object(O.jsx)("input",{type:"time",name:"break_in",id:"break_in_check",value:r.break_in,style:{width:"100% !important"},onChange:a}),Object(O.jsxs)("div",{className:"w-100 text-left d-flex align-items-center",children:[Object(O.jsx)("input",{onChange:a,type:"checkbox",name:"break_in_check"})," ",Object(O.jsx)("span",{children:" Set to null "})]})]}),Object(O.jsxs)("td",{className:"text-left",children:[Object(O.jsx)("input",{type:"time",name:"break_out",id:"break_out_check",value:r.break_out,style:{width:"100% !important"},onChange:a}),Object(O.jsxs)("div",{className:"w-100 text-left d-flex align-items-center",children:[Object(O.jsx)("input",{onChange:a,type:"checkbox",name:"break_out_check"})," ",Object(O.jsx)("span",{children:" Set to null "})]})]}),Object(O.jsx)("td",{className:"text-left",children:Object(O.jsxs)("select",{name:"",id:"record_status",defaultValue:"Present",children:[Object(O.jsx)("option",{value:"Present",children:"Present"}),Object(O.jsx)("option",{value:"Late",children:"Late"}),Object(O.jsx)("option",{value:"Absent",children:"Absent"}),Object(O.jsx)("option",{value:"Holiday",children:"Holiday"}),Object(O.jsx)("option",{value:"OFF",children:"OFF"})]})})]})})})})]}):null,null===n.request_info.marked_time_in&&null===n.request_info.marked_time_out&&null===n.request_info.marked_break_in&&null===n.request_info.marked_break_out?null:Object(O.jsxs)("div",{className:"details",children:[Object(O.jsx)("p",{children:"Marked timings : "}),Object(O.jsx)("div",{children:Object(O.jsxs)("table",{className:"table table-sm",children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{children:" Time in "}),Object(O.jsx)("th",{children:" Time out "}),Object(O.jsx)("th",{children:" Break in "}),Object(O.jsx)("th",{children:" Break out "})]})}),Object(O.jsx)("tbody",{children:Object(O.jsxs)("tr",{children:[Object(O.jsxs)("td",{children:[" ",n.request_info.marked_time_in," "]}),Object(O.jsxs)("td",{children:[" ",n.request_info.marked_time_out," "]}),Object(O.jsxs)("td",{children:[" ",n.request_info.marked_break_in," "]}),Object(O.jsxs)("td",{children:[" ",n.request_info.marked_break_out," "]})]})})]})})]})]}),Object(O.jsxs)("div",{className:"bottom",children:[Object(O.jsx)("div",{children:Object(O.jsx)("h4",{children:"Review / Comments"})}),Object(O.jsx)("div",{className:"ReviewsGrid",children:n.reviews.map((function(e,t){var n=[];return null!==e.receiver_name?(n=e.receiver_name.split(" ")).length>1&&n.pop():(n=[e.sender_name]).length>1&&n.pop(),Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("div",{children:[Object(O.jsxs)("div",{className:"details",children:[Object(O.jsx)("small",{className:"mr-2 d-block",children:"From : "}),Object(O.jsx)("small",{className:"ml-2 d-block",style:{color:"gray"},children:e.sender_name})]},t),Object(O.jsxs)("div",{className:"details",children:[Object(O.jsx)("small",{className:"mr-2 d-block",children:"To : "}),Object(O.jsx)("small",{className:"ml-2 d-block",style:{color:"gray"},children:e.receiver_name})]},t),Object(O.jsxs)("div",{className:"details",children:[Object(O.jsxs)("small",{className:"mr-2 d-block",children:[" ",n.join(" ")," remarks : "]}),Object(O.jsx)("small",{className:"ml-2 d-block",style:{color:"gray"},children:null===e.remarks?"No remrks yet":e.remarks})]})]}),Object(O.jsxs)("div",{children:[Object(O.jsx)("div",{children:Object(O.jsx)("p",{children:new Date(e.request_date).toDateString()})}),Object(O.jsx)("div",{className:"statusbox",children:Object(O.jsx)("p",{children:e.request_status})})]})]})}))})]}),Object(O.jsx)(l.c,{to:"/attendance_request",className:"View2_right_cancle",children:Object(O.jsx)("i",{class:"las la-times"})})]})]}),Object(O.jsx)(j.a,{})]})}},527:function(e,t,n){},88:function(e,t,n){"use strict";n(1),n(89);var s=n(0);t.a=function(e){return Object(s.jsx)(s.Fragment,{children:Object(s.jsxs)("div",{className:"Attandence_Request_Div",style:{display:e.show?"flex":"none"},children:[Object(s.jsx)("div",{className:"dark",onClick:e.Hide}),Object(s.jsx)("div",{style:{animationDelay:"0.1".toString()+"s"},className:e.show?"Attandence_Request_Div_Content Attandence_Request_Div_Content2":"Attandence_Request_Div_Content",children:e.content})]})})}},89:function(e,t,n){}}]);