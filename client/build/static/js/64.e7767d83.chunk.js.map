{"version":3,"sources":["Components/AdminModule/Pages/Companies/Companies.jsx"],"names":["Companies","useState","company_code","code","company_name","website","logo","Form","setForm","setCompanies","companyInfo","logs","Details","setDetails","useEffect","GetCompanies","OpenCompanyDetails","index","data","axios","get","then","res","catch","err","console","log","className","CompanyForm","onImageUpload","event","reader","FileReader","onload","readyState","result","readAsDataURL","target","files","onChangeHandler","e","name","value","val","AddNewCompany","preventDefault","post","alert","length","map","src","Company","CompanyDetails","Back","onClick","width","height","alt","Date","log_date","toDateString","log_time","log_id","onSubmit","required","type","onChange"],"mappings":"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","file":"static/js/64.e7767d83.chunk.js","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport './Companies.css';\r\n\r\nimport axios from '../../../../axios';\r\n\r\nconst Companies = () => {\r\n\r\n    const [ Form, setForm ] = useState(\r\n        {\r\n            company_code: \"\",\r\n            code: \"\",\r\n            company_name: \"\",\r\n            website: null,\r\n            logo: null\r\n        }\r\n    )\r\n    const [ Companies, setCompanies ] = useState([]);\r\n    const [ Details, setDetails ] = useState(\r\n        {\r\n            companyInfo: null,\r\n            logs: []\r\n        }\r\n    );\r\n\r\n    useEffect(\r\n        () => {\r\n\r\n            GetCompanies();\r\n\r\n        }, []\r\n    );\r\n\r\n    const OpenCompanyDetails = ( index ) => {\r\n\r\n        const data = Companies[index];\r\n        setDetails(\r\n            {\r\n                ...Details,\r\n                companyInfo: data\r\n            }\r\n        )\r\n\r\n    }\r\n\r\n    const GetCompanies = () => {\r\n\r\n        axios.get(\r\n            '/getcompaniescodes'\r\n        ).then(\r\n            res => {\r\n\r\n                setCompanies( res.data );\r\n\r\n            }\r\n        ).catch(\r\n            err => {\r\n\r\n                console.log( err );\r\n\r\n            }\r\n        )\r\n\r\n    }\r\n\r\n    const onChangeHandler = ( e ) => {\r\n\r\n        const { name, value } = e.target;\r\n        const val = {\r\n            ...Form,\r\n            [name]: value\r\n        };\r\n\r\n        setForm( val );\r\n\r\n    }\r\n\r\n    const onImageUpload = (event) => {\r\n\r\n        const reader = new FileReader();\r\n\r\n        reader.onload = () => {\r\n\r\n            if (reader.readyState === 2) {\r\n\r\n                setForm(\r\n                    {\r\n                        ...Form,\r\n                        logo: reader.result\r\n                    }\r\n                );\r\n\r\n            }\r\n\r\n        }\r\n\r\n        reader.readAsDataURL(event.target.files[0]);\r\n\r\n    }\r\n\r\n    const AddNewCompany = ( e ) => {\r\n\r\n        e.preventDefault();\r\n        axios.post(\r\n            '/addnewcompany',\r\n            {\r\n                company_code: Form.company_code,\r\n                code: Form.code,\r\n                company_name: Form.company_name,\r\n                website: Form.website,\r\n                logo: Form.logo\r\n            }\r\n        ).then(\r\n            res => {\r\n\r\n                if ( res.data === 'COMPANY EXISTS' )\r\n                {\r\n                    alert(\"Company With Company Code: \" + Form.company_code + \" Already Exists\");\r\n                    return false;\r\n                }\r\n                alert(\"New Company \" + Form.company_name + \" Added\");\r\n                GetCompanies();\r\n                setForm(\r\n                    {\r\n                        company_code: \"\",\r\n                        code: \"\",\r\n                        company_name: \"\",\r\n                        website: null,\r\n                        logo: null\r\n                    }\r\n                )\r\n\r\n            }\r\n        ).catch(\r\n            err => {\r\n\r\n                console.log( err );\r\n\r\n            }\r\n        )\r\n\r\n    }\r\n\r\n    const Back = () => {\r\n\r\n        setDetails(\r\n            {\r\n                companyInfo: null,\r\n                logs: []\r\n            }\r\n        )\r\n\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <div className='AdminCompanies'>\r\n\r\n                <div className='left'>\r\n                    <CompanyForm \r\n                        Form={ Form }\r\n                        onImageUpload={ onImageUpload }\r\n                        onChangeHandler={ onChangeHandler }\r\n                        AddNewCompany={ AddNewCompany }\r\n                    />\r\n                </div>\r\n\r\n                {\r\n                    Details.companyInfo === null\r\n                    ?\r\n                    Companies.length > 0\r\n                    ?\r\n                    <div className='right'>\r\n\r\n                        {\r\n                            Companies.map(\r\n                                ( val, index ) => {\r\n\r\n                                    let src;\r\n                                    if ( val.logo === null )\r\n                                    {\r\n                                        src = 'https://pbs.twimg.com/profile_images/578844000267816960/6cj6d4oZ_400x400.png';\r\n                                    }else\r\n                                    {\r\n                                        src = val.logo;\r\n                                    }\r\n\r\n                                    return (\r\n                                        <Company\r\n                                            val={ val }\r\n                                            src={ src }\r\n                                            index={ index }\r\n                                            OpenCompanyDetails={ OpenCompanyDetails }\r\n                                        />\r\n                                    )\r\n\r\n                                }\r\n                            )\r\n                        }\r\n\r\n                    </div>\r\n                    :\r\n                    <h3 className='text-center'>No Company Found</h3>\r\n                    :\r\n                    <CompanyDetails\r\n                        data={ Details.companyInfo }\r\n                        Back={ Back }\r\n                        setDetails={ setDetails } \r\n                        Details={ Details }\r\n                    />\r\n                }\r\n\r\n            </div>\r\n        </>\r\n    )\r\n\r\n}\r\n\r\nexport default Companies;\r\n\r\nconst CompanyDetails = ( { data, setDetails, Details, Back } ) => {\r\n\r\n    useEffect(\r\n        () => {\r\n\r\n            axios.post(\r\n                '/getcompanylogs',\r\n                {\r\n                    company_code: data.company_code\r\n                }\r\n            ).then(\r\n                res => {\r\n    \r\n                    setDetails(\r\n                        {\r\n                            ...Details,\r\n                            logs: res.data\r\n                        }\r\n                    );\r\n    \r\n                }\r\n            ).catch(\r\n                err => {\r\n    \r\n                    console.log( err );\r\n    \r\n                }\r\n            )\r\n\r\n        }, []\r\n    )\r\n\r\n    return (\r\n        <div>\r\n            <div className='CompanyDetails'>\r\n                <i className=\"las la-arrow-alt-circle-left la-2x\" onClick={ Back }></i>\r\n\r\n                <img src={ data.logo === null ? 'https://pbs.twimg.com/profile_images/578844000267816960/6cj6d4oZ_400x400.png' : data.logo } width=\"30%\" height='auto' alt=\"Logo\" />\r\n\r\n                <div className='rightSide w-100'>\r\n\r\n                    <div>\r\n                        <p className='font-weight-bold mb-0'>Company Code</p>\r\n                        <p className='mb-0'> { data.company_code } </p>\r\n                    </div>\r\n                    <div>\r\n                        <p className='font-weight-bold mb-0'>Company Name</p>\r\n                        <p className='mb-0'> { data.company_name } </p>\r\n                    </div>\r\n                    \r\n                    <div>\r\n                        <p className='font-weight-bold mb-0'>Short Code</p>\r\n                        <p className='mb-0'> { data.code === null ? \"No Code\" : data.code } </p>\r\n                    </div>\r\n                    <div>\r\n                        <p className='font-weight-bold mb-0'>Website</p>\r\n                        <p className='mb-0'> { data.website === null ? \"No Website\" : data.website } </p>\r\n                    </div>\r\n                    \r\n                    <div>\r\n                        <button className='btn submit btn-block'>\r\n                            Edit\r\n                        </button>\r\n                    </div>\r\n\r\n                    <div>\r\n                        <button className='btn cancle btn-block'>\r\n                            Delete\r\n                        </button>\r\n                    </div>\r\n\r\n                </div>\r\n\r\n            </div>\r\n\r\n            <br />\r\n\r\n            <div className='CompanyDetails d-block'>\r\n\r\n                <h4>\r\n                    Logs\r\n                </h4>\r\n\r\n                <div className='logContainer mt-3'>\r\n\r\n                    {\r\n                        Details.logs.length === 0\r\n                        ?\r\n                        <p className='text-center mb-0'> No Log Found </p>\r\n                        :\r\n                        Details.logs.map(\r\n                            val => {\r\n\r\n                                return (\r\n                                    <div key={ val.log_id } className=\"log\"> \r\n                                        <span>{ val.log }</span>\r\n                                        <span>{ new Date( val.log_date ).toDateString() } at { val.log_time }</span>\r\n                                    </div>\r\n                                )\r\n\r\n                            }\r\n                        )\r\n                    }\r\n\r\n                </div>\r\n\r\n            </div>\r\n        </div>\r\n    )\r\n\r\n}\r\n\r\nconst Company = ( { val, src, index, OpenCompanyDetails } ) => {\r\n\r\n    return (\r\n        <>\r\n            <div key={ val.company_code } className='companyDiv' onClick={ () => OpenCompanyDetails( index ) }>\r\n                <img src={ src } alt=\"logo\" height=\"100\" />\r\n                <p className='font-weight-bold mb-0'>\r\n                    { val.company_name }\r\n                </p>\r\n                <p className='mb-0'>\r\n                    { val.website === null ? \"No Website\" : val.website }\r\n                </p>\r\n                <p className='mb-0'>\r\n                    { val.code === null ? \"No Code\" : val.code }\r\n                </p>\r\n            </div>\r\n        </>\r\n    )\r\n\r\n}\r\n\r\nconst CompanyForm = ( { AddNewCompany, onChangeHandler, onImageUpload, Form } ) => {\r\n\r\n    return (\r\n        <>\r\n            <form className='left' onSubmit={ AddNewCompany }>\r\n\r\n                <h6 className='mb-3 font-weight-bold'>Enter New Company</h6>\r\n\r\n                {\r\n                    Form.logo !== null\r\n                    ?\r\n                    <div className='text-center'>\r\n                        <img className='rounded-circle' src={ Form.logo } alt=\"Logo\" width='100' height='100' />\r\n                    </div>\r\n                    :null\r\n                }\r\n\r\n                <br />\r\n                \r\n                <label className=\"mb-0\"> Company Code </label>\r\n                <input required type=\"text\" className=\"form-control form-control-sm mb-2\" onChange={ onChangeHandler } value={ Form.company_code } name=\"company_code\" />\r\n\r\n                <label className=\"mb-0\"> Short Code </label>\r\n                <input type=\"text\" className=\"form-control form-control-sm mb-2\" onChange={ onChangeHandler } value={ Form.code } name=\"code\" />\r\n\r\n                <label className=\"mb-0\"> Company Name </label>\r\n                <input required type=\"text\" className=\"form-control form-control-sm mb-2\" onChange={ onChangeHandler } value={ Form.company_name } name=\"company_name\" />\r\n                \r\n                <label className=\"mb-0\"> Website </label>\r\n                <input type=\"text\" className=\"form-control form-control-sm mb-2\" onChange={ onChangeHandler } value={ Form.website } name=\"website\" />\r\n\r\n                <label className=\"mb-0\"> Logo </label>\r\n                <input type=\"file\" className=\"form-control form-control-sm mb-2\" onChange={ onImageUpload } name=\"logo\" />\r\n\r\n                <button type='submit' className=\"btn btn-sm submit\">add new company</button>\r\n\r\n            </form>\r\n        </>\r\n    )\r\n\r\n}"],"sourceRoot":""}