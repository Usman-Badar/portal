(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[34],{157:function(e,t,n){"use strict";t.a=n.p+"static/media/icons8-iphone-spinner.e2bb0653.gif"},539:function(e,t,n){},540:function(e,t,n){},663:function(e,t,n){"use strict";n.r(t);var a=n(4),s=n(1),c=(n(539),n(11)),i=n(25),o=n(79),r=n.n(o),l=n(85),d=(n(86),n(540),n(0)),h=function(e){var t=Object(s.useState)([]),n=Object(a.a)(t,2),c=n[0],i=n[1];return Object(s.useEffect)((function(){i(e.data)}),[e.data]),Object(d.jsx)("div",{className:"DicussionDrive",children:c.map((function(t,n){return Object(d.jsx)("div",{className:"DriveItem",style:{backgroundImage:"url('images/drive/"+t.name+"')"},onClick:function(){return e.AttachDrive(t.name)}},n)}))})},p=n(93),j=n(94),u=n(227),m=(n(211),n.p+"static/media/nochat.9c364bd6.png"),b=n(157),O=Object(s.lazy)((function(){return n.e(74).then(n.bind(null,695))})),g=Object(s.lazy)((function(){return n.e(73).then(n.bind(null,696))}));t.default=function(){var e=Object(s.useState)(new Date),t=Object(a.a)(e,2),o=t[0],f=t[1],v=n(105)("real secret keys should be long and random"),x=Object(s.useState)([]),w=Object(a.a)(x,2),C=w[0],N=w[1],S=Object(s.useState)([]),y=Object(a.a)(S,2),D=y[0],E=y[1],_=Object(s.useState)(!1),k=Object(a.a)(_,2),I=k[0],H=k[1],P=Object(s.useState)(""),T=Object(a.a)(P,2),B=T[0],L=T[1],R=Object(s.useState)([]),A=Object(a.a)(R,2),U=A[0],F=A[1],M=Object(s.useState)({}),q=Object(a.a)(M,2),z=q[0],J=q[1],W=Object(s.useState)(!1),G=Object(a.a)(W,2),Y=G[0],$=G[1],K=Object(s.useState)(!1),Q=Object(a.a)(K,2),V=Q[0],X=Q[1],Z=Object(s.useState)([]),ee=Object(a.a)(Z,2),te=ee[0],ne=ee[1],ae=Object(s.useState)(),se=Object(a.a)(ae,2),ce=se[0],ie=se[1],oe=Object(s.useState)(),re=Object(a.a)(oe,2),le=re[0],de=re[1],he=Object(i.c)((function(e){return e.EmpAuth.EmployeeData}));Object(s.useEffect)((function(){pe("chat"),ie(parseInt(sessionStorage.getItem("EmpID")))}),[]),Object(s.useMemo)((function(){window.screen.width<750&&(r()(".Center").show(),r()(".List").hide(),r()(".chatcount").hide())}),[o]),Object(s.useEffect)((function(){j.a.on("UserOnline",(function(e){L(e.rslt[0].app_status)})),j.a.on("UserNewChat",(function(e){he.emp_id===parseInt(e.receiver)&&void 0!==z.emp_id&&z.emp_id===parseInt(e.sender)&&r()(".NewTweet .refresh").trigger("click")}))}),[z,he.emp_id]);var pe=function(e){var t=new FormData;"chat"===e&&(N([]),t.append("currentEmp",sessionStorage.getItem("EmpID")),c.a.post("/getchatemployees",t).then((function(e){for(var t=[],n=0;n<e.data[0].length;n++)e.data[0][n].emp_id!==parseInt(sessionStorage.getItem("EmpID"))&&t.push(e.data[0][n]);for(var a=[],s=0;s<e.data[1].length;s++)null!==e.data[1][s]&&a.push(e.data[1][s]);N(t),E(a)})).catch((function(e){l.b.dark(e,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})})),window.screen.width<750&&(r()(".Center").hide(),r()(".List").show(),r()(".chatcount").show(),r()(".Right").hide())),"contacts"===e&&(N([]),t.append("currentEmp",sessionStorage.getItem("EmpID")),c.a.post("/getallemployees",t).then((function(e){N(e.data[0]),E(e.data[1])})).catch((function(e){l.b.dark(e,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})})),window.screen.width<750&&(r()(".Center").hide(),r()(".List").show(),r()(".chatcount").show(),r()(".Right").hide()))},je=function(e,t){H(!0);var n=new FormData;n.append("sender",e),n.append("receiver",sessionStorage.getItem("EmpID")),n.append("chatDate",o.toString()),c.a.post("/getemployeewithchat",n).then((function(e){H(!1),$(!0),J(C[t]),j.a.emit("UserOnline",C[t].emp_id),de(t),e.data.length!==U.length&&(F(e.data),setTimeout((function(){var e=document.getElementById("ChatContainer");e&&(e.scrollTop=e.scrollHeight)}),300))})).catch((function(e){H(!1),l.b.dark(e,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})})),window.screen.width<750&&(r()(".Center").show(),r()(".List").hide(),r()(".chatcount").hide())},ue=function(e){if(e&&e.preventDefault(),""!==r()("#Sendtext").val()){var t=new FormData;t.append("eventID",1),t.append("senderID",sessionStorage.getItem("EmpID")),t.append("receiverID",z.emp_id),t.append("ChatBody",v.encrypt(r()("#Sendtext").val())),t.append("NotificationBody",r()("#Sendtext").val()),t.append("Title",he.name),t.append("whatsapp",!0),c.a.post("/insertchat",t).then((function(){je(z.emp_id,le),D[le].chat_body=v.encrypt(r()("#Sendtext").val()),r()("#Sendtext").val(""),setTimeout((function(){var e=document.getElementById("ChatContainer");e&&(e.scrollTop=e.scrollHeight)}),300),c.a.post("/newnotification",t).then((function(){j.a.emit("NewNotification",z.emp_id),j.a.emit("NewChat",{sender:he.emp_id,receiver:z.emp_id,index:le})})).catch((function(e){l.b.dark(e,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}))})).catch((function(e){l.b.dark(e,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}))}else l.b.dark("Enter at least a single word",{position:"top-center",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})};function me(e){return(e=e.toString().match(/^([01]\d|2[0-3])(:)([0-5]\d)(:[0-5]\d)?$/)||[e]).length>1&&((e=e.slice(1))[5]=+e[0]<12?"AM":"PM",e[0]=+e[0]%12||12),e.join("")}var be=function(){c.a.post("/getalldrive",{emp_id:he.emp_id}).then((function(e){ne(e.data)})).catch((function(e){console.log(e)})),Oe()},Oe=function(){X(!V)},ge=function(){window.screen.width<750&&(r()(".Center").hide(),r()(".List").hide(),r()(".chatcount").hide(),r()(".Right").show())};return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("div",{className:"EmployeeChat",children:[Object(d.jsx)(p.a,{show:V,Hide:Oe,content:Object(d.jsx)(h,{AttachDrive:function(e){var t="/***"+e+"***/";r()("#Sendtext").val(t),ue(),Oe()},data:te})}),Object(d.jsxs)("div",{className:"Left",children:[Object(d.jsxs)("div",{className:"chatcount",children:[Object(d.jsx)("p",{className:"color-c-green",children:"Chat Members"}),Object(d.jsxs)("p",{children:[C.length>0?C.length-1+" ":C.length,"members"]})]}),Object(d.jsxs)("div",{className:"tabs",children:[Object(d.jsx)("button",{onClick:function(){return pe("chat")},children:"Chat"}),Object(d.jsx)("button",{onClick:function(){return pe("contacts")},children:"contacts"})]}),Object(s.useMemo)((function(){return Object(d.jsx)(s.Suspense,{fallback:Object(d.jsxs)("div",{className:"text-center",children:[Object(d.jsx)("img",{src:b.a,alt:"Please wait.....",width:"50",height:"50",className:"rounded-circle"}),Object(d.jsx)("p",{className:"mb-0",children:"Please Wait...."})]}),children:Object(d.jsx)(O,{encryptor:v,EmployeesLastChat:D,Employees:C,GetThatEmpChat:je})})}),[C,D,v])]}),Object(s.useMemo)((function(){return Object(d.jsxs)("div",{className:"Center",children:[Y?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("div",{className:"ChatEmployee popUps",children:[Object(d.jsx)("img",{src:"images/employees/"+z.emp_image,width:"40",height:"40",alt:"chat employee img",className:"rounded-circle"}),Object(d.jsxs)("div",{className:"ml-2",children:[Object(d.jsxs)("p",{className:"font-weight-bold",children:[" ",z.name," "]}),Object(d.jsxs)("p",{children:[" ",z.designation_name+" in "+z.company_name," "]})]})]}),Object(d.jsxs)("div",{className:"ChatContent popUps",id:"ChatContainer",children:[o.toDateString()!==(new Date).toDateString()?Object(d.jsxs)("p",{className:"TweetDate",children:[" ",o.toDateString()]}):null,Object(d.jsx)(s.Suspense,{fallback:Object(d.jsx)("div",{className:"h-100 d-flex align-items-center justify-content-center",children:Object(d.jsx)("img",{src:b.a,alt:"Please wait.....",width:"40",height:"40",className:"rounded-circle"})}),children:Object(d.jsx)(g,{LoadingState:I,encryptor:v,Calender:o,EmpID:ce,CurrentEmployeeData:he,tConvert:me,Chat:U,ChatEmployee:z})})]}),Object(d.jsxs)("form",{className:"NewTweet popUps",onSubmit:ue,children:[Object(d.jsxs)("div",{className:"d-flex align-content-center w-100 bg-white border",style:{borderRadius:"10px",color:"rgb(91, 109, 128, .5)"},children:[Object(d.jsx)("input",{className:"form-control w-100",placeholder:"Type something here...",id:"Sendtext"}),Object(d.jsx)("i",{className:"las la-paperclip",title:"Attachment From Drive",onClick:be})]}),Object(d.jsx)("button",{type:"submit",children:Object(d.jsx)("i",{className:"las la-arrow-up"})}),Object(d.jsx)("button",{type:"button",className:"btn text-white refresh d-none",onClick:function(){return je(z.emp_id,le)},children:Object(d.jsx)("i",{className:"las la-redo-alt"})})]})]}):Object(d.jsxs)("div",{className:"NoChat popUps",children:[Object(d.jsx)("img",{src:m,width:"100%",height:"auto",alt:"No CHat Img"}),Object(d.jsx)("h3",{className:"font-weight-bold mt-3",children:"NO EMPLOYEE SELECTED"})]}),Object(d.jsx)("div",{className:"calenderdiv",onClick:ge,children:Object(d.jsx)("i",{className:"las la-calendar"})})]})}),[o,U,z,ce,le,Y,I]),Object(d.jsx)("div",{className:"Right popUps",children:Object(d.jsxs)("div",{className:"RightDiv",children:[Object(d.jsx)(u.a,{onChange:f,value:o}),Object(d.jsxs)("div",{className:"Details",children:[Object(d.jsx)("p",{className:"lightColor",children:"Status"}),Object(d.jsxs)("p",{style:{fontWeight:500},children:[Y?z.name+" is ":"No Employee Selected",Y?""===B?Object(d.jsx)("span",{className:"offline",children:"offline"}):Object(d.jsx)("span",{className:"online",children:"online"}):null]})]})]})})]})})}},93:function(e,t,n){"use strict";n(1),n(99);var a=n(0);t.a=function(e){return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("div",{className:"Attandence_Request_Div",style:{display:e.show?"flex":"none"},children:[Object(a.jsx)("div",{className:"dark",onClick:e.Hide}),Object(a.jsx)("div",{style:{animationDelay:"0.1".toString()+"s"},className:e.show?"Attandence_Request_Div_Content Attandence_Request_Div_Content2":"Attandence_Request_Div_Content",children:e.content})]})})}},99:function(e,t,n){}}]);
//# sourceMappingURL=34.48512b01.chunk.js.map