(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[111],{662:function(e,t,n){"use strict";n.r(t);var a=n(4),s=n(1),r=n(11),i=n(79),o=n.n(i),c=n(82),u=(n(83),function(e,t,n){e.post("/inventory/get_repair_requests",{request_by:sessionStorage.getItem("EmpID")}).then((function(e){t(e.data[0]),n(e.data[1])})).catch((function(e){console.log(e)}))}),d=n(0),p=Object(s.lazy)((function(){return n.e(44).then(n.bind(null,691))})),l=Object(s.lazy)((function(){return n.e(103).then(n.bind(null,162))}));t.default=function(){var e=Object(s.useState)([]),t=Object(a.a)(e,2),n=t[0],i=t[1],g=Object(s.useState)([]),f=Object(a.a)(g,2),b=f[0],m=f[1],j=Object(s.useState)([]),h=Object(a.a)(j,2),v=h[0],O=h[1],_=Object(s.useState)([]),S=Object(a.a)(_,2),q=S[0],w=S[1],I=Object(s.useState)({subject:"",send_to:"",gender:"",receiver:"",message:""}),y=Object(a.a)(I,2),D=y[0],k=y[1];return Object(s.useEffect)((function(){!function(e,t){e.get("/inventory/get_locations").then((function(e){t(e.data)})).catch((function(e){console.log(e)}))}(r.a,i),u(r.a,m,O)}),[]),Object(s.useEffect)((function(){""!==D.subject&&""!==D.send_to&&""!==D.gender&&""!==D.receiver&&""!==D.message&&o()("#mail_form").trigger("click")}),[D.subject,D.send_to,D.gender,D.receiver,D.message]),Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(s.Suspense,{fallback:Object(d.jsx)("div",{children:"Loading..."}),children:Object(d.jsx)(p,{Locations:n,RequestsList:b,ListAttachments:v,Files:q,newRequest:function(e){return function(e,t,n,a,s,r,i){e.preventDefault();var d=e.target.location_code.value,p=e.target.subject.value,l=e.target.description.value,g=new FormData;o()("fieldset").prop("disabled","disabled"),g.append("location",d),g.append("subject",p),g.append("description",l),g.append("request_by",sessionStorage.getItem("EmpID")),n.forEach((function(e){g.append("Attachments",e.file)})),t.post("/inventory/new_repair_request",g,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){var n=new FormData;n.append("eventID",2),n.append("whatsapp",!0),n.append("receiverID",e.data.emp_id),n.append("senderID",sessionStorage.getItem("EmpID")),n.append("Title",sessionStorage.getItem("name")),n.append("NotificationBody",sessionStorage.getItem("name")+" has sent a new repair request."),t.post("/newnotification",n).then((function(){o()("#repair_request_form").trigger("reset"),o()("#repair_request_form fieldset").prop("disabled",!1),s([]),i({subject:"New Repair Request",send_to:e.data.email,gender:"Sir",receiver:e.data.name,message:sessionStorage.getItem("name")+" has sent a new repair request."}),u(t,a,r),c.b.dark("Request Generated.",{position:"top-center",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}))})).catch((function(e){o()("fieldset").prop("disabled","false"),c.b.dark("Error: "+e.message,{position:"top-center",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),console.log(e)}))}(e,r.a,q,m,w,O,k)},onAttachFiles:function(e){return function(e,t){var n=new FileReader;n.onload=function(){if(2===n.readyState){for(var a=[],s=0;s<e.target.files.length;s++)a.push({file:e.target.files[s],name:e.target.files[s].name});t(a)}},e.target.files[0]&&n.readAsDataURL(e.target.files[0])}(e,w)}})}),Object(d.jsx)(c.a,{}),Object(d.jsx)(l,{data:D})]})}}}]);