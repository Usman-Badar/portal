(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[116],{678:function(t,e,n){"use strict";n.r(e);var o=n(4),c=n(1),s=n(27),i=n(28),u=n(25),a=function(t,e){t.get("/store/get_inventory_requests").then((function(t){e(t.data)})).catch((function(t){console.log(t)}))},r=function(t,e,n){t.post("/getitemrequestcomments",{id:e}).then((function(t){n(t.data),setTimeout((function(){var t=document.getElementById("comments_content");t&&(t.scrollTop=t.scrollHeight)}),500)})).catch((function(t){console.log(t)}))},m=n(11),l=n(95),d=n(0),f=Object(c.lazy)((function(){return n.e(96).then(n.bind(null,708))})),p=(e.default=function(){var t=Object(u.c)((function(t){return t.EmpAuth.EmployeeData})),e=Object(c.useState)(!1),n=Object(o.a)(e,2),s=n[0],i=n[1],b=Object(c.useState)(),g=Object(o.a)(b,2),j=g[0],_=g[1],h=Object(c.useState)(),O=Object(o.a)(h,2),q=O[0],y=O[1],v=Object(c.useState)([]),I=Object(o.a)(v,2),w=I[0],x=I[1];return Object(c.useEffect)((function(){a(m.a,_),l.a.on("newitemrequestcomment",(function(t){parseInt(t)===parseInt(window.location.href.split("/").pop().split("=").pop())&&r(m.a,t,x)}))}),[]),Object(d.jsx)(d.Fragment,{children:Object(d.jsx)(p,{content:Object(d.jsx)(f,{Requests:j,Details:q,Comments:w,StartLoading:s,CloseRequest:function(){x([]),y(),a(m.a,_)},OpenRequest:function(e){return function(t,e,n,o,c,s,i){var u=o[t];i(!0),r(e,u.request_id,s),u.accepted_by||e.post("/store/accept_inventory_request",{accepted_by:n,request_id:u.id}),e.post("/store/inventory_request/details",{request_id:u.id}).then((function(t){i(!1),c(t.data)})).catch((function(t){console.log(t)}))}(e,m.a,t.emp_id,j,y,x,i)},newComment:function(t){return function(t,e,n,o,c){t.preventDefault(),e.post("/newitemrequestcomment",{comment:t.target.comment.value,item_request_id:n,sender_id:sessionStorage.getItem("EmpID")}).then((function(){document.getElementById("commentForm").reset(),r(e,n,c),o.emit("newitemrequestcomment",n)})).catch((function(t){console.log(t)}))}(t,m.a,q[0][0].request_id,l.a,x)},issueToInventory:function(t,e){return function(t,e,n,o,c,s){n.post("/store/issue_items_to_inventory",{id:e,request_id:t,issued_by:sessionStorage.getItem("EmpID")}).then((function(){o(),c([]),a(n,s)})).catch((function(t){console.log(t)}))}(t,e,m.a,y,x,_)}})})})},function(t){var e=Object(d.jsx)(s.a,{display:!0,styling:{zIndex:1e5},icon:Object(d.jsx)("img",{src:i.a,className:"LoadingImg",alt:"LoadingIcon"}),txt:"Please Wait"});return Object(d.jsxs)(c.Suspense,{fallback:e,children:[" ",t.content," "]})})}}]);