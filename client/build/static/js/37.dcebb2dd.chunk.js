(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[37],{551:function(e,t,s){"use strict";s.r(t);var c=s(24),n=s(9),i=s(5),a=s(1),r=(s(552),s(3)),l=s(11),d=s(97),o=s(25),j=s(91),b=s(149),u=s(81),m=s.n(u),h=s(0);t.default=function(){var e=Object(r.g)(),t=Object(o.c)((function(e){return e.EmpAuth.EmployeeData})),s=Object(o.c)((function(e){return e.EmpAuth.Relations})),u=Object(a.useState)(),_=Object(i.a)(u,2),g=_[0],q=_[1],y=Object(a.useState)(!1),v=Object(i.a)(y,2),N=v[0],I=v[1],S=Object(a.useState)(),k=Object(i.a)(S,2),R=k[0],w=k[1],D=Object(a.useState)(),C=Object(i.a)(D,2),A=C[0],E=C[1],F=Object(a.useState)(),T=Object(i.a)(F,2),H=T[0],L=T[1],P=Object(a.useState)(),Q=Object(i.a)(P,2),B=Q[0],J=Q[1],G=Object(a.useState)(),Y=Object(i.a)(G,2),z=Y[0],W=Y[1],M=Object(a.useState)(),K=Object(i.a)(M,2),V=K[0],U=K[1],X=Object(a.useState)(),Z=Object(i.a)(X,2),$=Z[0],ee=Z[1],te=Object(a.useState)(!1),se=Object(i.a)(te,2),ce=se[0],ne=se[1],ie=Object(a.useState)([]),ae=Object(i.a)(ie,2),re=ae[0],le=ae[1],de=Object(a.useState)(!0),oe=Object(i.a)(de,2),je=oe[0],be=oe[1],ue=Object(a.useState)(),me=Object(i.a)(ue,2),he=me[0],xe=me[1],Oe=Object(a.useState)([]),pe=Object(i.a)(Oe,2),fe=pe[0],_e=pe[1],ge=Object(a.useState)([]),qe=Object(i.a)(ge,2),ye=qe[0],ve=qe[1],Ne=Object(a.useState)([]),Ie=Object(i.a)(Ne,2),Se=Ie[0],ke=Ie[1],Re=Object(a.useState)(),we=Object(i.a)(Re,2),De=we[0],Ce=we[1],Ae=Object(a.useState)(),Ee=Object(i.a)(Ae,2),Fe=Ee[0],Te=Ee[1],He=Object(a.useState)(),Le=Object(i.a)(He,2),Pe=Le[0],Qe=Le[1],Be=Object(a.useState)({details:void 0,specifications:[]}),Je=Object(i.a)(Be,2),Ge=Je[0],Ye=Je[1],ze=Object(a.useState)({name:"",required_quantity:"",reason:""}),We=Object(i.a)(ze,2),Me=We[0],Ke=We[1],Ve=Object(a.useState)({approve:!1,reject:!1,cancel:!1,revival:!1}),Ue=Object(i.a)(Ve,2),Xe=Ue[0],Ze=Ue[1];Object(a.useEffect)((function(){g&&U(Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("h6",{children:["Issue ",Object(h.jsx)("span",{className:"text-capitalize",children:g.name})]}),Object(h.jsx)("hr",{}),Object(h.jsx)("form",{onSubmit:function(e){return $e(e,g)},children:Object(h.jsxs)("fieldset",{children:[Object(h.jsx)("label",{className:"mb-0",children:"Required Quantity"}),Object(h.jsx)("input",{name:"required_quantity",required:!0,className:"form-control mb-2",disabled:!0,value:sessionStorage.getItem("required_quantity")}),Object(h.jsx)("label",{className:"mb-0",children:"Deliver Quantity"}),Object(h.jsx)("input",{name:"deliver_quantity",required:!0,className:"form-control",type:"number",defaultValue:g.stored_quantity<parseInt(sessionStorage.getItem("required_quantity"))?g.stored_quantity:parseInt(sessionStorage.getItem("required_quantity")),min:1,max:g.stored_quantity<parseInt(sessionStorage.getItem("required_quantity"))?g.stored_quantity:parseInt(sessionStorage.getItem("required_quantity"))}),Object(h.jsx)("button",{type:"submit",className:"btn light d-block ml-auto mt-3",disabled:0==g.stored_quantity,children:"Confirm"})]})})]}))}),[g]),Object(a.useEffect)((function(){Xe.approve?E(Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("h6",{children:"Approval Confirmation"}),Object(h.jsx)("hr",{}),Object(h.jsx)("form",{onSubmit:function(e){return et(e,Ge.specifications)},children:Object(h.jsxs)("fieldset",{children:[Object(h.jsx)("textarea",{name:"remarks",rows:5,placeholder:"Your Remarks...",minLength:20,required:!0,className:"form-control"}),Object(h.jsx)("button",{type:"submit",className:"btn light d-block ml-auto mt-3",children:"Confirm"})]})})]})):Xe.reject?L(Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("h6",{children:"Rejection Confirmation"}),Object(h.jsx)("hr",{}),Object(h.jsx)("form",{onSubmit:function(e){return tt(e,Ge.specifications)},children:Object(h.jsxs)("fieldset",{children:[Object(h.jsx)("textarea",{name:"remarks",rows:5,placeholder:"Your Remarks...",minLength:20,required:!0,className:"form-control"}),Object(h.jsx)("button",{type:"submit",className:"btn light d-block ml-auto mt-3",children:"Confirm"})]})})]})):Xe.cancel?J(Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("h6",{children:"Cancelation Confirmation"}),Object(h.jsx)("hr",{}),Object(h.jsx)("form",{onSubmit:function(e){return st(e,Ge.specifications)},children:Object(h.jsxs)("fieldset",{children:[Object(h.jsx)("textarea",{name:"remarks",rows:5,placeholder:"Your Remarks...",minLength:20,required:!0,className:"form-control"}),Object(h.jsx)("button",{type:"submit",className:"btn light d-block ml-auto mt-3",children:"Confirm"})]})})]})):Xe.revival&&W(Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("h6",{children:"Receive Confirmation"}),Object(h.jsx)("hr",{}),Object(h.jsx)("form",{onSubmit:function(e){return ct(e,Ge.specifications)},children:Object(h.jsxs)("fieldset",{children:[Object(h.jsx)("p",{className:"mb-0",children:"Did you received your required items?"}),Object(h.jsx)("button",{type:"submit",className:"btn light d-block ml-auto mt-3",children:"Yes I received"})]})})]}))}),[Xe.approve,Xe.reject,Xe.cancel,Xe.revival]),Object(a.useEffect)((function(){nt(),d.a.on("somethingchangeinitemrequest",(function(e){nt(),e&&it(e)})),sessionStorage.getItem("AssignedProductList")||sessionStorage.setItem("AssignedProductList",JSON.stringify([]))}),[]),Object(a.useEffect)((function(){Me.item_id?isNaN(parseInt(Me.required_quantity))||parseInt(Me.required_quantity)<=0||Me.reason.length<20?be(!0):""!==Me.name&&""!==Me.required_quantity&&""!==Me.reason||Me.reason.length>20?be(!1):be(!0):be(!0)}),[Me.name,Me.required_quantity,Me.reason]);var $e=function(t,s){t.preventDefault();var c=t.target.required_quantity.value,n=t.target.deliver_quantity.value,i=JSON.parse(sessionStorage.getItem("AssignedProductList"));s.required_quantity=c,s.deliver_quantity=n,s.item_id=sessionStorage.getItem("item_id"),i.push(s),sessionStorage.setItem("AssignedProductList",JSON.stringify(i)),e.replace("/item_requests/view/id="+sessionStorage.getItem("request_id"))},et=function(s,c){s.preventDefault(),m()("fieldset").prop("disabled",!0),l.a.post("/approveitemrequest",{request_id:Ge.details.id,emp_id:t.emp_id,specifications:c?JSON.stringify(c):null,reason:s.target.remarks?s.target.remarks.value:null}).then((function(){d.a.emit("somethingchangeinitemrequest",Ge.details.id),b.a.alert("Item Request Has Been Approved").dismissIn(2e3),setTimeout((function(){e.replace("/item_requests")}),1500)})).catch((function(e){m()("fieldset").prop("disabled",!1),console.log(e)}))},tt=function(s,c){s.preventDefault(),m()("fieldset").prop("disabled",!0),l.a.post("/rejectitemrequest",{request_id:Ge.details.id,emp_id:t.emp_id,specifications:c?JSON.stringify(c):null,reason:s.target.remarks?s.target.remarks.value:null}).then((function(){d.a.emit("somethingchangeinitemrequest",Ge.details.id),b.a.alert("Item Request Has Been Rejected").dismissIn(2e3),setTimeout((function(){e.replace("/item_requests")}),1500)})).catch((function(e){m()("fieldset").prop("disabled",!1),console.log(e)}))},st=function(s,c){s.preventDefault(),m()("fieldset").prop("disabled",!0),l.a.post("/cancelitemrequest",{request_id:Ge.details.id,emp_id:t.emp_id,specifications:c?JSON.stringify(c):null,reason:s.target.remarks?s.target.remarks.value:null}).then((function(){d.a.emit("somethingchangeinitemrequest",Ge.details.id),b.a.alert("Item Request Has Been Cancelled").dismissIn(2e3),setTimeout((function(){e.replace("/item_requests")}),1500)})).catch((function(e){m()("fieldset").prop("disabled",!1),console.log(e)}))},ct=function(s,c){s.preventDefault(),m()("fieldset").prop("disabled",!0),l.a.post("/delivereditemrequest",{request_id:Ge.details.id,emp_id:t.emp_id,specifications:c?JSON.stringify(c):null,reason:s.target.remarks?s.target.remarks.value:null}).then((function(){d.a.emit("somethingchangeinitemrequest",Ge.details.id),b.a.alert("Item Request Has Been Completed").dismissIn(2e3),setTimeout((function(){e.replace("/item_requests")}),1500)})).catch((function(e){m()("fieldset").prop("disabled",!1),console.log(e)}))},nt=function(){l.a.post("/getallitemrequests",{emp_id:sessionStorage.getItem("EmpID"),access:t.access}).then((function(e){xe(e.data)})).catch((function(e){console.log(e)}))},it=function(e){l.a.post("/getitemrequestdetails",{id:e}).then((function(e){ke(e.data[1]),Ye({details:e.data[0][0],specifications:e.data[1]}),at(e.data[0][0].company_code)})).catch((function(e){console.log(e)}))},at=function(){l.a.get("/getalllocations").then((function(e){_e(e.data)})).catch((function(e){console.log(e)}))},rt=function(){l.a.get("/getallcompanies").then((function(e){ve(e.data),at()})).catch((function(e){console.log(e)}))},lt=function(e){var t,s=e.target,i=s.name,a=s.value,r=Object(n.a)(Object(n.a)({},Me),{},Object(c.a)({},i,a));Ke(r),"name"===i&&(t=a,Ce("Please Wait"),""!==t?l.a.post("/getmatchedstoreitems",{key:t}).then((function(e){Ce(e.data)})).catch((function(e){console.log(e)})):setTimeout((function(){Ce()}),500))},dt=function(e){var t=Object(n.a)(Object(n.a)({},Me),{},{item_id:De[e].id,name:De[e].name,hod_approval_required:De[e].hod_approval_required});Ke(t),Ce()},ot=function(e){var t=Se;if("generatepr"===window.location.href.split("/")[5]){if(e){var s=re;ce?(parseInt(t[$].required_quantity)!==parseInt(Me.required_quantity)&&s.push(Me.name+"'s required quantity has edited"),t[$].reason!==Me.reason&&s.push(Me.name+"'s reason has edited"),t[$].name!==Me.name&&s.push(t[$].name+" has changed to a new item "+Me.name)):s.push("New item "+Me.name+" has added"),le(s)}ce?(t[$]={id:Me.id,item_id:Me.item_id,name:Me.name,required_quantity:Me.required_quantity,reason:Me.reason,edited:!0},ne(!1),ee()):t.push({id:Me.id,item_id:Me.item_id,name:Me.name,required_quantity:Me.required_quantity,reason:Me.reason,new_added:!0})}else ce?(t[$]={id:Me.id,item_id:Me.item_id,name:Me.name,required_quantity:Me.required_quantity,reason:Me.reason,hod_approval_required:Me.hod_approval_required},ne(!1),ee()):t.push({id:Me.id,item_id:Me.item_id,name:Me.name,required_quantity:Me.required_quantity,reason:Me.reason,hod_approval_required:Me.hod_approval_required});ke(t),Ke({name:"",required_quantity:"",reason:""})},jt=function(e){var t=Se[e];Ke({id:t.id,item_id:t.item_id,name:t.name,required_quantity:t.required_quantity,reason:t.reason}),ne(!0),ee(e)},bt=function(e){var t=Se.filter((function(t,s){return s!==e}));ke(t)},ut=function(e){e.preventDefault();var t=e.target.company_code.value,c=e.target.location_code.value,n=[],i=[];return 0===Se.length?(b.a.alert("No Item Added").dismissIn(2e3),!1):""!==Me.name||""!==Me.required_quantity||""!==Me.reason?(b.a.alert("There is an incomplete value in the fields... kindly add or clear.").dismissIn(2e3),!1):(Se.map((function(e){return 1===e.hod_approval_required?n.push(1):i.push(1),!0})),w(Object(h.jsx)(h.Fragment,{children:Object(h.jsx)("form",{onSubmit:function(e){return mt(e,t,c,Se)},children:Object(h.jsxs)("fieldset",{children:[Object(h.jsx)("h5",{children:"Summary"}),Object(h.jsx)("hr",{}),Object(h.jsx)("table",{className:"table table-striped mb-0",children:Object(h.jsxs)("tbody",{children:[Object(h.jsxs)("tr",{children:[Object(h.jsx)("th",{children:"No. of items require H.O.Ds approval"}),Object(h.jsx)("td",{children:n.length})]}),Object(h.jsxs)("tr",{children:[Object(h.jsx)("th",{children:"No. of items do not require H.O.Ds approval"}),Object(h.jsx)("td",{children:i.length})]})]})}),Object(h.jsx)("span",{className:"mb-2 d-block",children:n.length>0?Object(h.jsxs)(h.Fragment,{children:["This request will proceed to your H.O.D. ",Object(h.jsx)("br",{})," Kindly select any option from the list below..."]}):Object(h.jsx)(h.Fragment,{children:"This request will proceed directly to the inventory department."})}),s&&n.length>0?s.map((function(e,t){var s;return("all"===e.category||e.category.includes("item_request"))&&(s=Object(h.jsxs)("div",{className:"d-flex align-items-center mb-1",children:[Object(h.jsx)("input",{required:!0,className:"mr-1",value:e.sr,type:"radio",name:"hod"},t)," ",e.name]})),s})):null,Object(h.jsx)("button",{className:"btn light d-block ml-auto",type:"submit",children:"Confirm"})]})})})),void I(!N))},mt=function(t,s,c,n){t.preventDefault(),m()("fieldset").prop("disabled",!0);var i=t.target.hod?t.target.hod.value:0;l.a.post("/newitemrequest",{company_code:s,location_code:c,hod:i,request_by:sessionStorage.getItem("EmpID"),specifications:JSON.stringify(n)}).then((function(){b.a.alert("Item Request Has Been Sent").dismissIn(2e3),setTimeout((function(){e.replace("/item_requests")}),1500)})).catch((function(e){m()("fieldset").prop("disabled",!1),console.log(e)}))},ht=function(e,t){Ze(Object(n.a)(Object(n.a)({},Xe),{},Object(c.a)({},e,t)))},xt=function(e){Qe(),ke([]),l.a.post("/inventory/item_request/get_sub_category_items",{id:e}).then((function(e){e.data[0][0]&&(Qe(e.data[0][0]),ke(e.data[1]),Ot(e.data[0][0].product_id,Te))})).catch((function(e){console.log(e)}))},Ot=function(e,t){l.a.post("/inventory/get/product/inwards",{product_id:e}).then((function(e){t(e.data)})).catch((function(e){console.log(e)}))};return Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)("div",{className:"Item_Request",children:[Object(h.jsx)(j.a,{show:N,Hide:function(){return I(!N)},content:R}),Object(h.jsx)(j.a,{show:Xe.approve,Hide:function(){return ht("approve",!1)},content:A}),Object(h.jsx)(j.a,{show:Xe.reject,Hide:function(){return ht("reject",!1)},content:H}),Object(h.jsx)(j.a,{show:Xe.cancel,Hide:function(){return ht("cancel",!1)},content:B}),Object(h.jsx)(j.a,{show:Xe.revival,Hide:function(){return ht("revival",!1)},content:z}),Object(h.jsx)(j.a,{show:!!g,Hide:function(){return q()},content:V}),Object(h.jsx)("div",{className:"Item_Request_container",children:Object(h.jsxs)(r.d,{children:[Object(h.jsx)(r.b,{exact:!0,path:"/item_requests",render:function(){return Object(h.jsx)(p,{List:he,history:e})}}),Object(h.jsx)(r.b,{exact:!0,path:"/item_requests/view/id=:id",render:function(){return Object(h.jsx)(O,{Action:Xe,history:e,RequestDetails:Ge,AccessControls:t,onAction:ht,GetRequestDetails:it})}}),Object(h.jsx)(r.b,{exact:!0,path:"/item_requests/entry",render:function(){return Object(h.jsx)(f,{history:e,Companies:ye,Locations:fe,StoreItems:De,DisabledEntity:je,Items:Se,Entity:Me,EditMode:ce,Index:$,SubmitForm:ut,RemoveItem:bt,EditItem:jt,AddItem:ot,SelectItem:dt,onChangeEntities:lt,GetCompanies:rt})}}),Object(h.jsx)(r.b,{exact:!0,path:"/item_requests/issue/id=:id",render:function(){return Object(h.jsx)(x,{Items:Se,ItemDetails:Pe,history:e,Inwards:Fe,Companies:ye,setSelectedProduct:q,GetCompanies:rt,GetItemDetails:xt})}})]})})]})})};var x=function(e){var t=e.Companies,s=e.history,c=e.Inwards,n=e.Items,i=e.ItemDetails,r=e.GetCompanies,l=e.GetItemDetails,d=e.setSelectedProduct;return Object(a.useEffect)((function(){0===n.length&&(r(),l(window.location.href.split("/").pop().split("=").pop()))}),[n.length]),Object(h.jsx)(h.Fragment,{children:i&&n.length>0?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("div",{className:"d-flex align-items-center justify-content-between",children:[Object(h.jsxs)("h3",{className:"heading",children:[sessionStorage.getItem("sub_category_name"),Object(h.jsx)("sub",{children:"Sub Category"})]}),Object(h.jsx)("button",{className:"btn submit",onClick:function(){return s.goBack()},type:"button",children:"Go Back"})]}),Object(h.jsx)("hr",{}),Object(h.jsxs)("div",{className:"item_details_grid",children:[Object(h.jsxs)("div",{children:[Object(h.jsxs)("table",{className:"table table-bordered text-center table-striped",children:[Object(h.jsx)("thead",{children:Object(h.jsx)("tr",{children:Object(h.jsx)("th",{children:"Total Store Quantity"})})}),Object(h.jsx)("tbody",{children:Object(h.jsx)("tr",{children:Object(h.jsxs)("td",{children:[Object(h.jsx)("span",{style:{fontSize:40},children:i.quantity}),"Qty"]})})})]}),Object(h.jsxs)("table",{className:"table table-bordered text-center table-striped",children:[Object(h.jsx)("thead",{children:Object(h.jsxs)("tr",{children:[Object(h.jsx)("th",{children:"Companies"}),Object(h.jsx)("th",{children:"Stored Quantity"})]})}),Object(h.jsx)("tbody",{children:t.map((function(e,t){for(var s=Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{children:e.company_name}),Object(h.jsx)("td",{children:"0 Qty"})]},t),c=0;c<n.length;c++)n[c].company_code===e.company_code&&(s=Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{children:n[c].company_name}),Object(h.jsxs)("td",{children:[i.quantity," Qty"]})]},t));return s}))})]})]}),Object(h.jsx)("div",{children:c?0===c.length?Object(h.jsx)("h6",{className:"text-center",children:"No Record Found"}):Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("h6",{className:"mb-0",children:"Total Inwards"}),Object(h.jsx)("p",{className:"mb-1",children:"Kindly issue the required items from the list of inwards below."}),Object(h.jsxs)("table",{className:"table table-bordered text-center table-striped",children:[Object(h.jsx)("thead",{children:Object(h.jsxs)("tr",{children:[Object(h.jsx)("th",{children:"#"}),Object(h.jsx)("th",{children:"Company"}),Object(h.jsx)("th",{children:"Inward Qty"}),Object(h.jsx)("th",{children:"Stored Qty"}),Object(h.jsx)("th",{children:"Dated"})]})}),Object(h.jsx)("tbody",{children:c.map((function(e,t){return Object(h.jsxs)("tr",{className:"pointer",onClick:function(){return d(e)},children:[Object(h.jsx)("td",{children:t+1}),Object(h.jsx)("td",{children:e.company_name}),Object(h.jsx)("td",{children:e.quantity}),Object(h.jsx)("td",{children:e.stored_quantity}),Object(h.jsx)("td",{children:new Date(e.record_date).toDateString()})]},t)}))})]})]}):Object(h.jsx)("h6",{className:"text-center",children:"Please Wait...."})})]})]}):Object(h.jsx)("h6",{className:"text-center mb-0",children:"Please Wait..."})})},O=function(e){var t=e.AccessControls,s=e.Action,c=e.RequestDetails,n=e.history,r=e.onAction,l=e.GetRequestDetails,d=c.details,o=c.specifications,j=JSON.parse(sessionStorage.getItem("AssignedProductList")),u=Object(a.useState)(!1),m=Object(i.a)(u,2),x=m[0],O=m[1];console.log(j),Object(a.useEffect)((function(){if(t.access)for(var e=0;e<JSON.parse(t.access).length;e++)25===parseInt(JSON.parse(t.access)[e])&&O(!0)}),[t.access]),Object(a.useEffect)((function(){l(window.location.href.split("/").pop().split("=").pop())}),[]);var p=function(e,t,s){x&&("approved"===d.status?(sessionStorage.setItem("sub_category_name",t),sessionStorage.setItem("item_id",e),sessionStorage.setItem("required_quantity",s),sessionStorage.setItem("request_id",window.location.href.split("/").pop().split("=").pop()),n.push("/item_requests/issue/id="+e)):b.a.alert("Fetal Error").dismissIn(2e3))};return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("div",{className:"d-flex align-items-center justify-content-between",children:[Object(h.jsxs)("h3",{className:"heading",children:["Item Request",Object(h.jsx)("sub",{children:"View Details"})]}),Object(h.jsx)("button",{className:"btn submit",onClick:function(){return n.push("/item_requests")},type:"button",children:"Back To Requests"})]}),Object(h.jsx)("hr",{}),d?Object(h.jsxs)("div",{className:"animate__animated animate__fadeIn",children:[Object(h.jsxs)("div",{className:"d-flex align-items-center justify-content-end mb-3",children:["sent"===d.status&&d.received_by===parseInt(sessionStorage.getItem("EmpID"))?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("div",{className:"d-flex align-items-center justify-content-end mr-3",children:[Object(h.jsxs)("label",{class:"switch mb-0 mr-2",children:[Object(h.jsx)("input",{checked:s.reject,onChange:function(e){return r("reject",e.target.checked)},type:"checkbox"}),Object(h.jsx)("span",{class:"slider danger"})]}),Object(h.jsx)("span",{children:"Reject"})]}),Object(h.jsxs)("div",{className:"d-flex align-items-center justify-content-end",children:[Object(h.jsxs)("label",{class:"switch mb-0 mr-2",children:[Object(h.jsx)("input",{checked:s.approve,onChange:function(e){return r("approve",e.target.checked)},type:"checkbox"}),Object(h.jsx)("span",{class:"slider"})]}),Object(h.jsx)("span",{children:"Approve"})]})]}):null,"sent"===d.status&&d.request_by===parseInt(sessionStorage.getItem("EmpID"))?Object(h.jsxs)("div",{className:"d-flex align-items-center justify-content-end",children:[Object(h.jsxs)("label",{class:"switch mb-0 mr-2",children:[Object(h.jsx)("input",{checked:s.cancel,onChange:function(e){return r("cancel",e.target.checked)},type:"checkbox"}),Object(h.jsx)("span",{class:"slider green"})]}),Object(h.jsx)("span",{children:"Cancel"})]}):null,"delivery is in process"===d.status&&d.request_by===parseInt(sessionStorage.getItem("EmpID"))?Object(h.jsxs)("div",{className:"d-flex align-items-center justify-content-end",children:[Object(h.jsxs)("label",{class:"switch mb-0 mr-2",children:[Object(h.jsx)("input",{checked:s.revival,onChange:function(e){return r("revival",e.target.checked)},type:"checkbox"}),Object(h.jsx)("span",{class:"slider"})]}),Object(h.jsx)("span",{children:"Received"})]}):null]}),Object(h.jsx)("table",{className:"table table-bordered",children:Object(h.jsxs)("tbody",{children:[Object(h.jsxs)("tr",{children:[Object(h.jsx)("th",{className:"bg-light",children:"Requested By"}),Object(h.jsx)("td",{children:d.sender_name}),Object(h.jsx)("th",{className:"bg-light",children:"Request Date"}),Object(h.jsx)("td",{children:new Date(d.request_date).toDateString()}),Object(h.jsx)("th",{className:"bg-light",children:"Received By"}),Object(h.jsx)("td",{children:d.receiver_name})]}),Object(h.jsxs)("tr",{children:[Object(h.jsx)("th",{className:"bg-light",children:"Company"}),Object(h.jsx)("td",{children:d.company_name}),Object(h.jsx)("th",{className:"bg-light",children:"Delivery Location"}),Object(h.jsx)("td",{children:d.location_name}),Object(h.jsx)("th",{className:"bg-light",children:"Request Status"}),Object(h.jsx)("td",{style:{textTransform:"capitalize",backgroundColor:"approved"===d.status?"#28A745":"rejected"===d.status?"#DC3545":"#343A40"},className:"text-light",children:"sent"===d.status&&d.received_by==sessionStorage.getItem("EmpID")?"Pending For Approval":d.status})]}),Object(h.jsxs)("tr",{children:[Object(h.jsxs)("th",{className:"bg-light",children:["canceled"===d.status?"Cancelation ":"rejected"===d.status?"Rejection ":"Approval ","Date"]}),Object(h.jsx)("td",{children:null===d.acted_date?"Not Approve Yet":new Date(d.acted_date).toDateString()})]})]})}),Object(h.jsx)("h6",{children:"List Of The Required Items"}),Object(h.jsxs)("table",{className:"table table-bordered table-striped border-0",children:[Object(h.jsx)("thead",{children:Object(h.jsxs)("tr",{children:[Object(h.jsx)("th",{className:"text-center",children:"Sr.No"}),Object(h.jsx)("th",{className:"text-center",children:"Item"}),Object(h.jsx)("th",{className:"text-center",children:"H.O.D's Approval Required"}),Object(h.jsx)("th",{className:"text-center",children:"Required Quantity"}),Object(h.jsx)("th",{className:"text-center",children:"Reason"})]})}),Object(h.jsx)("tbody",{id:"specifications_table_body",children:o.map((function(e,t){return Object(h.jsxs)("tr",{title:x?"Double Click":void 0,className:x?"pointer":"",onDoubleClick:function(){return p(e.item_id,e.name,e.required_quantity)},id:"specification_row_"+t,children:[Object(h.jsx)("td",{className:"text-center",id:"specification_serial_no_"+t,children:t+1}),Object(h.jsx)("td",{className:"text-center",id:"specification_description_"+t,children:e.name}),Object(h.jsx)("td",{className:"text-center",id:"specification_hod_approval_"+t,children:1===e.hod_approval_required?Object(h.jsx)("span",{className:"text-danger",children:"Required"}):Object(h.jsx)("span",{className:"text-dark",children:"Not Required"})}),Object(h.jsx)("td",{className:"text-center",id:"specification_quantity_"+t,children:e.required_quantity}),Object(h.jsx)("td",{className:"text-center",id:"specification_reason_"+t,children:e.reason})]},t)}))})]}),j&&j.length>0?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("h6",{children:"List Of The Issued Items"}),Object(h.jsxs)("table",{className:"table table-bordered table-striped border-0",children:[Object(h.jsx)("thead",{children:Object(h.jsxs)("tr",{children:[Object(h.jsx)("th",{className:"text-center",children:"Sr.No"}),Object(h.jsx)("th",{className:"text-center",children:"Item"}),Object(h.jsx)("th",{className:"text-center",children:"H.O.D's Approval Required"}),Object(h.jsx)("th",{className:"text-center",children:"Required Quantity"}),Object(h.jsx)("th",{className:"text-center",children:"Assigned Quantity"})]})}),Object(h.jsx)("tbody",{id:"specifications_table_body",children:j.map((function(e,t){return Object(h.jsxs)("tr",{title:x?"Double Click":void 0,className:x?"pointer":"",onDoubleClick:function(){return p(e.item_id,e.name,e.required_quantity)},id:"specification_row_"+t,children:[Object(h.jsx)("td",{className:"text-center",id:"specification_serial_no_"+t,children:t+1}),Object(h.jsx)("td",{className:"text-center",id:"specification_description_"+t,children:e.name}),Object(h.jsx)("td",{className:"text-center",id:"specification_hod_approval_"+t,children:1===e.hod_approval_required?Object(h.jsx)("span",{className:"text-danger",children:"Required"}):Object(h.jsx)("span",{className:"text-dark",children:"Not Required"})}),Object(h.jsx)("td",{className:"text-center",id:"specification_required_quantity_"+t,children:e.required_quantity}),Object(h.jsx)("td",{className:"text-center",id:"specification_deliver_quantity_"+t,children:e.deliver_quantity})]},t)}))})]})]}):null,Object(h.jsxs)("div",{className:"d-flex w-100",children:[Object(h.jsx)("div",{className:"w-100 pr-2",children:null===c.details.acted_date?null:Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("h6",{children:"Remarks"}),Object(h.jsx)("table",{className:"table",children:Object(h.jsxs)("tbody",{children:[Object(h.jsxs)("tr",{children:[Object(h.jsx)("th",{children:"Remarks From: "}),Object(h.jsx)("td",{children:d.acted_name})]}),Object(h.jsxs)("tr",{children:[Object(h.jsx)("th",{children:"Remarks: "}),Object(h.jsx)("td",{children:d.remarks?d.remarks:"No Remarks Yet"})]})]})})]})}),Object(h.jsx)("div",{className:"w-100 pl-2",children:null===c.details.delivery_date?null:Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("h6",{children:"Delivery"}),Object(h.jsx)("table",{className:"table",children:Object(h.jsxs)("tbody",{children:[Object(h.jsxs)("tr",{children:[Object(h.jsx)("th",{children:"Delivery Date: "}),Object(h.jsx)("td",{children:new Date(c.details.delivery_date).toDateString()})]}),Object(h.jsxs)("tr",{children:[Object(h.jsx)("th",{children:"Delivery Time: "}),Object(h.jsx)("td",{children:d.delivery_time.substring(0,5)})]})]})})]})})]})]}):Object(h.jsx)("h6",{className:"text-center mb-0",children:"Please Wait...."})]})},p=function(e){var t=e.List,s=e.history;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("div",{className:"d-flex align-items-center justify-content-between",children:[Object(h.jsxs)("h3",{className:"heading",children:["Item Request",Object(h.jsx)("sub",{children:"all list view"})]}),Object(h.jsx)("button",{className:"btn submit",onClick:function(){return s.push("/item_requests/entry")},type:"button",children:"New Request"})]}),Object(h.jsx)("hr",{}),t?0===t.length?Object(h.jsx)("h6",{className:"text-center",children:"No Record Found"}):Object(h.jsxs)("table",{className:"table table-hover table-striped",children:[Object(h.jsx)("thead",{children:Object(h.jsxs)("tr",{children:[Object(h.jsx)("th",{children:"Sr.No"}),Object(h.jsx)("th",{children:"Company & Location"}),Object(h.jsx)("th",{children:"Requested By"}),Object(h.jsx)("th",{children:"Received By"}),Object(h.jsx)("th",{children:"Current Status"}),Object(h.jsx)("th",{children:"Date & Time"})]})}),Object(h.jsx)("tbody",{children:t.map((function(e,t){return Object(h.jsxs)("tr",{className:"pointer",onClick:function(){return s.replace("/item_requests/view/id="+e.id)},children:[Object(h.jsx)("td",{children:t+1}),Object(h.jsxs)("td",{children:[e.company_name," ",Object(h.jsx)("br",{}),e.location_name]}),Object(h.jsx)("td",{children:e.sender_name}),Object(h.jsx)("td",{children:e.receiver_name}),Object(h.jsx)("td",{children:Object(h.jsxs)("div",{className:"d-flex align-items-center",children:[Object(h.jsx)("div",{className:"dot mr-1 "+("approved"===e.status||"delivered"===e.status||"partially delivered"===e.status?"bg-success":"rejected"===e.status?"bg-danger":"bg-dark")}),Object(h.jsx)("div",{className:"text-capitalize "+("approved"===e.status||"delivered"===e.status||"partially delivered"===e.status?"text-success":"rejected"===e.status?"text-danger":"text-dark"),children:e.status})]})}),Object(h.jsxs)("td",{children:[new Date(e.request_date).toDateString()," at ",e.request_time.substring(0,5)]})]},t)}))})]}):Object(h.jsx)("h6",{className:"text-center",children:"Please Wait..."})]})},f=function(e){var t=e.EditMode,s=e.Index,c=e.Entity,n=e.Items,i=e.DisabledEntity,r=e.StoreItems,l=e.history,d=e.Locations,o=e.Companies,j=e.SubmitForm,b=e.SelectItem,u=e.AddItem,m=e.RemoveItem,x=e.EditItem,O=e.onChangeEntities,p=e.GetCompanies;return Object(a.useEffect)((function(){p()}),[]),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("div",{className:"d-flex align-items-center justify-content-between",children:[Object(h.jsxs)("h3",{className:"heading",children:["Item Request",Object(h.jsx)("sub",{children:"New Request"})]}),Object(h.jsx)("button",{className:"btn submit",onClick:function(){return l.push("/item_requests")},type:"button",children:"Back To List"})]}),Object(h.jsx)("hr",{}),Object(h.jsx)("form",{onSubmit:j,children:Object(h.jsxs)("fieldset",{children:[Object(h.jsxs)("div",{className:"flex_container mb-3",children:[Object(h.jsxs)("div",{children:[Object(h.jsx)("label",{className:"mb-0",children:Object(h.jsx)("b",{children:"Company"})}),Object(h.jsxs)("select",{className:"form-control",name:"company_code",required:!0,children:[Object(h.jsx)("option",{value:"",children:"Select the option"}),o.map((function(e){return Object(h.jsxs)("option",{value:e.company_code,children:[" ",e.company_name," "]},e.company_code)}))]})]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("label",{className:"mb-0",children:Object(h.jsx)("b",{children:"Location"})}),Object(h.jsxs)("select",{className:"form-control",name:"location_code",required:!0,children:[Object(h.jsx)("option",{value:"",children:"Select the option"}),d.map((function(e){return Object(h.jsxs)("option",{value:e.location_code,children:[" ",e.location_name," "]},e.location_code)}))]})]})]}),Object(h.jsxs)("div",{className:"mb-3",children:[Object(h.jsxs)("div",{className:"grid",children:[Object(h.jsxs)("div",{children:[Object(h.jsx)("label",{className:"mb-0",children:Object(h.jsx)("b",{children:"Item"})}),Object(h.jsxs)("div",{className:"items_container",children:[Object(h.jsx)("input",{className:"form-control",value:c.name,name:"name",onChange:O}),r?Object(h.jsx)("div",{className:"items_list",children:"string"===typeof r?Object(h.jsx)("p",{className:"text-center mb-0",children:r}):0===r.length?Object(h.jsx)("p",{className:"text-center mb-0",children:"No Record Found"}):r.map((function(e,t){return Object(h.jsxs)("div",{onClick:function(){return b(t)},className:"item text-capitalize",children:[e.name,Object(h.jsx)("hr",{className:"m-0"})]},t)}))}):null,Object(h.jsx)("small",{children:Object(h.jsx)("b",{children:"Select from the dropdown"})})]})]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("label",{className:"mb-0",children:Object(h.jsx)("b",{children:"Quantity"})}),Object(h.jsx)("input",{className:"form-control",value:c.required_quantity,type:"number",onChange:O,name:"required_quantity"}),Object(h.jsx)("small",{children:Object(h.jsx)("b",{children:"Minimum 1 is required"})})]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("label",{className:"mb-0",children:Object(h.jsx)("b",{children:"Reason"})}),Object(h.jsx)("input",{className:"form-control",value:c.reason,onChange:O,name:"reason"}),Object(h.jsx)("small",{children:Object(h.jsx)("b",{children:"Minimum 20 characters are required"})})]})]}),Object(h.jsx)("button",{onClick:function(){return u("log")},className:"btn d-block ml-auto submit mt-2",type:"button",disabled:i,children:t?"Press To Update "+(s+1):"Press To Enter"})]}),Object(h.jsx)("h6",{children:"Entered Items List"}),0===n.length?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("p",{className:"text-center mb-0",children:Object(h.jsx)("b",{children:"No Item Entered"})}),Object(h.jsx)("hr",{className:"my-1"})]}):Object(h.jsxs)("table",{className:"table table-bordered table-striped border-0",children:[Object(h.jsx)("thead",{children:Object(h.jsxs)("tr",{children:[Object(h.jsx)("th",{className:"text-center",children:"Sr.No"}),Object(h.jsx)("th",{className:"text-center",children:"Item"}),Object(h.jsx)("th",{className:"text-center",children:"H.O.D's Approval Required"}),Object(h.jsx)("th",{className:"text-center",children:"Required Quantity"}),Object(h.jsx)("th",{className:"text-center",colSpan:2,children:"Reason"})]})}),Object(h.jsx)("tbody",{id:"specifications_table_body",children:n.map((function(e,t){return Object(h.jsxs)("tr",{id:"specification_row_"+t,children:[Object(h.jsx)("td",{className:"text-center",id:"specification_serial_no_"+t,children:t+1}),Object(h.jsx)("td",{className:"text-center",id:"specification_description_"+t,children:e.name}),Object(h.jsx)("td",{className:"text-center",id:"specification_hod_approval_"+t,children:1===e.hod_approval_required?Object(h.jsx)("span",{className:"text-danger",children:"Required"}):Object(h.jsx)("span",{className:"text-dark",children:"Not Required"})}),Object(h.jsx)("td",{className:"text-center",id:"specification_quantity_"+t,children:e.required_quantity}),Object(h.jsx)("td",{className:"text-center",id:"specification_reason_"+t,children:e.reason}),Object(h.jsx)("td",{className:"text-center",id:"specification_action_"+t,children:Object(h.jsxs)("span",{children:[Object(h.jsx)("i",{onClick:function(){return x(t)},className:"lar text-success mx-1 la-edit"}),Object(h.jsx)("i",{onClick:function(){return m(t)},className:"lar text-danger mx-1 la-trash-alt"})]})})]},t)}))})]}),Object(h.jsx)("button",{className:"btn d-block ml-auto submit mt-3",type:"submit",children:"Send Request"})]})})]})}},552:function(e,t,s){},91:function(e,t,s){"use strict";s(1),s(92);var c=s(0);t.a=function(e){return Object(c.jsx)(c.Fragment,{children:Object(c.jsxs)("div",{className:"Attandence_Request_Div",style:{display:e.show?"flex":"none"},children:[Object(c.jsx)("div",{className:"dark",onClick:e.Hide}),Object(c.jsxs)("div",{style:{animationDelay:"0.1".toString()+"s"},className:e.show?"Attandence_Request_Div_Content Attandence_Request_Div_Content2":"Attandence_Request_Div_Content",children:[Object(c.jsx)("i",{className:"lar la-times-circle cross",onClick:e.Hide}),e.content]})]})})}},92:function(e,t,s){}}]);