(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[87],{618:function(t,e,n){"use strict";n.r(e);var o=n(4),a=n(1),i=n(3),c=n(83),s=(n(82),n(24)),r=n(9),u=n(11),l=n(80),d=n.n(l),p=function(t){var e=t.target.id.split("_").pop(),n="specification_row_"+e,o=document.getElementById(n).childNodes,a=o[0],i=o[1],c=o[2],s=o[3],r=o[4];f(t,c,s,r,a,i,e)},f=function(t,e,n,o,a,i,c){if(t.target.id.includes("specification_quantity")||t.target.id.includes("specification_est_cost"))if(""==e.textContent&&""==n.textContent)o.textContent="";else{var s=parseInt(""==e.textContent?0:e.textContent),r=parseFloat(""==n.textContent?0:n.textContent);if(isNaN(s))return e.style.outline="1px solid red",a.textContent="",!1;if(e.style.outline="none",isNaN(r))return n.style.outline="1px solid red",a.textContent="",!1;n.style.outline="none",o.textContent=s*r,h(a,i,e,n,c),b()}},b=function(){for(var t=document.getElementById("specifications_table_body").childNodes,e=Object.keys(t).map((function(e){return[t[e]]})),n=0,o=0;o<e.length;o++){var a=e[o][0].childNodes[4];""!==a.textContent&&(n+=parseInt(a.textContent))}return document.getElementById("total_calculated_amount").textContent=n,n},h=function(t,e,n,o,a){""!==e.textContent&&""!==n.textContent&&""!==o.textContent?t.textContent=a:t.textContent=""},g=n(0),m=Object(a.lazy)((function(){return n.e(37).then(n.bind(null,638))}));e.default=function(){var t=Object(i.g)(),e=Object(a.useState)(!1),n=Object(o.a)(e,2),l=n[0],f=n[1],h=Object(a.useState)(!1),j=Object(o.a)(h,2),O=j[0],_=j[1],x=Object(a.useState)([]),C=Object(o.a)(x,2),v=C[0],y=C[1],S=Object(a.useState)([]),k=Object(o.a)(S,2),N=k[0],q=k[1],I=Object(a.useState)([]),w=Object(o.a)(I,2),R=w[0],D=w[1],E=Object(a.useState)([]),B=Object(o.a)(E,2),P=B[0],Q=B[1],A=Object(a.useState)([]),F=Object(o.a)(A,2),J=F[0],H=F[1],T=Object(a.useState)(),L=Object(o.a)(T,2),M=L[0],z=L[1],G=Object(a.useState)(),U=Object(o.a)(G,2),W=U[0],K=U[1],V=Object(a.useState)(),X=Object(o.a)(V,2),Y=X[0],Z=X[1];return Object(a.useEffect)((function(){!function(t){u.a.get("/getallcompanies").then((function(e){t(e.data)})).catch((function(t){console.log(t)}))}(D),function(t){u.a.get("/getalllocations").then((function(e){t(e.data)})).catch((function(t){console.log(t)}))}(Q)}),[]),Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(a.Suspense,{fallback:Object(g.jsx)("div",{children:"Please Wait..."}),children:Object(g.jsx)(m,{Companies:R,Locations:P,Quotations:v,ShowQuotationModal:l,SubmitConfirmation:O,Requests:W,history:t,RequestDetails:Y,Specifications:J,AttachedQuotations:N,openRequestDetails:function(t){return function(t,e,n,o){u.a.post("/purchase/requisition/details",{pr_id:t}).then((function(t){e(t.data[0][0]),n(t.data[1]),o(t.data[2])})).catch((function(t){console.log(t)}))}(t,Z,H,q)},PRSubmittion:function(e){return function(t,e,n,o,a){t.preventDefault();for(var i=new FormData,c=document.getElementById("specifications_table_body").childNodes,l=Object.keys(c).map((function(t){return[c[t]]})),p=[],f=!0,b=function(t){var e=!0,o={},a=l[t][0].childNodes,i=Object.keys(a).map((function(t){return[a[t]]}));""===l[t][0].childNodes[1].textContent&&""===l[t][0].childNodes[2].textContent&&""===l[t][0].childNodes[3].textContent||""===l[t][0].childNodes[0].textContent&&(f=!1,n.dark("There is an incomplete value in the specifications list.",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}));for(var c=0;c<i.length;c++){var u=i[c][0].id.split("_");u.pop(),o=Object(r.a)(Object(r.a)({},o),{},Object(s.a)({},u.join("_"),i[c][0].textContent))}for(var d=Object.keys(o).map((function(t){return[o[t]]})),b=0;b<d.length;b++)""===d[b][0]&&(e=!1);e&&p.push(o)},h=0;h<l.length;h++)b(h);f&&(d()("fieldset").prop("disabled",!0),i.append("specifications",JSON.stringify(p)),i.append("data",JSON.stringify(a)),i.append("note",t.target.notes.value),i.append("requested_by",sessionStorage.getItem("EmpID")),o.forEach((function(t){i.append("Attachments",t.file)})),u.a.post("/purchase/requisition/submittion&&submit_by=employee",i,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){"success"===t.data&&(setTimeout((function(){d()("fieldset").prop("disabled",!1),e.replace("/purchase/requisition/requests")}),2e3),n.dark("Purchase Requisition Has Been Generated",{position:"top-center",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}))})).catch((function(t){d()("fieldset").prop("disabled",!1),console.log(t)})))}(e,t,c.b,v,M)},SubmitPR:function(t){return function(t,e,n){t.preventDefault(),e({company_code:t.target.company_code.value,location_code:t.target.location_code.value,new_purchase_checkbox:t.target.new_purchase.checked,repair_replacement_checkbox:t.target.repair_replacement.checked,budgeted_checkbox:t.target.budgeted.checked,not_budgeted_checkbox:t.target.not_budgeted.checked,invoice_attached_checkbox:t.target.invoice_attached.checked,reason:t.target.reason.value,total_calculated_amount:b()}),n(!0)}(t,z,_)},setSubmitConfirmation:_,onAttachQuotations:function(t){return function(t,e){var n=new FileReader;n.onload=function(){if(2===n.readyState){for(var o=[],a=0;a<t.target.files.length;a++)o.push({file:t.target.files[a],name:t.target.files[a].name,extension:t.target.files[a].type});e(o)}},t.target.files[0]&&n.readAsDataURL(t.target.files[0])}(t,y)},setShowQuotationModal:f,onContentInput:p,loadRequests:function(){return function(t){u.a.post("/purchase/requisition/load/requests",{emp_id:sessionStorage.getItem("EmpID")}).then((function(e){t(e.data)})).catch((function(t){console.log(t)}))}(K)}})}),Object(g.jsx)(c.a,{})]})}}}]);