(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[66],{524:function(e,t,n){"use strict";n.r(t);var a=n(24),s=n(9),l=n(5),c=n(1),i=n.n(c),r=(n(525),n(11)),o=n(25),d=n(86),j=(n(85),n(160)),b=n.n(j),u=(n(526),n(528),n(0));t.default=function(){var e=Object(o.c)((function(e){return e.EmpAuth.EmployeeData})),t=i.a.createRef(),n=Object(o.c)((function(e){return e.EmpAuth.EmployeeData})),j=Object(c.useState)(""),m=Object(l.a)(j,2),h=m[0],O=m[1],x=Object(c.useState)([]),p=Object(l.a)(x,2),_=p[0],g=p[1],f=Object(c.useState)([]),v=Object(l.a)(f,2),y=v[0],k=v[1],N=Object(c.useState)([]),F=Object(l.a)(N,2),D=F[0],S=F[1],w=Object(c.useState)({dateFrom:"",dateTo:"",company:null}),C=Object(l.a)(w,2),E=C[0],T=C[1];Object(c.useEffect)((function(){var t=null===E.company?e.company_code:E.company,n=E.dateFrom,a=E.dateTo;if(""!==n&&""!==a&&a<n)return d.b.dark("Date To should greater than Date From",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),!1;var s=new FormData;s.append("DateFrom",n),s.append("DateTo",a),s.append("CompanyCode",t),r.a.post("/allemployeesattcompanywiseaccordingtodate",s).then((function(e){k(e.data)})).catch((function(e){d.b.dark(e,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}))}),[E.dateFrom,E.dateTo,E.company]),Object(c.useEffect)((function(){r.a.get("/getcompaniescodes").then((function(e){S(e.data)})).catch((function(e){d.b.dark(e,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}))}),[]),Object(c.useEffect)((function(){for(var e=[],t=0;t<y.length;t++)e.includes(y[t].name)||e.push(y[t].name);g(e)}),[y.length]);var A=function(e){var t=e.target,n=t.name,l=t.value,c=Object(s.a)(Object(s.a)({},E),{},Object(a.a)({},n,l));T(c)};return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(d.a,{}),Object(u.jsxs)("div",{className:"View_Employee_Attendance",children:[Object(u.jsx)("div",{className:"DivFirst",children:Object(u.jsxs)("div",{className:"Filters",children:[Object(u.jsxs)("div",{className:"d-flex align-items-center",children:[n.access&&(JSON.parse(n.access).includes(18)||JSON.parse(n.access).includes(0))?Object(u.jsxs)("div",{className:"w-100 px-1",children:[Object(u.jsx)("label",{className:"mb-0",children:"Company"}),Object(u.jsxs)("select",{className:"form-control bg-light",variant:"standard",style:{width:"100%",fontSize:"12px",fontFamily:"Quicksand"},onChange:A,name:"company",children:[Object(u.jsx)("option",{value:"",children:"Select the Option"}),D.map((function(e,t){var n=Object(u.jsx)(u.Fragment,{});return"Y"===e.Status_View&&(n=Object(u.jsx)("option",{value:e.company_code,children:e.company_name},t)),n}))]})]}):null,Object(u.jsxs)("div",{className:"w-100 px-1",children:[Object(u.jsx)("label",{className:"mb-0",children:"Date From"}),Object(u.jsx)("input",{className:"form-control form-control-sm bg-light",name:"dateFrom",onChange:A,type:"date",variant:"standard",style:{marginBottom:"10px"},fullWidth:!0})]}),Object(u.jsxs)("div",{className:"w-100 px-1",children:[Object(u.jsx)("label",{className:"mb-0",children:"Date To"}),Object(u.jsx)("input",{className:"form-control form-control-sm bg-light",name:"dateTo",onChange:A,type:"date",variant:"standard",style:{marginBottom:"10px"},fullWidth:!0})]}),_.length>0?Object(u.jsxs)("div",{className:"w-100 px-1",children:[Object(u.jsx)("label",{className:"mb-0",children:"Employees"}),Object(u.jsxs)("select",{className:"form-control bg-light",variant:"standard",style:{width:"100%",fontSize:"12px",fontFamily:"Quicksand"},onChange:function(e){return O(e.target.value)},name:"employee",children:[Object(u.jsx)("option",{value:"",children:"Select the Option"}),_.map((function(e,t){return Object(u.jsx)("option",{value:e,children:e},t)}))]})]}):null]}),y.length>0?Object(u.jsx)(b.a,{id:"test-table-xls-button",className:"download-table-xls-button",table:"table-to-xls",filename:e.company_name+"_Employees_Attendance_From_"+E.dateFrom+"_To_"+E.dateTo,sheet:["Employees","Employees","Employees","Employees"],buttonText:"Export in excel"}):null]})}),Object(u.jsx)("div",{children:Object(u.jsxs)("div",{className:"Attendance",children:[Object(u.jsx)("h5",{className:"mb-4 font-weight-bolder",children:"Daily Attendance"}),Object(u.jsx)("div",{className:"attendance-content",children:0===y.length?Object(u.jsx)("h5",{className:"text-center font-weight-bolder",children:"No Record Found"}):Object(u.jsxs)("table",{className:"table table-sm",id:"table-to-xls",ref:t,children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{className:"d-none",children:"IDs"}),Object(u.jsx)("th",{children:"Name"}),Object(u.jsx)("th",{children:"Date"}),Object(u.jsx)("th",{className:"d-none",children:"Day"}),Object(u.jsx)("th",{children:"Time In"}),Object(u.jsx)("th",{children:"Time Out"}),Object(u.jsx)("th",{children:"Break In"}),Object(u.jsx)("th",{children:"Break Out"}),Object(u.jsx)("th",{children:"Status"})]})}),Object(u.jsx)("tbody",{children:y.map((function(e,t){var n,a=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][new Date(e.emp_date.toString().substring(0,10)).getDay()];return h.length>0?e.name===h&&(n=Object(u.jsxs)("tr",{style:{backgroundColor:"Sunday"===a||"Holiday"===e.status||"OFF"===e.status?"#899499":"Absent"===e.status||"leave"===e.status||"Late"===e.status?"#D3D3D3":"#fff"},children:[Object(u.jsxs)("td",{className:"d-none",children:[" ",e.emp_id," "]}),Object(u.jsxs)("td",{children:[" ",e.name," "]}),Object(u.jsxs)("td",{children:[" ",e.emp_date.toString().substring(0,10)," "]}),Object(u.jsxs)("td",{className:"d-none",children:[" ",a," "]}),"leave"===e.status&&null===e.time_in&&null===e.time_out&&null===e.break_in&&null===e.break_out?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("td",{}),Object(u.jsx)("td",{}),Object(u.jsx)("td",{}),Object(u.jsx)("td",{})]}):("leave"!==e.status||null===e.time_in&&null===e.time_out&&null===e.break_in&&e.break_out,Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("td",{children:[" ",null===e.time_in?Object(u.jsx)("span",{}):e.time_in," "]}),Object(u.jsxs)("td",{children:[" ",null===e.time_out?Object(u.jsx)("span",{}):e.time_out," "]}),Object(u.jsxs)("td",{children:[" ",null===e.break_in?Object(u.jsx)("span",{}):e.break_in," "]}),Object(u.jsxs)("td",{children:[" ",null===e.break_out?Object(u.jsx)("span",{}):e.break_out," "]})]})),Object(u.jsx)("td",{children:"leave"===e.status&&null===e.time_in&&null===e.time_out&&null===e.break_in&&null===e.break_out||"leave"!==e.status||null===e.time_in&&null===e.time_out&&null===e.break_in&&null===e.break_out?Object(u.jsx)(u.Fragment,{children:e.status}):Object(u.jsx)(u.Fragment,{children:"Short Leave"})})]},t)):n=Object(u.jsxs)("tr",{style:{backgroundColor:"Sunday"===a||"Holiday"===e.status||"OFF"===e.status?"#899499":"Absent"===e.status||"leave"===e.status||"Late"===e.status?"#D3D3D3":"#fff"},children:[Object(u.jsxs)("td",{className:"d-none",children:[" ",e.emp_id," "]}),Object(u.jsxs)("td",{children:[" ",e.name," "]}),Object(u.jsxs)("td",{children:[" ",e.emp_date.toString().substring(0,10)," "]}),Object(u.jsxs)("td",{className:"d-none",children:[" ",a," "]}),"leave"===e.status&&null===e.time_in&&null===e.time_out&&null===e.break_in&&null===e.break_out?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("td",{}),Object(u.jsx)("td",{}),Object(u.jsx)("td",{}),Object(u.jsx)("td",{})]}):("leave"!==e.status||null===e.time_in&&null===e.time_out&&null===e.break_in&&e.break_out,Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("td",{children:[" ",null===e.time_in?Object(u.jsx)("span",{}):e.time_in," "]}),Object(u.jsxs)("td",{children:[" ",null===e.time_out?Object(u.jsx)("span",{}):e.time_out," "]}),Object(u.jsxs)("td",{children:[" ",null===e.break_in?Object(u.jsx)("span",{}):e.break_in," "]}),Object(u.jsxs)("td",{children:[" ",null===e.break_out?Object(u.jsx)("span",{}):e.break_out," "]})]})),Object(u.jsx)("td",{children:"leave"===e.status&&null===e.time_in&&null===e.time_out&&null===e.break_in&&null===e.break_out||"leave"!==e.status||null===e.time_in&&null===e.time_out&&null===e.break_in&&null===e.break_out?Object(u.jsx)(u.Fragment,{children:e.status}):Object(u.jsx)(u.Fragment,{children:"Short Leave"})})]},t),n}))})]})})]})})]})]})}},525:function(e,t,n){}}]);